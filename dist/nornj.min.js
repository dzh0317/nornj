/*!
* NornJ template engine v5.0.0-rc.6
* (c) 2016-2019 Joe_Sky
* Released under the MIT License.
*/
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).NornJ={})}(this,function(e){"use strict";function I(){return I["taggedTmpl"+(I.outputH?"H":"")].apply(null,arguments)}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,a=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw l}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}I.createElement=null,I.components={},I.componentConfig=new Map,I.preAsts={},I.asts={},I.templates={},I.errorTitle="[NornJ]",I.tmplRule={},I.outputH=!1,I.global="undefined"!=typeof self?self:global,I.textTag="nj-text",I.textMode=!1,I.noWsTag="nj-noWs",I.noWsMode=!1;var r=Array.prototype.push,a=Array.prototype.slice,l=Object.prototype.hasOwnProperty,n=Object.prototype.toString,i=I.errorTitle,x=Object.defineProperty,b=Object.defineProperties;function T(e,n){return r.apply(e,n),e}function o(e,n,t){return a.call(e,n,t)}function O(e){return Array.isArray(e)}function d(e){var n=t(e);return!O(e)&&("function"===n||"object"===n&&!!e)}function s(e){return"[object Number]"===n.call(e)}function N(e){return"[object String]"===n.call(e)}var u,c=(u="length",function(e){return null==e?void 0:e[u]});function p(e){var n=c(e);return"number"==typeof n&&0<=n}function F(e,n,t){if(e)if(null==t&&(t=p(e)),t)for(var r=0,a=e.length;r<a;r++){if(!1===n.call(e,e[r],r,a))break}else for(var l=Object.keys(e),i=l.length,o=0;o<i;o++){var s=l[o];if(!1===n.call(e,e[s],s,o,i))break}}var f=/(\n|\r)?[\s\xA0]+$/;function E(e){return e.replace(f,function(e,n){return n?"\n":""})}function m(){}function v(e,n,t){if(!e)switch(t){case"ex":throw Error(i+'Extension tag "'+n+'" is undefined, please check it has been registered.');default:throw Error(i+(n||e))}}function g(e,n){switch(n){case"f":e='A filter called "'+e+'" is undefined.'}console.warn(i+e)}function h(e){console.error(i+e)}function H(){return Object.create(null)}var _=/["]+/g,y=/[']+/g;function R(e,n){if(null!=e){var t;if(null==n){var r=e[0];"'"===r?t=y:'"'===r&&(t=_)}else t=n?_:y;return t&&(e=e.replace(t,"")),e}}function j(e){return-1<e.indexOf("-")&&(e=e.replace(/-\w/g,function(e){return e.substr(1).toUpperCase()})),e}var K=Object.assign||function(e){for(var n=1,t=arguments;n<t.length;n++){var r=t[n];for(var a in r)l.call(r,a)&&(e[a]=r[a])}return e};function P(e){return e[0].toUpperCase()+e.substr(1)}function C(e){return e[0].toLowerCase()+e.substr(1)}K(I,{defineProp:x,defineProps:b,arrayPush:T,arraySlice:o,isArray:O,isObject:d,isNumber:s,isString:N,isArrayLike:p,each:F,noop:m,throwIf:v,warn:g,obj:H,camelCase:j,assign:K,capitalize:P,lowerFirst:C});var w=Object.freeze({defineProp:x,defineProps:b,arrayPush:T,arraySlice:o,isArray:O,isObject:d,isNumber:s,isString:N,isArrayLike:p,each:F,trimRight:E,noop:m,throwIf:v,warn:g,error:h,obj:H,clearQuot:R,camelCase:j,assign:K,capitalize:P,lowerFirst:C}),S=I.components,A=I.componentConfig;function $(e,n,t){var o,r=e;return d(e)||((r={})[e]={component:n,options:t}),F(r,function(e,n,t){var r;if(null!=e){var a=e.component,l=e.options,i=n.toLowerCase();A.set(S[i]=r=a||e,l)}0==t?o=r:(1==t&&(o=[o]),o.push(r))},!1),o}function z(e,n){return RegExp(e,n)}function M(e){return e.replace(/\$/g,"\\$")}function L(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0,t=I.tmplRule,r=t.startRule,a=void 0===r?"{{":r,l=t.endRule,i=void 0===l?"}}":l,o=t.extensionRule,s=void 0===o?"#":o,u=t.propRule,c=void 0===u?"@":u,p=t.strPropRule,f=void 0===p?"@":p,m=t.templateRule,v=void 0===m?"template":m,g=t.tagSpRule,d=void 0===g?"#$@":g,h=t.commentRule,_=void 0===h?"#":h,y=e.start,x=e.end,b=e.extension,j=e.prop,R=e.strProp,P=e.template,C=e.tagSp,w=e.comment;y&&(a=y),x&&(i=x),b&&(s=b),j&&(c=j),R&&(f=R),P&&(v=P),C&&(d=C),null!=w&&(_=w);var S=a[0],T=i[i.length-1],O=function(e){return e.replace(/\-/g,"\\-")}(function(e){for(var n,t="",r=0,a=e.length;r<a;r++)t.indexOf(n=e[r])<0&&(t+=n);return t}(s+c+f+d)),k=M(s),N=M(c),E=M(f),H=S+a,A=i+T,$="[\\s\\S]+?",L="\\.\\.\\."+$,F=H+$+A+"|"+a+$+i,D={startRule:a,endRule:i,extensionRule:s,propRule:c,strPropRule:f,templateRule:v,tagSpRule:d,commentRule:_,firstChar:S,lastChar:T,braceParamStr:F,xmlOpenTag:z("^<([a-z"+S+O+"][^\\s>]*)[^>]*>$","i"),openTagParams:z("[\\s]+((("+H+"("+$+")"+A+")|("+a+"("+$+")"+i+"))|[^\\s=>]+)(=(('[^']+')|(\"[^\"]+\")|([^\"'\\s]+)))?","g"),directives:z("[\\s]+((("+H+"("+$+")"+A+")|("+a+"("+$+")"+i+"))|((:?)("+k+"|n-)?([^\\s=>]+)))(=(('[^']+')|(\"[^\"]+\")|([^\"'\\s>]+)))?","g"),braceParam:z(F,"i"),braceParamG:z(F,"ig"),spreadProp:z("[\\s]+("+H+"[\\s]*("+L+")"+A+")|("+a+"[\\s]*("+L+")"+i+")","g"),replaceSplit:z(F),replaceParam:z("(("+H+")("+$+")"+A+")|(("+a+")("+$+")"+i+")","g"),checkElem:z("([^<>]+)|(<([a-z/!"+S+O+"][^\\s<>]*)([^<>]*)>|<)([^<]*)","ig"),extension:z("^"+k+"([^\\s]+)","i"),exAll:z("^([/]?)("+k+"|"+E+N+"|"+N+")([^\\s]+)","i"),include:z("<"+k+"include([^>]*)>","ig"),incompleteStart:z(a+"((?!"+i+")[\\s\\S])*$"),incompleteStartR:z(H+"((?!"+A+")[\\s\\S])*$"),incompleteEnd:z("^[\\s\\S]*?"+i),incompleteEndR:z("^[\\s\\S]*?"+A)};if(!n)return D;K(I.tmplRule,D)}L({},!0);var D={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},G=/[&><"']/g;var W={nbsp:" ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lt:"<",gt:">",amp:"&",quot:'"',"#x27":"'"},q=RegExp("&("+Object.keys(W).join("|")+");","g");function B(e){return null==e?"":e.replace?e.replace(q,function(e,n){return W[n]}):e}K(I,{escape:function(e){return null==e?"":e.replace?e.replace(G,function(e){return D[e]}):e},unescape:B});var J=/^(-?([0-9]+[\.]?[0-9]+)|[0-9])$/;function Z(e){if(d(e)||O(e)||s(e))return e;for(var n,t,r=/([^\s:]+)[\s]?:[\s]?([^;]+)[;]?/g;n=r.exec(e);){var a=n[1],l=n[2];t||(t={}),/^[A-Z-]+$/.test(a)&&(a=a.toLowerCase()),t[a=j(a)]=J.test(l)?+l:l}return t}function U(e,n,t){var r,a;n||(n=this.data);for(var l=0,i=n.length;l<i;l++)if((a=n[l])&&void 0!==(r=a[e]))return t?{_njCtx:a,val:r,prop:e}:r}function Q(e,n){return null!=e&&null!=n.level&&(e+=n.level),e}function V(e,n,t){return null==e?e:e.val._njTmpl?e.val.call({_njData:n.data,_njParent:n.parent,_njIndex:n.index,_njLevel:Q(t,n),_njIcp:n.icp}):e.val.call(n.data[n.data.length-1],n)}function X(e,n,t,r,a){var l;return r.icp&&(l=U(t,r.icp))||(l=n.cp[e]),null!=a&&l&&(l=l[a]),l||t}function Y(e,n,t,r,a){return null!=e?N(e)?X(e.toLowerCase(),t,e,a):e:X(n,t,r,a)}function ee(e,n){return null!=e&&""!==e?e:n}function ne(e,n){var t=e.args;if(t)for(var r=t.length;r--;)n.unshift(t[r])}function te(e,n){return n?{data:n.data?T(n.data,e.data):e.data,parent:n.fallback?e:e.parent,root:e.root||e,index:"index"in n?n.index:e.index,item:"item"in n?n.item:e.item,level:e.level,getData:U,get ctxInstance(){return this.data[this.data.length-1]},d:U,icp:e.icp}:e}function re(e){switch(e){case"class":e="className";break;case"for":e="htmlFor"}return e}function ae(){var e="",n=K.apply(w,arguments);for(var t in n){var r=n[t];e+=" "+t+(t!==r?'="'+r+'"':" ")}return e}function le(n,t,r){return function(e){return r(n,t,e)}}function ie(a,l){return function(e,n){var t=this,r=o(arguments);return l(a,{data:t&&t._njData?T(r,t._njData):r,parent:t?t._njParent:null,index:t?t._njIndex:null,item:t?t._njItem:null,level:t?t._njLevel:null,getData:U,d:U,icp:function(e,n){var t;return e&&e.components&&(O(t=e.components)||(t=[t])),n&&n._njIcp&&(t=t?T(t,n._njIcp):n._njIcp),t}(e&&e._njParam?n:e,t)})}}function oe(e){if(null==e.level)return"";for(var n="",t=0;t<e.level;t++)n+="  ";return n}function se(e){return null==e.index?"":0==e.index?"":"\n"}function ue(e){return I.createElement.apply(null,e)}function ce(e){return e._njCtx?e.val.bind(e._njCtx):e}var pe={if:function(e,n){var t;if(e&&e._njOpts&&(e=(n=e).props.condition),"false"===e&&(e=!1),e)t=n.children();else{var r=n.props;if(r){var a=r.else;if(r.elseifs){var l=r.elseifs.length;F(r.elseifs,function(e,n){if(e.value)return t=e.fn(),!1;n===l-1&&a&&(t=a())},!0)}else a&&(t=a())}}return n.useString&&null==t?"":t},else:function(e){return e.tagProps.else=e.children},elseif:function(e,n){e&&e._njOpts&&(e=(n=e).props.condition||n.props.value);var t=n.tagProps;t.elseifs||(t.elseifs=[]),t.elseifs.push({value:e,fn:n.children})},switch:function(t,e){t&&t._njOpts&&(t=(e=t).props.value);var r,a=e.props,l=a.elseifs.length;return F(a.elseifs,function(e,n){if(t===e.value)return r=e.fn(),!1;n===l-1&&a.else&&(r=a.else())},!0),r},each:function(e,o){e&&e._njOpts&&(e=(o=e).props.of);var s,u=o.useString,n=o.props;if(e){s=u?"":[];var c=p(e);F(e,function(e,n,t,r){var a,l={data:[e],index:c?n:t,item:e,fallback:!0};a={"@first":0===l.index,"@last":l.index===(c?t:r)-1},c||(a||(a={}),a["@key"]=n),a&&l.data.push(a);var i=o.children(l);u?s+=i:s.push(i)},c),u||s.length||(s=null),s&&s.length||!n||!n.else||(s=n.else())}else n&&n.else&&(s=n.else()),u&&null==s&&(s="");return s},prop:function(e,n){var t,r=n.value();t=void 0!==r?r:!n.useString||e,n.tagProps[n.outputH?re(e):e]=t},spread:function(e,t){var r=t.tagProps;F(e,function(e,n){void 0===r[n]&&(t.tagProps[n]=e)},!1)},show:function(e){if(!e.value()){var n=e.tagProps,t=e.useString;n.style||(n.style=t?"":{}),t?n.style+=(n.style?";":"")+"display:none":O(n.style)?n.style.push({display:"none"}):n.style.display="none"}},obj:function(e){return e.props},block:function(e){return e.children()},with:function(e,n){if(e&&e._njOpts)return(n=e).children({data:[n.props]});var t=n.props;return n.children({data:[t&&t.as?function(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}({},t.as,e):e]})},arg:function(e){var n=e.tagProps;n.args||(n.args=[]),n.args.push(e.value())},css:function(e){return e.props.style}};function fe(e,n){var t={onlyGlobal:!1,useString:!1,newContext:!0,isSubTag:!1,isDirective:!1,addSet:!1,useExpressionInJsx:"onlyTemplateLiteral",hasName:!0,noTagName:!1,hasTagProps:!0,hasTmplCtx:!0,hasOutputH:!1};return e&&(t=K(t,e)),n&&(t=K(t,n)),t}var me={onlyGlobal:!0,newContext:!1,hasName:!1,hasTagProps:!1,hasTmplCtx:!1},ve={if:fe(me),else:fe(me,{isSubTag:!0,hasTagProps:!0}),switch:fe(me,{needPrefix:"onlyUpperCase"}),each:fe(me,{newContext:{item:"item",index:"index",datas:{first:["@first","first"],last:["@last","last"]}}}),prop:fe(me,{isDirective:!0,needPrefix:!0,hasTagProps:!0}),obj:fe(me,{needPrefix:!0}),with:fe(me,{newContext:{getDatasFromProp:!0}}),style:{useExpressionInJsx:!1,needPrefix:!0}};function ge(e,n,t,a){var r=e;d(e)||((r={})[e]={extension:n,options:t}),F(r,function(e,n){if(e){var t=e.extension,r=e.options;t?pe[n]=t:a||(pe[n]=e),a?(ve[n]||(ve[n]=fe()),K(ve[n],r)):ve[n]=fe(r)}},!1)}ve.elseif=fe(ve.else),ve.spread=fe(ve.prop),ve.block=fe(ve.obj),ve.arg=fe(ve.prop),ve.show=fe(ve.prop,{noTagName:!0,hasOutputH:!0}),ve.css=fe(ve.obj),pe.for=pe.each,ve.for=fe(ve.each),pe.case=pe.elseif,ve.case=ve.elseif,pe.empty=pe.default=pe.else,ve.empty=ve.default=ve.else,pe.strProp=pe.prop,ve.strProp=fe(ve.prop,{useString:!0}),pe.strArg=pe.arg,ve.strArg=fe(ve.strProp),pe.pre=pe.block,ve.pre=ve.block,K(I,{extensions:pe,extensionConfig:ve,registerExtension:ge});var de=/(\d{3})(?=\d)/g,he={".":function(e,n,t){return null==e?e:e._njCtx?{_njCtx:e.val,val:e.val[n],prop:n}:t?{obj:e,prop:n}:e[n]},_:function(e,n){return e&&null!=e.obj[e.prop]?e.obj[e.prop].apply(e.obj,n):null},"#":function(e,n,t){return null==e?e:V({val:e[n],_njCtx:e},t.context,t.level)},"**":function(e,n){var t=Math.pow(e,n);return isNaN(t)?0:t},"%%":function(e,n){var t=Math.floor(e/n);return isNaN(t)?0:t},"?:":function(e,n,t){return e?n:t},"!":function(e){return!e},int:function(e){var n=parseInt(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:10);return isNaN(n)?0:n},float:function(e,n){var t=parseFloat(e);return isNaN(t)?0:null!=n?t.toFixed(n):t},bool:function(e){return"false"!==e&&!!e},reg:function(e,n){return RegExp(e,n)},css:function(e){return Z(e)},"..":_e(1),rLt:_e(0),"<=>":function(e,n){return n<e?1:e==n?0:-1},capitalize:function(e){return P(e)},lowerFirst:function(e){return C(e)},camelCase:function(e){return j(e)},isObject:function(e){return d(e)},isNumber:function(e){return s(e)},isString:function(e){return N(e)},isArrayLike:function(e){return p(e)},currency:function(e,n,t){if(0>e-parseFloat(e))return be.currency.placeholder;t=null!=(t=null!=n&&"string"==typeof n?n:t)&&"string"==typeof t?t:be.currency.symbol,n=null!=n&&"number"==typeof n?n:2;var r=Math.abs(e=parseFloat(e)).toFixed(n),a=n?r.slice(0,-1-n):r,l=a.length%3,i=0<l?a.slice(0,l)+(3<a.length?",":""):"",o=n?r.slice(-1-n):"";return(e<0?"-":"")+t+i+a.slice(l).replace(de,"$1,")+o}};function _e(t){return function(n,e){return Object.keys(Array.apply(null,{length:e-n+t})).map(function(e){return+e+n})}}function ye(e,n){var t={onlyGlobal:!1,hasOptions:!1,isOperator:!1,hasLevel:!1,hasTmplCtx:!0,alias:null};return e&&(t=K(t,e)),n&&(t=K(t,n)),t}var xe={onlyGlobal:!0,hasOptions:!1},be={".":ye(xe),_:ye({onlyGlobal:!0}),"#":ye({onlyGlobal:!0,hasOptions:!0,hasLevel:!0}),"**":ye(xe),"%%":ye(xe),"?:":ye(xe),"!":ye(xe),int:ye(xe),float:ye(xe),bool:ye(xe),reg:ye(xe),css:ye(xe),"..":ye(xe),rLt:ye(xe),"<=>":ye(xe),capitalize:ye(xe),lowerFirst:ye(xe),camelCase:ye(xe),isObject:ye(xe),isNumber:ye(xe),isString:ye(xe),isArrayLike:ye(xe),currency:ye(xe,{symbol:"$",placeholder:""})};function je(e,n,t,o){var r=e;d(e)||((r={})[e]={filter:n,options:t}),F(r,function(e,n){if(e){var t=e.filter,r=e.options;if(r){if(r.isOperator){var a=I.createRegexOperators;a&&a(n)}var l=r.alias;if(l){var i=I.createFilterAlias;i&&(i(n,l),n=l)}}t?he[n]=t:o||(he[n]=e),o?(be[n]||(be[n]=ye()),K(be[n],r)):be[n]=ye(r)}},!1)}K(I,{filters:he,filterConfig:be,registerFilter:je});var Re=/('[^']*')|("[^"]*")|(-?[0-9][0-9]*(\.\d+)?)|true|false|null|undefined|Object|Array|Math|Date|JSON|(([a-zA-Z_$#@])([a-zA-Z_$\d]*))/,Pe=/_njQs(\d+)_/g,Ce=/_njSet_/;function we(e,i,o,s){var n=H();if(0<=e.indexOf("|")){var t,u=[];e=(t=e.split("|"))[0].trim(),F(t=t.slice(1),function(e){if(""!==(e=e.trim())){var n=function(e){return e.split("'bracket_")}(e),t=H(),r=n[0].trim();if(r){var a=n[1];if(null!=a){var l=[];F(i[a].split(","),function(e){""!==e&&(l[l.length]=we(e.trim(),i,o,s))},!0),t.params=l}t.name=r,u.push(t)}}},!0),n.filters=u}if(0==(e=function(e,t){return e.replace(Pe,function(e,n){return t[n]})}(e,o)).indexOf("../")){var r=0;e=e.replace(/\.\.\//g,function(){return r++,""}),n.parentNum=r}if(""!==e){var a=Re.exec(e),l="#"===a[6];n.name=l?a[7]:a[0],a[5]||(n.isBasicType=!0),l&&(n.isAccessor=!0),n.name=n.name.replace(Ce,function(){return n.hasSet=!0,""})}else n.isEmpty=!0;return n}var Se,Te=/_nj(L|G)t_/g,Oe={_njLt_:"<",_njGt_:">"},ke=/"[^"]*"|'[^']*'/g,Ne=/\*|\||\/|\.|\?|\+/g,Ee={"||":"or","..<":"rLt"};function He(e,n){e&&n&&(Ee[e]=n),Se=RegExp("[\\s]+(("+Object.keys(Ee).map(function(e){return e.replace(Ne,function(e){return"\\"+e})}).join("|")+")[\\s]*)","g")}He();var Ae,$e={")":")_(","]":"]_("},Le=/(\)|\]|\.([^\s'"._#()|]+))[\s]*\(/g,Fe=/([(,|])[\s]+/g,De=/\.([a-zA-Z_$#@][a-zA-Z_$\d]*)/g,Ie=/([^\s([,])(\[)/g,Ke={"[":"list(","]":")","{":"obj(","}":")"},ze=/\[|\]|\{|\}/g,Me=/^[\s]*set[\s]+|([(,])[\s]*set[\s]+/g,Ge=/^[\s]*([(]+)|([(,])[\s]*([(]+)/g,We=["../"],qe=/-[0-9]/,Be=["","(","[",","],Je=["+=","+","-[0-9]","-","**","*","%%","%","===","!==","==","!=","<=>","<=",">=","=","..<","<",">","&&","||","?:","?",":","../","..","/"];function Ze(t){if(t){var r=0;Je.forEach(function(e,n){e.indexOf(t)<0||(r=n+1)}),Je.splice(r,0,t)}Ae=RegExp(Je.map(function(e){return e.replace(Ne,function(e){return"\\"+e})}).join("|"),"g")}function Ue(e,n,t,r){var a=e[2].trim(),l=[e[0],e[1],null,!0];return 0<t&&(l[3]=!1),r&&(a="set "+a),a=a.replace(Te,function(e){return Oe[e]}).replace(ke,function(e){return n.push(e),"_njQs"+(n.length-1)+"_"}).replace(Ae,function(e,n){return qe.test(e)?0<n&&Be.indexOf(a[n-1].trim())<0?e.split("-").join(" - "):e:We.indexOf(e)<0?" ".concat(e," "):e}).replace(Se,function(e,n,t){return" "+Ee[t]+" "}).replace(De,function(e,n){var t="#"===n[0];t&&(n=n.substr(1));var r=n.length-1,a=0<r&&"_"===n[r];return(t?"#":".")+"('"+(a?n.substr(0,r):n)+"')"+(a?"_":"")}).replace(Ie,function(e,n,t){return n+".("}).replace(ze,function(e){return Ke[e]}).replace(Me,function(e,n){return(n||"")+"_njSet_"}).replace(Ge,function(e,n,t,r){return(t||"")+(t?r:n).replace(/[(]/g,"bracket(")}).replace(Fe,function(e,n){return n}).replace(Le,function(e,n,t){return t?".('"+t+"')_(":$e[n]}),l[2]=a.trim(),l}Ze();var Qe=/\(([^()]*)\)/g,Ve=/([!]+)((-?[0-9][0-9]*(\.\d+)?|[^\s,|'=]+)('bracket_\d+)?([._#]'bracket_\d+)*)/g,Xe=/[\s]+([^\s(),|"']+)[\s]+((-?[0-9][0-9]*(\.\d+)?|[^\s,|']+)('bracket_\d+)?([._#]'bracket_\d+)*)/g,Ye=/[(,]/g,en=/(\|)?(((\.+|_|#+)'bracket_)|[\s]+([^\s._#|]+[\s]*'bracket_))/g;function nn(e,n){return tn((e=e.replace(Ve,function(){var e=arguments;return n.push(tn(e[2])),e[1]+"'bracket_"+(n.length-1)})).replace(Xe,function(){var e=arguments;return n.push(tn(e[2]))," "+e[1]+"'bracket_"+(n.length-1)}))}function tn(e){return(" "+e).replace(Ye,function(e){return e+" "}).replace(en,function(e,n,t,r,a,l){return n?e:" | "+(r||l)}).trim()}function rn(a,l,e,n,t){var r=H(),i=N(a),o=i?e?["",""]:a.split(l.replaceSplit):[a],s=null,u=!1;if(i&&(o=o.map(function(e){return e.replace(/\n/g,"_njNl_").replace(/\r/g,"")})),1<o.length){var c=[],p=function(e,n,t,r,a){var l,i,o=n.replaceParam,s=0;if(r)i=[Ue(l=[e,n.startRule,e],t,s,a)];else for(;l=o.exec(e);){i||(i=[]);var u=l[2];i.push(Ue([l[0],u||l[5],u?l[3]:l[6]],t,s,a)),s++}return i}(a,l,c,e,t);s=[],F(p,function(e){var n=H(),t=[];u=!!e[3]&&e[0]===a;var r=function e(n,t){var r=n.replace(Qe,function(e,n){return t.push(nn(n,t)),"'bracket_"+(t.length-1)});return r!==n?e(r,t):nn(r,t)}(e[2],t);n.prop=we(r,t,c,a),n.escape=e[1]!==l.firstChar+l.startRule,s.push(n)},!0)}return r.props=s,r.strs=o,r.isAll=u,r.onlyKey=n,r}K(I,{createFilterAlias:He,createRegexOperators:Ze});var an=/^<[^>]+\/>$/i;var ln={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};function on(e,n){for(var t,r,a=n.openTagParams;t=a.exec(e);){var l=t[1];if("/"!==l){r||(r=[]);var i=t[8],o=null!=t[4]?t[4]:t[6],s=!1;null!=i?i=R(i):(i=l,o||(s=!0)),t[9]||t[10]||(/\/>$/.test(i)?i=i.substr(0,i.length-2):(/>$/.test(i)||/\/$/.test(i))&&(i=i.substr(0,i.length-1)));var u=void 0;":"===l[0]&&(l=l.substr(1),u=!0),r.push({key:l,value:i,onlyBrace:o,hasColon:u,onlyKey:s})}}return r}function sn(e,n,t){var r,a=n.extension.exec(e);if(a&&(r=[a[1]],!t)){var l=on(e,n);l&&r.push(l)}return r}function un(e,n){return e.match(n.exAll)}var cn=/^[a-z]/;function pn(e){return"params"===e||"props"===e}function fn(e){return ve[e]||{}}function mn(e,n){return 0==e.indexOf(n.propRule)}function vn(e,n){return 0==e.indexOf(n.strPropRule+n.propRule)}var gn=["style","script","textarea","pre","xmp","template","noscript",I.textTag];function dn(e,n,t,r,a){var l={type:"nj_plaintext"};l.content=[rn(e,a,null,null,null!=n.ex?fn(n.ex).addSet:null)],l.allowNewline=r,n[t].push(l)}var hn=/_njBp(\d+)_/g;function _n(e,t,a,l,r,n){var i="content";if(O(e)){var o={},s=e[0];if(N(s)){var u,c,p,f,m,v,g,d=e.length,h=e[d-1],_=!1,y=!1;if(u=sn(s,a)){var x=u[0];if(c=u[1],!(f=pn(x))){var b=fn(x);v=b.isSubTag,g=(m=b.isDirective)?!l:v,b.useString&&(o.useString=b.useString)}o.type="nj_ex",o.ex=x,null==c||f||(o.args||(o.args=[]),F(c,function(e){var n=e.key,t=e.value;if("useString"!==n){if("_njIsDirective"===n)return o.isDirective=m=!0,void(g=!l);var r=rn(t,a,e.hasColon,e.onlyKey);e.onlyBrace?o.args.push(r):(o.params||(o.params=H()),o.params[n]=r)}else o.useString=!("false"===t)},!0)),_=!0}else{var j=function(e,n){return n.xmlOpenTag.exec(e)}(s,a);j&&(/\/$/.test(p=j[1])&&(p=p.substr(0,p.length-1)),!function(e){return an.test(e)}(s)?y=function(e,n){return N(e)&&e.toLowerCase()==="</"+n+">"}(h,p):o.selfCloseTag=!0,_=!0)}if(_){var R=!0;if(r&&(o.allowNewline=!0),u)(f||g)&&(R=!1),null==r&&"pre"===o.ex&&(r=!0,o.allowNewline="nlElem");else{var P=function(e,n){return n.braceParam.exec(e)}(o.type=p,a);P&&(o.typeRefer=rn(P[0],a));var C=on(s,a);C&&(o.params||(o.params=H()),F(C,function(e){o.params[e.onlyBrace?e.onlyBrace.replace(/\.\.\//g,""):e.key]=rn(e.value,a,e.hasColon,e.onlyKey)},!0)),o.selfCloseTag||(o.selfCloseTag=function(e){return ln[e.toLowerCase()]}(p)),null==r&&-1<gn.indexOf(p.toLowerCase())&&(r=!0,o.allowNewline="nlElem")}R&&t[i].push(o);var w=e.slice(1,d-(y?1:0));w&&w.length&&yn(w,o,a,f||l&&!m,r),(f||g)&&function(e,n,t,r){var a,l="paramsEx";n[l]?T(n[l].content,t||r?[e]:e.content):((a=t||r?{type:"nj_ex",ex:"props",content:[e]}:e).parentType=n.type,n[l]=a)}(o,t,m,v)}else yn(e,t,a,l,r)}else O(s)&&yn(e,t,a,l,r)}else if(N(e))if(r)dn(n&&"nlElem"===t.allowNewline?E(e):e,t,i,r,a);else{var S=[];e.replace(a.braceParamG,function(e){return S.push(e),"_njBp"+(S.length-1)+"_"}).split(/\n/g).forEach(function(e,n){""!==(e=e.trim())&&dn(e.replace(hn,function(e,n){return S[n]}),t,i,r,a)})}else dn(e,t,i,r,a)}function yn(e,r,a,l,i){r.content||(r.content=[]),F(e,function(e,n,t){_n(e,r,a,l,i,n==t-1)},!0)}var xn="g",bn="c",jn="p";function Rn(e,n,t,r,a,l,i){var o="",s=null!=i?i:t.useString,u=0===r,c=1===e.length?"1":"2",p={_type:0,_params:0,_compParam:0,_dataRefer:0,_ex:0,_value:0,_filter:0,_fnH:0,_tmp:0,newContext:a};s?p._children=0:p._compParam=0,!u&&a&&(o+="".concat(bn," = ").concat(xn,".n(").concat(bn,", ").concat(jn,");\n")),"2"==c&&(o+=s?"var ret = '';\n":"var ret = [];\n"),o+=$n(e,n,t,p,c,l,i),"2"==c&&(o+="return ret;");try{t[u?"main":"fn"+r]=Function(xn,bn,jn,o)}catch(e){h("Failed to generate template function:\n\n"+e+" in\n\n"+o+"\n")}return r}function Pn(e,n,t,r,a,l,i,o){var s=", useString: "+(null==n?"".concat(xn,".us"):n?"true":"false"),u=!e,c=r._no;if(t){var p=!e||e.newContext,f=t.isDirective||e&&e.isDirective;(u||e.hasName)&&(s+=", name: '"+t.ex+"'"),i&&f&&(u||!e.noTagName)&&(s+=", tagName: "+i,s+=", setTagName: function(c) { "+i+" = c }"),o&&(u||e.hasTagProps)&&(s+=", tagProps: "+o),null!=l&&(s+=", props: "+l),s+=", "+(f?"value":"children")+": "+(t.content?"".concat(xn,".r(").concat(xn,", ").concat(bn,", ").concat(xn,".fn")+Rn(t.content,t,r,++r._no,p,a,n)+")":"".concat(xn,".np"))}return"{ _njOpts: "+(c+1)+(u||e.hasTmplCtx?", global: ".concat(xn,", context: ").concat(bn):"")+(u||e.hasOutputH?", outputH: "+!r.useString:"")+s+(null!=a&&(u||e.hasLevel)?", level: "+a:"")+" }"}var Cn="nj_custom",wn=["+","-","*","/","%","===","!==","==","!=","<=",">=","=","+=","<",">","&&","||","?",":"],Sn=["=","+="],Tn={or:"||"};function On(e,n,t,r){var a,l=!1,i=e.isBasicType,o=e.isAccessor,s=e.hasSet;if(i)a=e.name;else{var u=e.name,c=e.parentNum,p="",f=!1;switch(u){case"@index":p="index",l=!0;break;case"@item":p="item",l=!0;break;case"this":p="data",l=function(e){return"".concat(e,"[").concat(e,".length - 1]")};break;case"@data":p="data",l=!0;break;case"@g":p="".concat(xn,".g"),l=Cn;break;case"@root":p="(".concat(bn,".root || ").concat(bn,")"),l=Cn;break;case"@context":p=bn,l=Cn;break;case"@lt":p="'<'",l=Cn;break;case"@gt":p="'>'",l=Cn;break;case"@lb":p="'{'",l=Cn;break;case"@rb":p="'}'",l=Cn;break;case"@q":p="'\"'",l=Cn;break;case"@sq":p='"\'"',l=Cn}if(c){p||(p="data");for(var m=p==bn,v=0;v<c;v++)p=m?p+".parent":"parent."+p;l||(f=!0)}if(l||f){var g=l===Cn?p:"".concat(bn,".")+p;d(l)&&(g=l(g)),a=l?g:(o?"".concat(xn,".c("):"")+"".concat(bn,".d('")+u+"', "+g+(o||s?", true":"")+")"+(o?", ".concat(bn,", ")+r+")":"")}else a=(o?"".concat(xn,".c("):"")+"".concat(bn,".d('")+u+"'"+(o||s?", 0, true":"")+")"+(o?", ".concat(bn,", ")+r+")":"")}return a&&(a=En(a)),function(e,n,t,r){return n.useString?t&&r!==Cn?"".concat(xn,".es(")+e+")":e:B(e)}(a,t,!i&&!o&&n,l)}function kn(e){var n=Tn[e];return null!=n?n:e}function Nn(e){return En(e).replace(/_njNl_/g,"\\n").replace(/'/g,"\\'")}function En(e){return e.replace(/\\/g,"\\\\")}function Hn(a,l,i,o){var s=a.strs[0],u="";return N(s)&&(u=a.isAll||""===s?"":"'"+Nn(s)+"'",F(a.props,function(e,n){var t=function m(v,e,g,d,h,_){var y=v.filters&&wn.indexOf(kn(v.filters[0].name))<0?"":e?v.name:On(v,g,d,_),x="";return v.filters&&v.filters.forEach(function(t,e){var n=v.filters[e+1]&&wn.indexOf(kn(v.filters[e+1].name))<0,r=kn(t.name);if(wn.indexOf(r)<0)if("_"===r){var a="".concat(xn,".f['").concat(r,"'](").concat(x);t.params.length&&(a+=", [",t.params.forEach(function(e,n){a+=m(e,null,g,d,h,_),n<t.params.length-1&&(a+=", ")}),a+="]"),a+=")",x=n?a:(y+=a,"")}else{var l,i,o,s,u=v.isEmpty&&0==e;if("bracket"===r)l="(",i=")";else if("list"===r)l="[",i="]";else if("obj"===r)l="{ ",i=" }",o=!0;else{if("require"==r)l="require";else{var c="".concat(xn,".f['").concat(r,"']");"".concat(xn,".wn('").concat(r,"', 'f')"),l=(s=be[r])&&s.onlyGlobal?c:"".concat(xn,".cf(").concat(bn,".d('").concat(r,"', 0, true) || ").concat(c).concat("",")")}l+="(",i=")"}var p=l;if(u)t.params.forEach(function(e,n){p+=m(e,o,g,d,h,_),n<t.params.length-1&&(p+=", ")});else{p+=0==e?On(v,g,d,_):""!==x?x:v.filters[e-1].params[0].filters?m(v.filters[e-1].params[0],null,g,d,h,_):On(v.filters[e-1].params[0],g,d,_),t.params&&t.params.forEach(function(e,n){p+=", ",p+=e.filters?m(e,null,g,d,h,_):On(e,g,d,_)});var f=v.filters[e+1];"."===r&&f&&"_"===kn(f.name)&&(p+=", true"),s&&s.hasOptions&&(p+=", ".concat(Pn(s,h,null,d,_)))}p+=i,x=n?p:(y+=p,"")}else Sn.indexOf(r)<0?y+=" ".concat(r," "):y+="._njCtx.".concat(0==e?v.name:R(v.filters[e-1].params[0].name)," ").concat(r," "),v.filters[e+1]&&wn.indexOf(kn(v.filters[e+1].name))<0||(t.params[0].filters?(y+="(",y+=m(t.params[0],null,g,d,h,_),y+=")"):y+=On(t.params[0],g,d,_))}),y}(e.prop,null,e.escape,l,i,o);if(a.isAll)t="("+t+")";else{var r=a.strs[n+1];t=(""===s&&0==n?"":" + ")+"("+t+")"+(""!==r?" + '"+Nn(r)+"'":"")}if(u+=t,a.isAll)return!1},!0)),u}function An(e,l,n,i,o,t){var r,a,s=e.params,u=e.paramsEx,c=l.useString,p=u,f="";if(s||p){if(r=n._params++,f="var "+(a="_params"+r)+" = ",s){var m=Object.keys(s),v=m.length;f+="{\n",F(m,function(e,n){var t=Hn(s[e],l,i,o);c||"style"!==e||(t="".concat(xn,".sp(")+t+")");var r=Nn(e),a=s[e].onlyKey;c||(r=re(r)),f+="  '"+r+"': "+(a?i?"'"+r+"'":"true":t)+(n<v-1?",\n":"")},!1),f+="\n};\n"}p?(s||(f+="{};\n"),u&&(f+=$n(u.content,u,l,n,{_paramsE:!0},null,i,t,a)),i&&(f+="\n"+a+" = ".concat(xn,".ans(")+a+");\n")):i&&(f+="\n"+a+" = ".concat(xn,".ans({}, ")+a+");\n")}return[f,r]}function $n(e,t,r,a,l,i,o,s,u){var c="";return e&&F(e,function(e){var n=e.useString;c+=function(e,n,r,t,a,l,i,o,s,u){var c="",p=r.useString;if("nj_plaintext"===e.type){var f=Hn(e.content[0],r,i,l);if(""===f)return c;var m=Ln(e,n,1,a,{text:f},r,l,i,e.allowNewline,o);c+=p?m:B(m)}else if("nj_ex"===e.type){var v,g=t._ex++,d=t._dataRefer++,h="",_=ve[e.ex],y="_ex"+g,x="".concat(xn,".x['")+e.ex+"']";_&&_.onlyGlobal?c+="\nvar "+y+" = "+x+";\n":(c+="\nvar "+y+";\n",c+="var "+(v="_fnH"+t._fnH++)+" = ".concat(bn,".d('")+e.ex+"', 0, true);\n",c+="if ("+v+") {\n",c+="  "+y+" = "+v+".val;\n",c+="} else {\n",c+="  "+y+" = "+x+";\n",c+="}\n"),h+="var _dataRefer"+d+" = [\n",e.args&&F(e.args,function(e,n){var t=Hn(e,r,i,l);h+="  "+t+","},!0);var b=An(e,r,t,!1,l,s),j=b[0],R=b[1];h+=Pn(_,i,e,r,l,""!==j?"_params"+R:null,s,u),h+="\n];\n",""!==j&&(h+="".concat(xn,".aa(_params")+R+", _dataRefer"+d+");\n"),c+=j+h,c+=Ln(e,n,2,a,{_ex:g,_dataRefer:d,fnH:v},r,l,i,e.allowNewline,o)}else{var P,C,w,S=t._type++,T="_type"+S;if(P=e.typeRefer?(C=Hn(e.typeRefer,r,l),e.typeRefer.props[0].prop.name):e.type,p)w=C?"".concat(xn,".en(")+C+", '"+P+"')":"'"+P+"'";else{var O=P.toLowerCase(),k="";if(!C&&-1<O.indexOf(".")){var N=P.split(".");O=O.split(".")[0],P=N[0],k=", '"+N[1]+"'"}w=C?"".concat(xn,".er(")+C+", '"+O+"', ".concat(xn,", '")+P+"', ".concat(bn,")"):"".concat(xn,".e('")+O+"', ".concat(xn,", '")+P+"', ".concat(bn)+k+")"}c+="\nvar _type"+S+" = "+w+";\n";var E,H,A=An(e,r,t,p,l,T),$=A[0],L=A[1];c+=$,c+=p?"var _children"+(H=t._children++)+" = '';\n":"var _compParam"+(E=t._compParam++)+" = [_type"+S+", "+(""!==$?"_params"+L:"null")+"];\n",c+=$n(e.content,e,r,t,p?{_children:"_children"+H}:{_compParam:"_compParam"+E},p&&e.type===I.noWsTag?null:null!=l?l+1:l,i,T),c+=Ln(e,n,3,a,p?{_type:S,_typeS:P,_typeR:C,_params:""!==$?L:null,_children:H,_selfClose:e.selfCloseTag}:{_compParam:E},r,l,i,e.allowNewline,o)}return c}(e,t,r,a,l,i,null!=n?n:o,r._firstNode&&0==i,s,u),r._firstNode&&(r._firstNode=!1)},!0),c}function Ln(e,n,t,r,a,l,i,o,s,u){var c,p=l.useString,f=null!=o?o:p,m=null==i;switch(t){case 1:c=(!p||s||m?"":u?"nj_root"!==n.type?"".concat(xn,".fl(").concat(bn,") + "):"":"'\\n' + ")+Fn(i,l,s)+Dn(p,u||m)+a.text;break;case 2:c="_ex"+a._ex+".apply("+(a.fnH?a.fnH+" ? "+a.fnH+"._njCtx : ".concat(bn):bn)+", _dataRefer"+a._dataRefer+")";break;case 3:if(p)if(c=s&&"nlElem"!==s||m?"":u?"nj_root"!==n.type?"".concat(xn,".fl(").concat(bn,") + "):"":"'\\n' + ",e.type!==I.textTag&&e.type!==I.noWsTag){var v=Fn(i,l,s),g=e.content,d=a._typeR,h=null!=a._params;c+=v+Dn(p,u||m)+"'<"+(d?"' + _type"+a._type:a._typeS)+(h?(d?"":"'")+" + _params"+a._params:"")+(d||h?" + '":""),a._selfClose?c+=" />'":(c+=">'",c+=" + _children"+a._children+" + ",c+=(!g||s||m?"":"'\\n' + ")+(g?v:"")+Dn(p,m)+"'</"+(d?"' + _type"+a._type+" + '":a._typeS)+">'")}else c+="_children"+a._children;else c="".concat(xn,".H(_compParam")+a._compParam+")"}return"1"===r?"\nreturn "+c+";":"2"===r?f?"\nret += "+c+";\n":"\nret.push("+c+");\n":r._paramsE?"\n"+c+";\n":p?"\n"+r._children+" += "+c+";\n":"\n"+r._compParam+".push("+c+");\n"}function Fn(e,n,t){var r="";if(t&&"nlElem"!==t)return r;if(n.useString&&null!=e&&0<e){r+="'";for(var a=0;a<e;a++)r+="  ";r+="' + "}return r}function Dn(e,n){return e&&!n?"".concat(xn,".ls(").concat(bn,") + "):""}var In=function(e,n,t){var r={useString:t,_no:0,_firstNode:!0};return Rn(e,n,r,r._no,null,0),r},Kn=I.preAsts,zn="_njParam",Mn=["style","script","textarea","xmp",I.textTag],Gn=ln;function Wn(e){var n,t=""+e,r=Kn[t],i=this.outputH,o=this.tmplRule,a=this.onlyParse,l=this.fileName,s=this.isExpression,u=this.isCss;if(!r){var c=N(e)?[e]:e,p=c.length,f="",m=!1;F(c,function(e,n){var t="";if(0==n&&(s?e=(i?o.firstChar:"")+o.startRule+" "+e:u&&(e="<"+o.extensionRule+'css style="'+e)),n<p-1){var r=e.length-1,a="#"===e[r],l="..."===e.substr(r-2);m&&(m=!o["incompleteEnd"+("isR"===m?"R":"")].test(e)),m||(m=o.incompleteStartR.test(e)?"isR":o.incompleteStart.test(e)),a?e=e.substr(0,r):l&&(e=e.substr(0,r-2)),t=(a?"#":l?"...":"")+zn+n,m||(t=o.startRule+t+o.endRule)}n==p-1&&(s?e+=" "+o.endRule+(i?o.lastChar:""):u&&(e+='" />')),f+=e+t},!0);var v=I.includeParser;v&&(f=v(f,l,o)),f=function(e,n){var t=n.commentRule;return e.replace(RegExp("\x3c!--"+t+"[\\s\\S]*?"+t+"--\x3e","g"),"").replace(RegExp("([\\s]+:[^\\s=>]+=(('[^']+')|(\"[^\"]+\")))|("+n.braceParamStr+")","g"),function(e,n,t,r,a,l){return(n||l).replace(Zn,function(e){return Jn[e]})})}(f,o),i||(I.textMode&&(f="<"+I.textTag+">"+f+"</"+I.textTag+">"),I.noWsMode&&(f="<"+I.noWsTag+">"+f+"</"+I.noWsTag+">")),r=function(e,n,t){var r,a,l=[],i={elem:l,elemName:"root",parent:null},o=n.checkElem,s=null;for(;r=o.exec(e);){var u=r[1],c=r[2],p=r[3],f=r[4],m=r[5];if(s){var v=s,g=k(v,4),d=g[0],h=g[1],_=g[2],y=g[3],x=!!c&&un(p,n);x&&!x[1]&&(mn(p,n)||vn(p,n)||pn(x[3])||fn(x[3]).isDirective)?(i=qn(h,i),Qn(d,h,_,i.elem,null,n,t)):Xn(d,h,_,i.elem,n,t),Bn(y,i),s=null}if(u&&""!==u&&Yn(u,i.elem),c)if("<"!==c)if(0==c.indexOf("<!"))Yn(c,i.elem);else{var b=un(p,n);if("/"===p[0])if(p.substr(1).toLowerCase()===a&&(a=null),b||!a){var j=i.elemName;(j.indexOf(zn)<0?p==="/"+j:-1<p.indexOf(zn)||"//"===p)&&(i=i.parent)}else Yn(c,i.elem);else if("/"===c[c.length-2])b||!a?Xn(c,p,f,i.elem,n,t):Yn(c,i.elem);else if(b||!a)if(!a&&Gn[p.toLowerCase()])s=[c,p,f,m];else{var R=p.toLowerCase();-1<Mn.indexOf(R)&&(a=R),i=qn(p,i),Qn(c,p,f,i.elem,null,n,t)}else Yn(c,i.elem)}else null==m&&(m=""),m=c+m;!s&&Bn(m,i)}if(s){var P=s,C=k(P,4),w=C[0],S=C[1],T=C[2],O=C[3];Xn(w,S,T,i.elem,n,t),Bn(O,i)}return l}(f,o,i),x(r,"_njParamCount",{value:p-1}),Kn[t]=r}if(a)n={_njTmpl:r,_njTmplKey:t};else{var g,d=arguments,h=r._njParamCount;if(0<h){x(g={},"_njParam",{value:!0});for(var _=0;_<h;_++)g[zn+_]=d[_+1]}b(n=g?function(){return y.apply(this,T([g],arguments))}:function(){return y.apply(this,arguments)},{_njTmpl:{value:r},_njTmplKey:{value:t}});var y=I["compile"+(i?"H":"")](n,t,null,null,o)}return n}function qn(e,n){var t={elem:[],elemName:e,parent:n};return n.elem.push(t.elem),t}function Bn(e,n){e&&""!==e&&Yn(e,n.elem)}var Jn={"<":"_njLt_",">":"_njGt_"},Zn=/>|</g;function Un(e,n,t,r){return r.extensionRule+(e?"strProp":"prop")+" "+r.startRule+"'"+n.substr((e?r.strPropRule.length:0)+r.propRule.length)+"'"+r.endRule+t}function Qn(e,n,t,r,a,l,i){var o,s,u=function(e,n){var t,r=C(e),a=ve[r];return a&&(!a.needPrefix||"onlyUpperCase"==a.needPrefix&&cn.test(e))&&(t=n.extensionRule+r),t}(n,l);if(u&&(n=u),sn(n,l,!0))o=e.substring(1,e.length-1),u&&(o=l.extensionRule+C(o));else if(vn(n,l))o=Un(!0,n,t,l);else if(mn(n,l))o=Un(!1,n,t,l);else{var c=function(e,n,d){var h,_=n.extensionRule,y=n.startRule,x=n.endRule,b=n.firstChar,j=n.lastChar,t=n.directives;return{elem:e=(e=e.replace(n.spreadProp,function(e,n,t,r,a){return t&&(a=t),h||(h=[_+"props"]),h.push([_+"spread "+(t?b:"")+y+a.replace(/\.\.\./,"")+x+(t?j:"")+"/"])," "})).replace(t,function(e,n,t,r,a,l,i,o,s,u,c,p,f){if(null==u)return e;var m,v;h||(h=[_+"props"]),c=c.replace(Vn,function(e,n,t,r,a){return a&&(m=a.substr(1).split("-").map(function(e){var t,r="",a=e.split(/[$.]/);return a.forEach(function(e,n){0==n?t="name:'"+e+"'"+(n<a.length-1?",":""):r+="'"+e+"'"+(n<a.length-1?",":"")}),"{"+t+(""!=r?"modifiers:["+r+"]":"")+"}"})),t&&(v=t.substr(1).split(/[$.]/).map(function(e){return"'"+e+"'"})),n});var g=[_+c+" _njIsDirective"+(m?' arguments="'+b+y+"["+m.join(",")+"]"+x+j+'"':"")+(v?' modifiers="'+y+"["+v.join(",")+"]"+x+'"':"")+(p?"":" /")];return p&&g.push((s?(d?b:"")+y+" ":"")+R(f)+(s?" "+x+(d?j:""):"")),h.push(g)," "}),params:h}}(e,l,i);o=c.elem,s=c.params}if(a){var p=[o];s&&p.push(s),r.push(p)}else r.push(o),s&&r.push(s)}var Vn=/([^\s-$.]+)(([$.][^\s-$.]+)*)((-[^\s-$.]+([$.][^\s-$.]+)*)*)/;function Xn(e,n,t,r,a,l){/\/$/.test(n)&&(n=n.substr(0,n.length-1)),Qn(e,n,t,r,!0,a,l)}function Yn(e,n){n.push(e)}function et(c){return function(e,n,t,r,a){if(e){if(d(n)){var l=n;n=l.tmplKey,t=l.fileName,r=l.delimiters,a=l.tmplRule}var i;if(n&&(i=I.templates[n]),!i){var o,s,u=d(e);if(u&&e.main)o=e;else n&&(s=I.asts[n]),s||(u&&"nj_root"===e.type?s=e:(a||(a=r?L(r):I.tmplRule),s=rt(),N(e)&&(e=Wn.call({tmplRule:a,outputH:c,onlyParse:!0,fileName:t},e)),_n(e._njTmpl,s,a)),n&&(I.asts[n]=s)),o=In(s.content,s,!c);i=function(e,n){var t={tmplKey:n,us:e.useString,x:I.extensions,f:I.filters,np:m,tf:v,wn:g,n:te,c:V,sp:Z,r:le,e:X,er:Y,en:ee,aa:ne,an:K,g:I.global,l:Q,cf:ce};return t.us?(t.ans=ae,t.es=I.escape,t.ls=oe,t.fl=se):(t.h=I.createElement,t.H=ue,t.cp=I.components),F(e,function(e,n){"main"===n?(t[n]=ie(t,e),b(t[n],{_njTmpl:{value:!0}}),t["_"+n]=e):0==n.indexOf("fn")&&(t[n]=e)},!1),t}(o,n),n&&(I.templates[n]=i)}return i.main}}}var nt=et(),tt=et(!0);function rt(){var e=H();return e.type="nj_root",e.content=[],e}function at(t){return function(e,n){return(t?tt:nt)(e,n?{tmplKey:n.tmplKey?n.tmplKey:e._njTmplKey,fileName:n.fileName,delimiters:n.delimiters}:e._njTmplKey).apply(null,o(arguments,1))}}var lt=at(),it=at(!0);function ot(a){return function(e,n){var t=(a?tt:nt)(e,e._njTmplKey);if(n){var r=function(){return t.apply(this,T([n],arguments))};return x(n,"_njParam",{value:!0}),b(r,{_njTmpl:{value:!0}}),r}return t}}var st=ot(),ut=ot(!0);function ct(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.outputH,t=e.delimiters,r=e.fileName,a=e.isExpression,l=e.isCss,i=t?L(t):I.tmplRule;return function(){return Wn.apply({tmplRule:i,outputH:n,fileName:r,isExpression:a,isCss:l},arguments)}}function pt(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return e.outputH=!0,ct(e)}K(I,{compile:nt,compileH:tt,precompile:function(e,n,t){var r=rt();e.quasis?e=Wn.call({tmplRule:t,outputH:n,onlyParse:!0,isExpression:e.isExpression,isCss:e.isCss},e.quasis):N(e)&&(e=Wn.call({tmplRule:t,outputH:n,onlyParse:!0},e));return _n(e._njTmpl,r,t),In(r.content,r,!n)},render:lt,renderH:it,buildRender:st,buildRenderH:ut});var ft=ct(),mt=pt();function vt(){return(I.outputH?mt:ft).apply(null,arguments)()}var gt=ct({isExpression:!0}),dt=pt({isExpression:!0});function ht(){return(I.outputH?dt:gt).apply(null,arguments)()}var _t=pt({isCss:!0});function yt(){return _t.apply(null,arguments)()}K(I,{createTaggedTmpl:ct,createTaggedTmplH:pt,taggedTmpl:ft,taggedTmplH:mt,template:vt,expression:ht,css:yt}),K(I,{registerComponent:$,getComponentConfig:function(e){return A.get(N(e)?S[e]:e)},copyComponentConfig:function(e,n){return A.set(e,A.get(n)),e},createTmplRule:L,config:function(e){var n=e.delimiters,t=e.includeParser,r=e.createElement,a=e.outputH,l=e.textMode,i=e.noWsMode;n&&L(n,!0),t&&(I.includeParser=t),r&&(I.createElement=r),null!=a&&(I.outputH=a),null!=l&&(I.textMode=l),null!=i&&(I.noWsMode=i)}});var xt=I.global;xt.NornJ=xt.nj=I,e.compile=nt,e.compileH=tt,e.css=yt,e.default=I,e.expression=ht,e.registerComponent=$,e.registerExtension=ge,e.registerFilter=je,e.render=lt,e.renderH=it,e.taggedTmpl=ft,e.taggedTmplH=mt,e.template=vt,Object.defineProperty(e,"__esModule",{value:!0})});
