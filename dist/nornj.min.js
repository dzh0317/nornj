/*!
* NornJ template engine v5.0.0-rc.6
* (c) 2016-2019 Joe_Sky
* Released under the MIT License.
*/
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).NornJ={})}(this,function(e){"use strict";function F(){return F["taggedTmpl"+(F.outputH?"H":"")].apply(null,arguments)}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function E(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,a=!1,l=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){a=!0,l=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw l}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}F.createElement=null,F.components={},F.componentConfig=new Map,F.preAsts={},F.asts={},F.templates={},F.errorTitle="[NornJ]",F.tmplRule={},F.outputH=!1,F.global="undefined"!=typeof self?self:global,F.textTag="nj-text",F.textMode=!1,F.noWsTag="nj-noWs",F.noWsMode=!1;var r=Array.prototype.push,a=Array.prototype.slice,l=Object.prototype.hasOwnProperty,n=Object.prototype.toString,i=F.errorTitle,x=Object.defineProperty,b=Object.defineProperties;function k(e,n){return r.apply(e,n),e}function s(e,n,t){return a.call(e,n,t)}function N(e){return Array.isArray(e)}function g(e){var n=t(e);return!N(e)&&("function"===n||"object"===n&&!!e)}function o(e){return"[object Number]"===n.call(e)}function A(e){return"[object String]"===n.call(e)}var u,p=(u="length",function(e){return null==e?void 0:e[u]});function c(e){var n=p(e);return"number"==typeof n&&0<=n}function I(e,n,t,r){if(e)if(null==r&&(r=c(e)),t=t||e,r)for(var a=0,l=e.length;a<l;a++){if(!1===n.call(t,e[a],a,l))break}else for(var i=Object.keys(e),s=i.length,o=0;o<s;o++){var u=i[o];if(!1===n.call(t,e[u],u,o,s))break}}var f=/(\n|\r)?[\s\xA0]+$/;function H(e){return e.replace(f,function(e,n){return n?"\n":""})}function m(){}function v(e,n,t){if(!e)switch(t){case"ex":throw Error(i+'Extension tag "'+n+'" is undefined, please check it has been registered.');default:throw Error(i+(n||e))}}function d(e,n){switch(n){case"f":e='A filter called "'+e+'" is undefined.'}console.warn(i+e)}function _(e){console.error(i+e)}function L(){return Object.create(null)}var h=/["]+/g,y=/[']+/g;function R(e,n){if(null!=e){var t;if(null==n){var r=e[0];"'"===r?t=y:'"'===r&&(t=h)}else t=n?h:y;return t&&(e=e.replace(t,"")),e}}function j(e){return-1<e.indexOf("-")&&(e=e.replace(/-\w/g,function(e){return e.substr(1).toUpperCase()})),e}var G=Object.assign||function(e){for(var n=1,t=arguments;n<t.length;n++){var r=t[n];for(var a in r)l.call(r,a)&&(e[a]=r[a])}return e};function C(e){return e[0].toUpperCase()+e.substr(1)}function w(e){return e[0].toLowerCase()+e.substr(1)}G(F,{defineProp:x,defineProps:b,arrayPush:k,arraySlice:s,isArray:N,isObject:g,isNumber:o,isString:A,isArrayLike:c,each:I,noop:m,throwIf:v,warn:d,obj:L,toCamelCase:j,assign:G,capitalize:C,lowerFirst:w});var P=Object.freeze({defineProp:x,defineProps:b,arrayPush:k,arraySlice:s,isArray:N,isObject:g,isNumber:o,isString:A,isArrayLike:c,each:I,trimRight:H,noop:m,throwIf:v,warn:d,error:_,obj:L,clearQuot:R,toCamelCase:j,assign:G,capitalize:C,lowerFirst:w}),S=F.components,T=F.componentConfig;function $(e,n,t){var s,r=e;return g(e)||((r={})[e]={component:n,options:t}),I(r,function(e,n,t){var r;if(null!=e){var a=e.component,l=e.options,i=n.toLowerCase();T.set(S[i]=r=a||e,l)}0==t?s=r:(1==t&&(s=[s]),s.push(r))},!1,!1),s}function K(e,n){return RegExp(e,n)}function z(e){return e.replace(/\$/g,"\\$")}function D(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0,t=F.tmplRule,r=t.startRule,a=void 0===r?"{{":r,l=t.endRule,i=void 0===l?"}}":l,s=t.extensionRule,o=void 0===s?"#":s,u=t.propRule,p=void 0===u?"@":u,c=t.strPropRule,f=void 0===c?"@":c,m=t.templateRule,v=void 0===m?"template":m,d=t.tagSpRule,g=void 0===d?"#$@":d,_=t.commentRule,h=void 0===_?"#":_,y=e.start,x=e.end,b=e.extension,j=e.prop,R=e.strProp,C=e.template,w=e.tagSp,P=e.comment;y&&(a=y),x&&(i=x),b&&(o=b),j&&(p=j),R&&(f=R),C&&(v=C),w&&(g=w),null!=P&&(h=P);var S=a[0],T=i[i.length-1],O=function(e){return e.replace(/\-/g,"\\-")}(function(e){for(var n,t="",r=0,a=e.length;r<a;r++)t.indexOf(n=e[r])<0&&(t+=n);return t}(o+p+f+g)),E=z(o),k=z(p),N=z(f),A=S+a,H=i+T,L="[\\s\\S]+?",$="\\.\\.\\."+L,I=A+L+H+"|"+a+L+i,D={startRule:a,endRule:i,extensionRule:o,propRule:p,strPropRule:f,templateRule:v,tagSpRule:g,commentRule:h,firstChar:S,lastChar:T,braceParamStr:I,xmlOpenTag:K("^<([a-z"+S+O+"][^\\s>]*)[^>]*>$","i"),openTagParams:K("[\\s]+((("+A+"("+L+")"+H+")|("+a+"("+L+")"+i+"))|[^\\s=>]+)(=(('[^']+')|(\"[^\"]+\")|([^\"'\\s]+)))?","g"),exAttrs:K("[\\s]+((("+A+"("+L+")"+H+")|("+a+"("+L+")"+i+"))|((:?)("+E+"|n-)?([^\\s=>]+)))(=(('[^']+')|(\"[^\"]+\")|([^\"'\\s>]+)))?","g"),braceParam:K(I,"i"),braceParamG:K(I,"ig"),spreadProp:K("[\\s]+("+A+"[\\s]*("+$+")"+H+")|("+a+"[\\s]*("+$+")"+i+")","g"),replaceSplit:K(I),replaceParam:K("(("+A+")("+L+")"+H+")|(("+a+")("+L+")"+i+")","g"),checkElem:K("([^<>]+)|(<([a-z/!"+S+O+"][^\\s<>]*)([^<>]*)>|<)([^<]*)","ig"),extension:K("^"+E+"([^\\s]+)","i"),exAll:K("^([/]?)("+E+"|"+N+k+"|"+k+")([^\\s]+)","i"),include:K("<"+E+"include([^>]*)>","ig"),incompleteStart:K(a+"((?!"+i+")[\\s\\S])*$"),incompleteStartR:K(A+"((?!"+H+")[\\s\\S])*$"),incompleteEnd:K("^[\\s\\S]*?"+i),incompleteEndR:K("^[\\s\\S]*?"+H)};if(!n)return D;G(F.tmplRule,D)}D({},!0);var M={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},W=/[&><"']/g;var q={nbsp:" ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lt:"<",gt:">",amp:"&",quot:'"',"#x27":"'"},B=RegExp("&("+Object.keys(q).join("|")+");","g");function J(e){return null==e?"":e.replace?e.replace(B,function(e,n){return q[n]}):e}G(F,{escape:function(e){return null==e?"":e.replace?e.replace(W,function(e){return M[e]}):e},unescape:J});var Z=/^(-?([0-9]+[\.]?[0-9]+)|[0-9])$/;function U(e){if(g(e)||N(e)||o(e))return e;for(var n,t,r=/([^\s:]+)[\s]?:[\s]?([^;]+)[;]?/g;n=r.exec(e);){var a=n[1],l=n[2];t||(t={}),/^[A-Z-]+$/.test(a)&&(a=a.toLowerCase()),t[a=j(a)]=Z.test(l)?+l:l}return t}function Q(e,n,t){var r,a;n||(n=this.data);for(var l=0,i=n.length;l<i;l++)if((a=n[l])&&void 0!==(r=a[e]))return t?{_njCtx:a,val:r,prop:e}:r}function X(e,n){return null!=e&&null!=n.level&&(e+=n.level),e}function V(e,n,t){return null==e?e:e.val._njTmpl?e.val.call({_njData:n.data,_njParent:n.parent,_njIndex:n.index,_njLevel:X(t,n),_njIcp:n.icp}):e.val.call(n.data[n.data.length-1],n)}function Y(e,n,t,r,a){var l;return r.icp&&(l=Q(t,r.icp))||(l=n.cp[e]),null!=a&&l&&(l=l[a]),l||t}function ee(e,n,t,r,a){return null!=e?A(e)?Y(e.toLowerCase(),t,e,a):e:Y(n,t,r,a)}function ne(e,n){return null!=e&&""!==e?e:n}function te(e,n){var t=e.args;if(t)for(var r=t.length;r--;)n.unshift(t[r])}function re(e,n){return n?{data:n.data?k(n.data,e.data):e.data,parent:n.fallback?e:e.parent,root:e.root||e,index:"index"in n?n.index:e.index,item:"item"in n?n.item:e.item,level:e.level,getData:Q,get ctxInstance(){return this.data[this.data.length-1]},d:Q,icp:e.icp}:e}function ae(e){switch(e){case"class":e="className";break;case"for":e="htmlFor"}return e}function le(){var e="",n=G.apply(P,arguments);for(var t in n){var r=n[t];e+=" "+t+(t!==r?'="'+r+'"':" ")}return e}function ie(n,t,r){return function(e){return r(n,t,e)}}function se(a,l){return function(e,n){var t=this,r=s(arguments);return l(a,{data:t&&t._njData?k(r,t._njData):r,parent:t?t._njParent:null,index:t?t._njIndex:null,item:t?t._njItem:null,level:t?t._njLevel:null,getData:Q,d:Q,icp:function(e,n){var t;return e&&e.components&&(N(t=e.components)||(t=[t])),n&&n._njIcp&&(t=t?k(t,n._njIcp):n._njIcp),t}(e&&e._njParam?n:e,t)})}}function oe(e){if(null==e.level)return"";for(var n="",t=0;t<e.level;t++)n+="  ";return n}function ue(e){return null==e.index?"":0==e.index?"":"\n"}function pe(e){return F.createElement.apply(null,e)}function ce(e){return e._njCtx?e.val.bind(e._njCtx):e}var fe={if:function(e,n){var t;if(e&&e._njOpts&&(e=(n=e).props.condition),"false"===e&&(e=!1),e)t=n.children();else{var r=n.props;if(r){var a=r.else;if(r.elseifs){var l=r.elseifs.length;I(r.elseifs,function(e,n){if(e.value)return t=e.fn(),!1;n===l-1&&a&&(t=a())},!1,!0)}else a&&(t=a())}}return n.useString&&null==t?"":t},else:function(e){return e.attrs.else=e.children},elseif:function(e,n){e&&e._njOpts&&(e=(n=e).props.condition||n.props.value);var t=n.attrs;t.elseifs||(t.elseifs=[]),t.elseifs.push({value:e,fn:n.children})},switch:function(t,e){t&&t._njOpts&&(t=(e=t).props.value);var r,a=e.props,l=a.elseifs.length;return I(a.elseifs,function(e,n){if(t===e.value)return r=e.fn(),!1;n===l-1&&a.else&&(r=a.else())},!1,!0),r},each:function(e,s){e&&e._njOpts&&(e=(s=e).props.of);var o,u=s.useString,n=s.props;if(e){o=u?"":[];var p=c(e);I(e,function(e,n,t,r){var a,l={data:[e],index:p?n:t,item:e,fallback:!0};a={"@first":0===l.index,"@last":l.index===(p?t:r)-1},p||(a||(a={}),a["@key"]=n),a&&l.data.push(a);var i=s.children(l);u?o+=i:o.push(i)},!1,p),u||o.length||(o=null),o&&o.length||!n||!n.else||(o=n.else())}else n&&n.else&&(o=n.else()),u&&null==o&&(o="");return o},prop:function(e,n){var t,r=n.value();t=void 0!==r?r:!n.useString||e,n.attrs[n.outputH?ae(e):e]=t},spread:function(e,t){var r=t.attrs;I(e,function(e,n){void 0===r[n]&&(t.attrs[n]=e)},!1,!1)},show:function(e){if(!e.value()){var n=e.attrs,t=e.useString;n.style||(n.style=t?"":{}),t?n.style+=(n.style?";":"")+"display:none":N(n.style)?n.style.push({display:"none"}):n.style.display="none"}},for:function(t,r,e){var a,l=1;if(t&&t._njOpts){var i=(e=t).props;Object.keys(i).forEach(function(e){var n=i[e];"to"===e?r=n:"step"===e?l=n:(t=n,a=e)})}else e.props&&(l=e.props.step||1);var n,s=e.useString;for(n=s?"":[];t<=r;t+=l){var o=e.children({data:a?[O({},a,t)]:null,index:t,fallback:!0});s?n+=o:n.push(o)}return n},obj:function(e){return e.props},list:function(){var e=arguments,n=e.length-1,t=e[n];if(0<n){var r=s(e,0,n);return t.useString&&(r=r.join("")),r}return[t.children()]},fn:function(e){var n=e.props;return function(){var t,r=arguments;if(n){t={};var a=Object.keys(n);a.forEach(function(e,n){return t[a[n]]=r[n]})}return e.children({data:[t]})}},block:function(e){return e.children()},with:function(e,n){if(e&&e._njOpts)return(n=e).children({data:[n.props]});var t=n.props;return n.children({data:[t&&t.as?O({},t.as,e):e]})},arg:function(e){var n=e.attrs;n.args||(n.args=[]),n.args.push(e.value())},css:function(e){return e.props.style}};function me(e,n){var t={onlyGlobal:!1,useString:!1,newContext:!0,isSubTag:!1,isDirective:!1,addSet:!1,useExpressionInJsx:"onlyTemplateLiteral",hasName:!0,noTagName:!1,hasAttrs:!0,hasTmplCtx:!0,hasOutputH:!1};return e&&(t=G(t,e)),n&&(t=G(t,n)),t}var ve={onlyGlobal:!0,newContext:!1,hasName:!1,hasAttrs:!1,hasTmplCtx:!1},de={if:me(ve),else:me(ve,{isSubTag:!0,hasAttrs:!0}),switch:me(ve,{needPrefix:"onlyUpperCase"}),each:me(ve,{newContext:{item:"item",index:"index",datas:{first:["@first","first"],last:["@last","last"]}}}),for:me(ve,{newContext:{index:"index",getDatasFromProp:{except:["to","step","index"]}}}),prop:me(ve,{isDirective:!0,needPrefix:!0,hasAttrs:!0}),obj:me(ve,{needPrefix:!0}),fn:me(ve,{newContext:!0,needPrefix:!0}),with:me(ve,{newContext:{getDatasFromProp:!0}}),style:{useExpressionInJsx:!1,needPrefix:!0}};function ge(e,n,t,a){var r=e;g(e)||((r={})[e]={extension:n,options:t}),I(r,function(e,n){if(e){var t=e.extension,r=e.options;t?fe[n]=t:a||(fe[n]=e),a?(de[n]||(de[n]=me()),G(de[n],r)):de[n]=me(r)}},!1,!1)}de.elseif=me(de.else),de.spread=me(de.prop),de.list=me(de.obj),de.block=me(de.obj),de.pre=me(de.obj),de.arg=me(de.prop),de.show=me(de.prop,{noTagName:!0,hasOutputH:!0}),de.css=me(de.obj),fe.case=fe.elseif,de.case=de.elseif,fe.empty=fe.default=fe.else,de.empty=de.default=de.else,fe.strProp=fe.prop,de.strProp=me(de.prop,{useString:!0}),fe.strArg=fe.arg,de.strArg=me(de.strProp),fe.pre=fe.block,de.pre=de.block,G(F,{extensions:fe,extensionConfig:de,registerExtension:ge});var _e=/(\d{3})(?=\d)/g,he={".":function(e,n,t){return null==e?e:e._njCtx?{_njCtx:e.val,val:e.val[n],prop:n}:t?{obj:e,prop:n}:e[n]},_:function(e,n){return e&&null!=e.obj[e.prop]?e.obj[e.prop].apply(e.obj,n):null},"#":function(e,n,t){return null==e?e:V({val:e[n],_njCtx:e},t.context,t.level)},"**":function(e,n){return Math.pow(e,n)},"%%":function(e,n){return Math.floor(e/n)},"?:":function(e,n,t){return e?n:t},"!":function(e){return!e},int:function(e){return parseInt(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:10)},float:function(e){return parseFloat(e)},bool:function(e){return"false"!==e&&!!e},reg:function(e,n){return RegExp(e,n)},css:function(e){return U(e)},"..":ye(1),rLt:ye(0),"<=>":function(e,n){return n<e?1:e==n?0:-1},capitalize:function(e){return C(e)},lowerFirst:function(e){return w(e)},currency:function(e,n,t){if(0>e-parseFloat(e))return je.currency.placeholder;t=null!=(t=null!=n&&"string"==typeof n?n:t)&&"string"==typeof t?t:je.currency.symbol,n=null!=n&&"number"==typeof n?n:2;var r=Math.abs(e=parseFloat(e)).toFixed(n),a=n?r.slice(0,-1-n):r,l=a.length%3,i=0<l?a.slice(0,l)+(3<a.length?",":""):"",s=n?r.slice(-1-n):"";return(e<0?"-":"")+t+i+a.slice(l).replace(_e,"$1,")+s}};function ye(t){return function(n,e){return Object.keys(Array.apply(null,{length:e-n+t})).map(function(e){return+e+n})}}function xe(e,n){var t={onlyGlobal:!1,hasOptions:!1,hasLevel:!1,hasTmplCtx:!0};return e&&(t=G(t,e)),n&&(t=G(t,n)),t}var be={onlyGlobal:!0,hasOptions:!1},je={".":xe(be),_:xe({onlyGlobal:!0}),"#":xe({onlyGlobal:!0,hasOptions:!0,hasLevel:!0}),"**":xe(be),"%%":xe(be),"?:":xe(be),"!":xe(be),int:xe(be),float:xe(be),bool:xe(be),reg:xe(be),css:xe(be),"..":xe(be),rLt:xe(be),"<=>":xe(be),capitalize:xe(be),lowerFirst:xe(be),currency:xe(be,{symbol:"$",placeholder:""})},Re=/\*|\||\/|\.|\?|\+/g;function Ce(e,n,t,a){var r=e;g(e)||((r={})[e]={filter:n,options:t}),I(r,function(e,n){if(e){var t=e.filter,r=e.options;t?he[n]=t:a||(he[n]=e),a?(je[n]||(je[n]=xe()),G(je[n],r)):je[n]=xe(r)}},!1,!1)}F.REGEX_OPERATORS=RegExp(["+=","+","-[0-9]","-","**","*","%%","%","===","!==","==","!=","<=>","<=",">=","=","..<","<",">","&&","||","?:","?",":","../","..","/"].map(function(e){return e.replace(Re,function(e){return"\\"+e})}).join("|"),"g"),G(F,{filters:he,filterConfig:je,registerFilter:Ce});var we=/('[^']*')|("[^"]*")|(-?[0-9][0-9]*(\.\d+)?)|true|false|null|undefined|Object|Array|Math|Date|JSON|(([a-zA-Z_$#@])([a-zA-Z_$\d]*))/,Pe=/_njQs(\d+)_/g,Se=/_njSet_/;function Te(e,i,s,o){var n=L();if(0<=e.indexOf("|")){var t,u=[];e=(t=e.split("|"))[0].trim(),I(t=t.slice(1),function(e){if(""!==(e=e.trim())){var n=function(e){return e.split("'bracket_")}(e),t=L(),r=n[0].trim();if(r){var a=n[1];if(null!=a){var l=[];I(i[a].split(","),function(e){""!==e&&(l[l.length]=Te(e.trim(),i,s,o))},!1,!0),t.params=l}t.name=r,u.push(t)}}},!1,!0),n.filters=u}if(0==(e=function(e,t){return e.replace(Pe,function(e,n){return t[n]})}(e,s)).indexOf("../")){var r=0;e=e.replace(/\.\.\//g,function(){return r++,""}),n.parentNum=r}if(""!==e){var a=we.exec(e),l="#"===a[6];n.name=l?a[7]:a[0],a[5]||(n.isBasicType=!0),l&&(n.isComputed=!0),n.name=n.name.replace(Se,function(){return n.hasSet=!0,""})}else n.isEmpty=!0;return n}var Oe=/_nj(L|G)t_/g,Ee={_njLt_:"<",_njGt_:">"},ke=/"[^"]*"|'[^']*'/g,Ne={"||":"or","..<":"rLt"},Ae=/[\s]+((\|\||\.\.<)[\s]*)/g,He={")":")_(","]":"]_("},Le=/(\)|\]|\.([^\s'"._#()|]+))[\s]*\(/g,$e=/([(,|])[\s]+/g,Ie=/\.([a-zA-Z_$#@][a-zA-Z_$\d]*)/g,De=/([^\s([,])(\[)/g,Fe={"[":"list(","]":")","{":"obj(","}":")"},Ge=/\[|\]|\{|\}/g,Ke=/^[\s]*set[\s]+|([(,])[\s]*set[\s]+/g,ze=/^[\s]*([(]+)|([(,])[\s]*([(]+)/g,Me=["../"],We=/-[0-9]/,qe=["","(","[",","];function Be(e,n,t,r){var a=e[2].trim(),l=[e[0],e[1],null,!0];return 0<t&&(l[3]=!1),r&&(a="set "+a),a=(a=a.replace(Oe,function(e){return Ee[e]}).replace(ke,function(e){return n.push(e),"_njQs"+(n.length-1)+"_"})).replace(F.REGEX_OPERATORS,function(e,n){return We.test(e)?0<n&&qe.indexOf(a[n-1].trim())<0?e.split("-").join(" - "):e:Me.indexOf(e)<0?" ".concat(e," "):e}).replace(Ie,function(e,n){var t="#"===n[0];t&&(n=n.substr(1));var r=n.length-1,a=0<r&&"_"===n[r];return(t?"#":".")+"('"+(a?n.substr(0,r):n)+"')"+(a?"_":"")}).replace(De,function(e,n,t){return n+".("}).replace(Ge,function(e){return Fe[e]}).replace(Ke,function(e,n){return(n||"")+"_njSet_"}).replace(ze,function(e,n,t,r){return(t||"")+(t?r:n).replace(/[(]/g,"bracket(")}).replace(Ae,function(e,n,t){return" "+Ne[t]+" "}).replace($e,function(e,n){return n}).replace(Le,function(e,n,t){return t?".('"+t+"')_(":He[n]}),l[2]=a.trim(),l}var Je=/\(([^()]*)\)/g,Ze=/([!]+)((-?[0-9][0-9]*(\.\d+)?|[^\s,|'=]+)('bracket_\d+)?([._#]'bracket_\d+)*)/g,Ue=/[\s]+([^\s(),|"']+)[\s]+((-?[0-9][0-9]*(\.\d+)?|[^\s,|']+)('bracket_\d+)?([._#]'bracket_\d+)*)/g,Qe=/[(,]/g,Xe=/(\|)?(((\.+|_|#+)'bracket_)|[\s]+([^\s._#|]+[\s]*'bracket_))/g;function Ve(e,n){return Ye((e=e.replace(Ze,function(){var e=arguments;return n.push(Ye(e[2])),e[1]+"'bracket_"+(n.length-1)})).replace(Ue,function(){var e=arguments;return n.push(Ye(e[2]))," "+e[1]+"'bracket_"+(n.length-1)}))}function Ye(e){return(" "+e).replace(Qe,function(e){return e+" "}).replace(Xe,function(e,n,t,r,a,l){return n?e:" | "+(r||l)}).trim()}function en(a,l,e,n,t){var r=L(),i=A(a),s=i?e?["",""]:a.split(l.replaceSplit):[a],o=null,u=!1;if(i&&(s=s.map(function(e){return e.replace(/\n/g,"_njNl_").replace(/\r/g,"")})),1<s.length){var p=[];I(function(e,n,t,r,a){var l,i,s=n.replaceParam,o=0;if(r)i=[Be(l=[e,n.startRule,e],t,o,a)];else for(;l=s.exec(e);){i||(i=[]);var u=l[2];i.push(Be([l[0],u||l[5],u?l[3]:l[6]],t,o,a)),o++}return i}(a,l,p,e,t),function(e){var n=L(),t=[];u=!!e[3]&&e[0]===a;var r=function e(n,t){var r=n.replace(Je,function(e,n){return t.push(Ve(n,t)),"'bracket_"+(t.length-1)});return r!==n?e(r,t):Ve(r,t)}(e[2],t);n.prop=Te(r,t,p,a),n.escape=e[1]!==l.firstChar+l.startRule,o.push(n)},!(o=[]),!0)}return r.props=o,r.strs=s,r.isAll=u,r.onlyKey=n,r}var nn=/^<[^>]+\/>$/i;var tn={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};function rn(e,n){for(var t,r,a=n.openTagParams;t=a.exec(e);){var l=t[1];if("/"!==l){r||(r=[]);var i=t[8],s=null!=t[4]?t[4]:t[6],o=!1;null!=i?i=R(i):(i=l,s||(o=!0)),t[9]||t[10]||(/\/>$/.test(i)?i=i.substr(0,i.length-2):(/>$/.test(i)||/\/$/.test(i))&&(i=i.substr(0,i.length-1)));var u=void 0;":"===l[0]&&(l=l.substr(1),u=!0),r.push({key:l,value:i,onlyBrace:s,hasColon:u,onlyKey:o})}}return r}function an(e,n,t){var r,a=n.extension.exec(e);if(a&&(r=[a[1]],!t)){var l=rn(e,n);l&&r.push(l)}return r}function ln(e,n){return e.match(n.exAll)}var sn=/^[a-z]/;function on(e){return"params"===e||"props"===e}function un(e){return de[e]||{}}function pn(e,n){return 0==e.indexOf(n.propRule)}function cn(e,n){return 0==e.indexOf(n.strPropRule+n.propRule)}var fn=["style","script","textarea","pre","xmp","template","noscript",F.textTag];function mn(e,n,t,r,a){var l={type:"nj_plaintext"};l.content=[en(e,a,null,null,null!=n.ex?un(n.ex).addSet:null)],l.allowNewline=r,n[t].push(l)}var vn=/_njBp(\d+)_/g;function dn(e,t,a,l,r,n){var i="content";if(N(e)){var s={},o=e[0];if(A(o)){var u,p,c,f,m,v,d,g,_=e.length,h=e[_-1],y=!1,x=!1;if(u=an(o,a)){var b=u[0];if(p=u[1],f=function(e){return"tmpl"===e}(b),!(m=on(b))){var j=un(b);d=j.isSubTag,g=(v=j.isDirective)?!l:d,j.useString&&(s.useString=j.useString)}s.type="nj_ex",s.ex=b,null==p||f||m||(s.args||(s.args=[]),I(p,function(e){var n=e.key,t=e.value;if("useString"!==n){if("_njIsDirective"===n)return s.isDirective=v=!0,void(g=!l);var r=en(t,a,e.hasColon,e.onlyKey);e.onlyBrace?s.args.push(r):(s.params||(s.params=L()),s.params[n]=r)}else s.useString=!("false"===t)},!1,!0)),y=!0}else{var R=function(e,n){return n.xmlOpenTag.exec(e)}(o,a);R&&(/\/$/.test(c=R[1])&&(c=c.substr(0,c.length-1)),!function(e){return nn.test(e)}(o)?x=function(e,n){return A(e)&&e.toLowerCase()==="</"+n+">"}(h,c):s.selfCloseTag=!0,y=!0)}if(y){var C=!0;if(r&&(s.allowNewline=!0),u)f?(C=!1,function(e,n,t){var r=n.params;r||(r=n.params=L());var a=r.tmpls;if(a){var l=a.strs[0],i=l._njLen;l[null!=t?t:"_njT"+i]={node:e,no:i},l._njLen=++i}else{var s,o=(O(s={},null!=t?t:"_njT0",{node:e,no:0}),O(s,"_njLen",1),s);r.tmpls=en(o)}}(s,t,p?p[0].value:null)):(m||g)&&(C=!1),null==r&&"pre"===s.ex&&(r=!0,s.allowNewline="nlElem");else{var w=function(e,n){return n.braceParam.exec(e)}(s.type=c,a);w&&(s.typeRefer=en(w[0],a));var P=rn(o,a);P&&(s.params||(s.params=L()),I(P,function(e){s.params[e.onlyBrace?e.onlyBrace.replace(/\.\.\//g,""):e.key]=en(e.value,a,e.hasColon,e.onlyKey)},!1,!0)),s.selfCloseTag||(s.selfCloseTag=function(e){return tn[e.toLowerCase()]}(c)),null==r&&-1<fn.indexOf(c.toLowerCase())&&(r=!0,s.allowNewline="nlElem")}C&&t[i].push(s);var S=e.slice(1,_-(x?1:0));S&&S.length&&gn(S,s,a,m||l&&!v,r),(m||g)&&function(e,n,t,r){var a,l="paramsEx";n[l]?k(n[l].content,t||r?[e]:e.content):((a=t||r?{type:"nj_ex",ex:"props",content:[e]}:e).parentType=n.type,n[l]=a)}(s,t,v,d)}else gn(e,t,a,l,r)}else N(o)&&gn(e,t,a,l,r)}else if(A(e))if(r)mn(n&&"nlElem"===t.allowNewline?H(e):e,t,i,r,a);else{var T=[];e.replace(a.braceParamG,function(e){return T.push(e),"_njBp"+(T.length-1)+"_"}).split(/\n/g).forEach(function(e,n){""!==(e=e.trim())&&mn(e.replace(vn,function(e,n){return T[n]}),t,i,r,a)})}else mn(e,t,i,r,a)}function gn(e,r,a,l,i){r.content||(r.content=[]),I(e,function(e,n,t){dn(e,r,a,l,i,n==t-1)},!1,!0)}function _n(e,n,t,r,a,l,i,s){var o="",u=null!=i?i:t.useString,p=A(r),c=p||0===r,f=1===e.length?"1":"2",m={_type:0,_params:0,_compParam:0,_dataRefer:0,_ex:0,_value:0,_filter:0,_fnH:0,_tmp:0,newContext:a};u?m._children=0:m._compParam=0,!c&&a&&(o+="p2 = p1.n(p2, p3);\n"),"2"==f&&(o+=u?"var ret = '';\n":"var ret = [];\n"),o+=On(e,n,t,m,f,l,i),"2"==f&&(o+="return ret;");try{var v=t[c?"main"+(p?r:""):"fn"+r]=Function("p1","p2","p3",o);p&&null!=s&&(v._njName=s)}catch(e){_("Failed to generate template function:\n\n"+e+" in\n\n"+o+"\n")}return r}function hn(e,n,t,r,a,l,i,s){var o=", useString: "+(null==n?"p1.us":n?"true":"false"),u=!e,p=r._no;if(t){var c=!e||e.newContext,f=t.isDirective||e&&e.isDirective;(u||e.hasName)&&(o+=", name: '"+t.ex+"'"),i&&f&&(u||!e.noTagName)&&(o+=", tagName: "+i,o+=", setTagName: function(c) { "+i+" = c }"),s&&(u||e.hasAttrs)&&(o+=", attrs: "+s),null!=l&&(o+=", props: "+l),o+=", "+(f?"value":"children")+": "+(t.content?"p1.r(p1, p2, p1.fn"+_n(t.content,t,r,++r._no,c,a,n)+")":"p1.np")}return"{ _njOpts: "+(0==p?"'main'":p)+(u||e.hasTmplCtx?", global: p1, context: p2":"")+(u||e.hasOutputH?", outputH: "+!r.useString:"")+o+(null!=a&&(u||e.hasLevel)?", level: "+a:"")+" }"}var yn="nj_custom",xn=["+","-","*","/","%","===","!==","==","!=","<=",">=","=","+=","<",">","&&","||","?",":"],bn=["=","+="],jn={or:"||"};function Rn(e,n,t,r){var a,l=!1,i=e.isBasicType,s=e.isComputed,o=e.hasSet;if(i)a=e.name;else{var u=e.name,p=e.parentNum,c="",f=!1;switch(u){case"@index":c="index",l=!0;break;case"@item":c="item",l=!0;break;case"this":c="data",l=function(e){return"".concat(e,"[").concat(e,".length - 1]")};break;case"@data":c="data",l=!0;break;case"@g":c="p1.g",l=yn;break;case"@root":c="(p2.root || p2)",l=yn;break;case"@context":c="p2",l=yn;break;case"@lt":c="'<'",l=yn;break;case"@gt":c="'>'",l=yn;break;case"@lb":c="'{'",l=yn;break;case"@rb":c="'}'",l=yn;break;case"@q":c="'\"'",l=yn;break;case"@sq":c='"\'"',l=yn}if(p){c||(c="data");for(var m="p2"==c,v=0;v<p;v++)c=m?c+".parent":"parent."+c;l||(f=!0)}if(l||f){var d=l===yn?c:"p2."+c;g(l)&&(d=l(d)),a=l?d:(s?"p1.c(":"")+"p2.d('"+u+"', "+d+(s||o?", true":"")+")"+(s?", p2, "+r+")":"")}else a=(s?"p1.c(":"")+"p2.d('"+u+"'"+(s||o?", 0, true":"")+")"+(s?", p2, "+r+")":"")}return a&&(a=Pn(a)),function(e,n,t,r){return n.useString?t&&r!==yn?"p1.es("+e+")":e:J(e)}(a,t,!i&&!s&&n,l)}function Cn(e){var n=jn[e];return null!=n?n:e}function wn(e){return Pn(e).replace(/_njNl_/g,"\\n").replace(/'/g,"\\'")}function Pn(e){return e.replace(/\\/g,"\\\\")}function Sn(a,i,l,s){var o=a.strs[0],u="";return A(o)?(u=a.isAll||""===o?"":"'"+wn(o)+"'",I(a.props,function(e,n){var t=function m(v,e,d,g,_,h){var y=v.filters&&xn.indexOf(Cn(v.filters[0].name))<0?"":e?v.name:Rn(v,d,g,h),x="";return v.filters&&v.filters.forEach(function(t,e){var n=v.filters[e+1]&&xn.indexOf(Cn(v.filters[e+1].name))<0,r=Cn(t.name);if(xn.indexOf(r)<0)if("_"===r){var a="p1.f['".concat(r,"'](").concat(x);t.params.length&&(a+=", [",t.params.forEach(function(e,n){a+=m(e,null,d,g,_,h),n<t.params.length-1&&(a+=", ")}),a+="]"),a+=")",x=n?a:(y+=a,"")}else{var l,i,s,o,u=v.isEmpty&&0==e;if("bracket"===r)l="(",i=")";else if("list"===r)l="[",i="]";else if("obj"===r)l="{ ",i=" }",s=!0;else{if("require"==r)l="require";else{var p="p1.f['".concat(r,"']");l=(o=je[r])&&o.onlyGlobal?p:"p1.cf(p2.d('".concat(r,"', 0, true) || ").concat(p).concat("",")")}l+="(",i=")"}var c=l;if(u)t.params.forEach(function(e,n){c+=m(e,s,d,g,_,h),n<t.params.length-1&&(c+=", ")});else{c+=0==e?Rn(v,d,g,h):""!==x?x:v.filters[e-1].params[0].filters?m(v.filters[e-1].params[0],null,d,g,_,h):Rn(v.filters[e-1].params[0],d,g,h),t.params&&t.params.forEach(function(e,n){c+=", ",c+=e.filters?m(e,null,d,g,_,h):Rn(e,d,g,h)});var f=v.filters[e+1];"."===r&&f&&"_"===Cn(f.name)&&(c+=", true"),o&&o.hasOptions&&(c+=", ".concat(hn(o,_,null,g,h)))}c+=i,x=n?c:(y+=c,"")}else bn.indexOf(r)<0?y+=" ".concat(r," "):y+="._njCtx.".concat(0==e?v.name:R(v.filters[e-1].params[0].name)," ").concat(r," "),v.filters[e+1]&&xn.indexOf(Cn(v.filters[e+1].name))<0||(t.params[0].filters?(y+="(",y+=m(t.params[0],null,d,g,_,h),y+=")"):y+=Rn(t.params[0],d,g,h))}),y}(e.prop,null,e.escape,i,l,s);if(a.isAll)t="("+t+")";else{var r=a.strs[n+1];t=(""===o&&0==n?"":" + ")+"("+t+")"+(""!==r?" + '"+wn(r)+"'":"")}if(u+=t,a.isAll)return!1},!1,!0)):g(o)&&null!=o._njLen&&(u+="{\n",I(o,function(e,n,t,r){if("_njLen"!==n){var a=0!=n.indexOf("_njT"),l="p1.main"+_n(e.node.content,e.node,i,"T"+ ++i._noT,null,null,null,a?n:null);u+='  "'+e.no+'": '+l,a&&(u+=',\n  "'+n+'": '+l)}else u+="  length: "+e;u+=",\n",t===r-1&&(u+="  _njData: p2.data,\n                         _njParent: p2.parent,\n                         _njIndex: p2.index,\n                         _njItem: p2.item,\n                         _njLevel: p1.l("+s+", p2),\n                         _njIcp: p2.icp\n")},!1,!1),u+="}"),u}function Tn(e,l,n,i,s,t){var r,a,o=e.params,u=e.paramsEx,p=l.useString,c=u,f="";if(o||c){if(r=n._params++,f="var "+(a="_params"+r)+" = ",o){var m=Object.keys(o),v=m.length;f+="{\n",I(m,function(e,n){var t=Sn(o[e],l,i,s);p||"style"!==e||(t="p1.sp("+t+")");var r=wn(e),a=o[e].onlyKey;p||(r=ae(r)),f+="  '"+r+"': "+(a?i?"'"+r+"'":"true":t)+(n<v-1?",\n":"")},!1,!1),f+="\n};\n"}c?(o||(f+="{};\n"),u&&(f+=On(u.content,u,l,n,{_paramsE:!0},null,i,t,a)),i&&(f+="\n"+a+" = p1.ans("+a+");\n")):i&&(f+="\n"+a+" = p1.ans({}, "+a+");\n")}return[f,r]}function On(e,t,r,a,l,i,s,o,u){var p="";return e&&I(e,function(e){var n=e.useString;p+=function(e,n,r,t,a,l,i,s,o,u){var p="",c=r.useString;if("nj_plaintext"===e.type){var f=Sn(e.content[0],r,i,l);if(""===f)return p;var m=En(e,n,1,a,{text:f},r,l,i,e.allowNewline,s);p+=c?m:J(m)}else if("nj_ex"===e.type){var v,d=t._ex++,g=t._dataRefer++,_="",h=de[e.ex],y="_ex"+d,x="p1.x['"+e.ex+"']";h&&h.onlyGlobal?p+="\nvar "+y+" = "+x+";\n":(p+="\nvar "+y+";\n",p+="var "+(v="_fnH"+t._fnH++)+" = p2.d('"+e.ex+"', 0, true);\n",p+="if ("+v+") {\n",p+="  "+y+" = "+v+".val;\n",p+="} else {\n",p+="  "+y+" = "+x+";\n",p+="}\n"),_+="var _dataRefer"+g+" = [\n",e.args&&I(e.args,function(e,n){var t=Sn(e,r,i,l);_+="  "+t+","},!1,!0);var b=Tn(e,r,t,!1,l,o),j=b[0],R=b[1];_+=hn(h,i,e,r,l,""!==j?"_params"+R:null,o,u),_+="\n];\n",""!==j&&(_+="p1.aa(_params"+R+", _dataRefer"+g+");\n"),p+=j+_,p+=En(e,n,2,a,{_ex:d,_dataRefer:g,fnH:v},r,l,i,e.allowNewline,s)}else{var C,w,P,S=t._type++,T="_type"+S;if(C=e.typeRefer?(w=Sn(e.typeRefer,r,l),e.typeRefer.props[0].prop.name):e.type,c)P=w?"p1.en("+w+", '"+C+"')":"'"+C+"'";else{var O=C.toLowerCase(),E="";if(!w&&-1<O.indexOf(".")){var k=C.split(".");O=O.split(".")[0],C=k[0],E=", '"+k[1]+"'"}P=w?"p1.er("+w+", '"+O+"', p1, '"+C+"', p2)":"p1.e('"+O+"', p1, '"+C+"', p2"+E+")"}p+="\nvar _type"+S+" = "+P+";\n";var N,A,H=Tn(e,r,t,c,l,T),L=H[0],$=H[1];p+=L,p+=c?"var _children"+(A=t._children++)+" = '';\n":"var _compParam"+(N=t._compParam++)+" = [_type"+S+", "+(""!==L?"_params"+$:"null")+"];\n",p+=On(e.content,e,r,t,c?{_children:"_children"+A}:{_compParam:"_compParam"+N},c&&e.type===F.noWsTag?null:null!=l?l+1:l,i,T),p+=En(e,n,3,a,c?{_type:S,_typeS:C,_typeR:w,_params:""!==L?$:null,_children:A,_selfClose:e.selfCloseTag}:{_compParam:N},r,l,i,e.allowNewline,s)}return p}(e,t,r,a,l,i,null!=n?n:s,r._firstNode&&0==i,o,u),r._firstNode&&(r._firstNode=!1)},!1,!0),p}function En(e,n,t,r,a,l,i,s,o,u){var p,c=l.useString,f=null!=s?s:c,m=null==i;switch(t){case 1:p=(!c||o||m?"":u?"nj_root"!==n.type?"p1.fl(p2) + ":"":"'\\n' + ")+kn(i,l,o)+Nn(c,u||m)+a.text;break;case 2:p="_ex"+a._ex+".apply("+(a.fnH?a.fnH+" ? "+a.fnH+"._njCtx : p2":"p2")+", _dataRefer"+a._dataRefer+")";break;case 3:if(c)if(p=o&&"nlElem"!==o||m?"":u?"nj_root"!==n.type?"p1.fl(p2) + ":"":"'\\n' + ",e.type!==F.textTag&&e.type!==F.noWsTag){var v=kn(i,l,o),d=e.content,g=a._typeR,_=null!=a._params;p+=v+Nn(c,u||m)+"'<"+(g?"' + _type"+a._type:a._typeS)+(_?(g?"":"'")+" + _params"+a._params:"")+(g||_?" + '":""),a._selfClose?p+=" />'":(p+=">'",p+=" + _children"+a._children+" + ",p+=(!d||o||m?"":"'\\n' + ")+(d?v:"")+Nn(c,m)+"'</"+(g?"' + _type"+a._type+" + '":a._typeS)+">'")}else p+="_children"+a._children;else p="p1.H(_compParam"+a._compParam+")"}return"1"===r?"\nreturn "+p+";":"2"===r?f?"\nret += "+p+";\n":"\nret.push("+p+");\n":r._paramsE?"\n"+p+";\n":c?"\n"+r._children+" += "+p+";\n":"\n"+r._compParam+".push("+p+");\n"}function kn(e,n,t){var r="";if(t&&"nlElem"!==t)return r;if(n.useString&&null!=e&&0<e){r+="'";for(var a=0;a<e;a++)r+="  ";r+="' + "}return r}function Nn(e,n){return e&&!n?"p1.ls(p2) + ":""}var An=function(e,n,t){var r={useString:t,_no:0,_noT:0,_firstNode:!0};return _n(e,n,r,r._no,null,0),r},Hn=F.preAsts,Ln="_njParam",$n=["style","script","textarea","xmp",F.textTag],In=tn;function Dn(e){var n,t=""+e,r=Hn[t],i=this.outputH,s=this.tmplRule,a=this.onlyParse,l=this.fileName,o=this.isExpression,u=this.isCss;if(!r){var p=A(e)?[e]:e,c=p.length,f="",m=!1;I(p,function(e,n){var t="";if(0==n&&(o?e=(i?s.firstChar:"")+s.startRule+" "+e:u&&(e="<"+s.extensionRule+'css style="'+e)),n<c-1){var r=e.length-1,a="#"===e[r],l="..."===e.substr(r-2);m&&(m=!s["incompleteEnd"+("isR"===m?"R":"")].test(e)),m||(m=s.incompleteStartR.test(e)?"isR":s.incompleteStart.test(e)),a?e=e.substr(0,r):l&&(e=e.substr(0,r-2)),t=(a?"#":l?"...":"")+Ln+n,m||(t=s.startRule+t+s.endRule)}n==c-1&&(o?e+=" "+s.endRule+(i?s.lastChar:""):u&&(e+='" />')),f+=e+t},!1,!0);var v=F.includeParser;v&&(f=v(f,l,s)),f=function(e,n){var t=n.commentRule;return e.replace(RegExp("\x3c!--"+t+"[\\s\\S]*?"+t+"--\x3e","g"),"").replace(RegExp("([\\s]+:[^\\s=>]+=(('[^']+')|(\"[^\"]+\")))|("+n.braceParamStr+")","g"),function(e,n,t,r,a,l){return(n||l).replace(zn,function(e){return Kn[e]})})}(f,s),i||(F.textMode&&(f="<"+F.textTag+">"+f+"</"+F.textTag+">"),F.noWsMode&&(f="<"+F.noWsTag+">"+f+"</"+F.noWsTag+">")),r=function(e,n,t){var r,a,l=[],i={elem:l,elemName:"root",parent:null},s=n.checkElem,o=null;for(;r=s.exec(e);){var u=r[1],p=r[2],c=r[3],f=r[4],m=r[5];if(o){var v=o,d=E(v,4),g=d[0],_=d[1],h=d[2],y=d[3],x=!!p&&ln(c,n);x&&!x[1]&&(pn(c,n)||cn(c,n)||on(x[3])||un(x[3]).isDirective)?(i=Fn(_,i),Wn(g,_,h,i.elem,null,n,t)):Bn(g,_,h,i.elem,n,t),Gn(y,i),o=null}if(u&&""!==u&&Jn(u,i.elem),p)if("<"!==p)if(0==p.indexOf("<!"))Jn(p,i.elem);else{var b=ln(c,n);if("/"===c[0])if(c.substr(1).toLowerCase()===a&&(a=null),b||!a){var j=i.elemName;(j.indexOf(Ln)<0?c==="/"+j:-1<c.indexOf(Ln)||"//"===c)&&(i=i.parent)}else Jn(p,i.elem);else if("/"===p[p.length-2])b||!a?Bn(p,c,f,i.elem,n,t):Jn(p,i.elem);else if(b||!a)if(!a&&In[c.toLowerCase()])o=[p,c,f,m];else{var R=c.toLowerCase();-1<$n.indexOf(R)&&(a=R),i=Fn(c,i),Wn(p,c,f,i.elem,null,n,t)}else Jn(p,i.elem)}else null==m&&(m=""),m=p+m;!o&&Gn(m,i)}if(o){var C=o,w=E(C,4),P=w[0],S=w[1],T=w[2],O=w[3];Bn(P,S,T,i.elem,n,t),Gn(O,i)}return l}(f,s,i),x(r,"_njParamCount",{value:c-1}),Hn[t]=r}if(a)n={_njTmpl:r,_njTmplKey:t};else{var d,g=arguments,_=r._njParamCount;if(0<_){x(d={},"_njParam",{value:!0});for(var h=0;h<_;h++)d[Ln+h]=g[h+1]}b(n=d?function(){return y.apply(this,k([d],arguments))}:function(){return y.apply(this,arguments)},{_njTmpl:{value:r},_njTmplKey:{value:t}});var y=F["compile"+(i?"H":"")](n,t,null,null,s)}return n}function Fn(e,n){var t={elem:[],elemName:e,parent:n};return n.elem.push(t.elem),t}function Gn(e,n){e&&""!==e&&Jn(e,n.elem)}var Kn={"<":"_njLt_",">":"_njGt_"},zn=/>|</g;function Mn(e,n,t,r){return r.extensionRule+(e?"strProp":"prop")+" "+r.startRule+"'"+n.substr((e?r.strPropRule.length:0)+r.propRule.length)+"'"+r.endRule+t}function Wn(e,n,t,r,a,l,i){var s,o,u=function(e,n){var t,r=w(e),a=de[r];return a&&(!a.needPrefix||"onlyUpperCase"==a.needPrefix&&sn.test(e))&&(t=n.extensionRule+r),t}(n,l);if(u&&(n=u),an(n,l,!0))s=e.substring(1,e.length-1),u&&(s=l.extensionRule+w(s));else if(cn(n,l))s=Mn(!0,n,t,l);else if(pn(n,l))s=Mn(!1,n,t,l);else{var p=function(e,n,g){var _,h=n.extensionRule,y=n.startRule,x=n.endRule,b=n.firstChar,j=n.lastChar,t=n.exAttrs;return{elem:e=(e=e.replace(n.spreadProp,function(e,n,t,r,a){return t&&(a=t),_||(_=[h+"props"]),_.push([h+"spread "+(t?b:"")+y+a.replace(/\.\.\./,"")+x+(t?j:"")+"/"])," "})).replace(t,function(e,n,t,r,a,l,i,s,o,u,p,c,f){if(null==u)return e;var m,v;_||(_=[h+"props"]),p=p.replace(qn,function(e,n,t,r,a){return a&&(m=a.substr(1).split("-").map(function(e){var t,r="",a=e.split(/[$.]/);return a.forEach(function(e,n){0==n?t="name:'"+e+"'"+(n<a.length-1?",":""):r+="'"+e+"'"+(n<a.length-1?",":"")}),"{"+t+(""!=r?"modifiers:["+r+"]":"")+"}"})),t&&(v=t.substr(1).split(/[$.]/).map(function(e){return"'"+e+"'"})),n});var d=[h+p+" _njIsDirective"+(m?' arguments="'+b+y+"["+m.join(",")+"]"+x+j+'"':"")+(v?' modifiers="'+y+"["+v.join(",")+"]"+x+'"':"")+(c?"":" /")];return c&&d.push((o?(g?b:"")+y+" ":"")+R(f)+(o?" "+x+(g?j:""):"")),_.push(d)," "}),params:_}}(e,l,i);s=p.elem,o=p.params}if(a){var c=[s];o&&c.push(o),r.push(c)}else r.push(s),o&&r.push(o)}var qn=/([^\s-$.]+)(([$.][^\s-$.]+)*)((-[^\s-$.]+([$.][^\s-$.]+)*)*)/;function Bn(e,n,t,r,a,l){/\/$/.test(n)&&(n=n.substr(0,n.length-1)),Wn(e,n,t,r,!0,a,l)}function Jn(e,n){n.push(e)}function Zn(p){return function(e,n,t,r,a){if(e){if(g(n)){var l=n;n=l.tmplKey,t=l.fileName,r=l.delimiters,a=l.tmplRule}var i;if(n&&(i=F.templates[n]),!i){var s,o,u=g(e);if(u&&e.main)s=e;else n&&(o=F.asts[n]),o||(u&&"nj_root"===e.type?o=e:(a||(a=r?D(r):F.tmplRule),o=Xn(),A(e)&&(e=Dn.call({tmplRule:a,outputH:p,onlyParse:!0,fileName:t},e)),dn(e._njTmpl,o,a)),n&&(F.asts[n]=o)),s=An(o.content,o,!p);i=function(e,n){var t={tmplKey:n,us:e.useString,x:F.extensions,f:F.filters,np:m,tf:v,wn:d,n:re,c:V,sp:U,r:ie,e:Y,er:ee,en:ne,aa:te,an:G,g:F.global,l:X,cf:ce};return t.us?(t.ans=le,t.es=F.escape,t.ls=oe,t.fl=ue):(t.h=F.createElement,t.H=pe,t.cp=F.components),I(e,function(e,n){0==n.indexOf("main")?(t[n]=se(t,e),b(t[n],{_njTmpl:{value:!0},tmplName:{value:e._njName}}),t["_"+n]=e):0==n.indexOf("fn")&&(t[n]=e)},!1,!1),t}(s,n),n&&(F.templates[n]=i)}return i.main}}}var Un=Zn(),Qn=Zn(!0);function Xn(){var e=L();return e.type="nj_root",e.content=[],e}function Vn(t){return function(e,n){return(t?Qn:Un)(e,n?{tmplKey:n.tmplKey?n.tmplKey:e._njTmplKey,fileName:n.fileName,delimiters:n.delimiters}:e._njTmplKey).apply(null,s(arguments,1))}}var Yn=Vn(),et=Vn(!0);function nt(a){return function(e,n){var t=(a?Qn:Un)(e,e._njTmplKey);if(n){var r=function(){return t.apply(this,k([n],arguments))};return x(n,"_njParam",{value:!0}),b(r,{_njTmpl:{value:!0}}),r}return t}}var tt=nt(),rt=nt(!0);function at(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.outputH,t=e.delimiters,r=e.fileName,a=e.isExpression,l=e.isCss,i=t?D(t):F.tmplRule;return function(){return Dn.apply({tmplRule:i,outputH:n,fileName:r,isExpression:a,isCss:l},arguments)}}function lt(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return e.outputH=!0,at(e)}G(F,{compile:Un,compileH:Qn,precompile:function(e,n,t){var r=Xn();e.quasis?e=Dn.call({tmplRule:t,outputH:n,onlyParse:!0,isExpression:e.isExpression,isCss:e.isCss},e.quasis):A(e)&&(e=Dn.call({tmplRule:t,outputH:n,onlyParse:!0},e));return dn(e._njTmpl,r,t),An(r.content,r,!n)},render:Yn,renderH:et,buildRender:tt,buildRenderH:rt});var it=at(),st=lt();function ot(){return(F.outputH?st:it).apply(null,arguments)()}var ut=at({isExpression:!0}),pt=lt({isExpression:!0});function ct(){return(F.outputH?pt:ut).apply(null,arguments)()}var ft=lt({isCss:!0});function mt(){return ft.apply(null,arguments)()}G(F,{createTaggedTmpl:at,createTaggedTmplH:lt,taggedTmpl:it,taggedTmplH:st,template:ot,expression:ct,css:mt}),G(F,{registerComponent:$,getComponentConfig:function(e){return T.get(A(e)?S[e]:e)},copyComponentConfig:function(e,n){return T.set(e,T.get(n)),e},createTmplRule:D,config:function(e){var n=e.delimiters,t=e.includeParser,r=e.createElement,a=e.outputH,l=e.textMode,i=e.noWsMode;n&&D(n,!0),t&&(F.includeParser=t),r&&(F.createElement=r),null!=a&&(F.outputH=a),null!=l&&(F.textMode=l),null!=i&&(F.noWsMode=i)}});var vt=F.global;vt.NornJ=vt.nj=F,e.compile=Un,e.compileH=Qn,e.css=mt,e.default=F,e.expression=ct,e.registerComponent=$,e.registerExtension=ge,e.registerFilter=Ce,e.render=Yn,e.renderH=et,e.taggedTmpl=it,e.taggedTmplH=st,e.template=ot,Object.defineProperty(e,"__esModule",{value:!0})});
