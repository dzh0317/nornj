/*!
* NornJ template engine v5.0.0-rc.5
* (c) 2016-2019 Joe_Sky
* Released under the MIT License.
*/
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).NornJ={})}(this,function(e){"use strict";function z(){return z["taggedTmpl"+(z.outputH?"H":"")].apply(null,arguments)}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function O(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=[],t=!0,a=!1,l=void 0;try{for(var s,i=e[Symbol.iterator]();!(t=(s=i.next()).done)&&(r.push(s.value),!n||r.length!==n);t=!0);}catch(e){a=!0,l=e}finally{try{t||null==i.return||i.return()}finally{if(a)throw l}}return r}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}z.createElement=null,z.components={},z.componentConfig=new Map,z.preAsts={},z.asts={},z.templates={},z.errorTitle="[NornJ]",z.tmplRule={},z.outputH=!1,z.global="undefined"!=typeof self?self:global,z.textTag="nj-text",z.textMode=!1,z.noWsTag="nj-noWs",z.noWsMode=!1;var t=Array.prototype.push,a=Array.prototype.slice,l=Object.prototype.hasOwnProperty,n=Object.prototype.toString,s=z.errorTitle,y=Object.defineProperty,b=Object.defineProperties;function k(e,n){return t.apply(e,n),e}function i(e,n,r){return a.call(e,n,r)}function N(e){return Array.isArray(e)}function g(e){var n=r(e);return!N(e)&&("function"===n||"object"===n&&!!e)}function o(e){return"[object Number]"===n.call(e)}function A(e){return"[object String]"===n.call(e)}var u,p=(u="length",function(e){return null==e?void 0:e[u]});function c(e){var n=p(e);return"number"==typeof n&&0<=n}function M(e,n,r,t){if(e)if(null==t&&(t=c(e)),r=r||e,t)for(var a=0,l=e.length;a<l;a++){if(!1===n.call(r,e[a],a,l))break}else for(var s=Object.keys(e),i=s.length,o=0;o<i;o++){var u=s[o];if(!1===n.call(r,e[u],u,o,i))break}}var f=/(\n|\r)?[\s\xA0]+$/;function H(e){return e.replace(f,function(e,n){return n?"\n":""})}function m(){}function v(e,n,r){if(!e)switch(r){case"ex":throw Error(s+'Extension tag "'+n+'" is undefined, please check it has been registered.');default:throw Error(s+(n||e))}}function d(e,n){switch(n){case"f":e='A filter called "'+e+'" is undefined.'}console.warn(s+e)}function _(e){console.error(s+e)}function L(){return Object.create(null)}var h=/["]+/g,x=/[']+/g;function P(e,n){if(null!=e){var r;if(null==n){var t=e[0];"'"===t?r=x:'"'===t&&(r=h)}else r=n?h:x;return r&&(e=e.replace(r,"")),e}}function j(e){return-1<e.indexOf("-")&&(e=e.replace(/-\w/g,function(e){return e.substr(1).toUpperCase()})),e}var G=Object.assign||function(e){for(var n=1,r=arguments;n<r.length;n++){var t=r[n];for(var a in t)l.call(t,a)&&(e[a]=t[a])}return e};function R(e){return e[0].toUpperCase()+e.substr(1)}function E(e){return e[0].toLowerCase()+e.substr(1)}G(z,{defineProp:y,defineProps:b,arrayPush:k,arraySlice:i,isArray:N,isObject:g,isNumber:o,isString:A,isArrayLike:c,each:M,noop:m,throwIf:v,warn:d,obj:L,toCamelCase:j,assign:G,capitalize:R,lowerFirst:E});var S=Object.freeze({defineProp:y,defineProps:b,arrayPush:k,arraySlice:i,isArray:N,isObject:g,isNumber:o,isString:A,isArrayLike:c,each:M,trimRight:H,noop:m,throwIf:v,warn:d,error:_,obj:L,clearQuot:P,toCamelCase:j,assign:G,capitalize:R,lowerFirst:E}),C=z.components,w=z.componentConfig;function $(e,n,r){var i,t=e;return g(e)||((t={})[e]={component:n,options:r}),M(t,function(e,n,r){var t;if(null!=e){var a=e.component,l=e.options,s=n.toLowerCase();w.set(C[s]=t=a||e,l)}0==r?i=t:(1==r&&(i=[i]),i.push(t))},!1,!1),i}function K(e,n){return RegExp(e,n)}function D(e){return e.replace(/\$/g,"\\$")}function I(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0,r=z.tmplRule,t=r.startRule,a=void 0===t?"{{":t,l=r.endRule,s=void 0===l?"}}":l,i=r.extensionRule,o=void 0===i?"#":i,u=r.propRule,p=void 0===u?"@":u,c=r.strPropRule,f=void 0===c?"@":c,m=r.templateRule,v=void 0===m?"template":m,d=r.tagSpRule,g=void 0===d?"#$@":d,_=r.commentRule,h=void 0===_?"#":_,x=e.start,y=e.end,b=e.extension,j=e.prop,P=e.strProp,R=e.template,E=e.tagSp,S=e.comment;x&&(a=x),y&&(s=y),b&&(o=b),j&&(p=j),P&&(f=P),R&&(v=R),E&&(g=E),null!=S&&(h=S);var C=a[0],w=s[s.length-1],T=function(e){return e.replace(/\-/g,"\\-")}(function(e){for(var n,r="",t=0,a=e.length;t<a;t++)r.indexOf(n=e[t])<0&&(r+=n);return r}(o+p+f+g)),O=D(o),k=D(p),N=D(f),A=C+a,H=s+w,L="[\\s\\S]+?",$="\\.\\.\\."+L,I=A+L+H+"|"+a+L+s,F={startRule:a,endRule:s,extensionRule:o,propRule:p,strPropRule:f,templateRule:v,tagSpRule:g,commentRule:h,firstChar:C,lastChar:w,braceParamStr:I,xmlOpenTag:K("^<([a-z"+C+T+"][^\\s>]*)[^>]*>$","i"),openTagParams:K("[\\s]+((("+A+"("+L+")"+H+")|("+a+"("+L+")"+s+"))|[^\\s=>]+)(=(('[^']+')|(\"[^\"]+\")|([^\"'\\s]+)))?","g"),exAttrs:K("[\\s]+((("+A+"("+L+")"+H+")|("+a+"("+L+")"+s+"))|((:?)("+O+"|n-)?([^\\s=>]+)))(=(('[^']+')|(\"[^\"]+\")|([^\"'\\s>]+)))?","g"),braceParam:K(I,"i"),braceParamG:K(I,"ig"),spreadProp:K("[\\s]+("+A+"[\\s]*("+$+")"+H+")|("+a+"[\\s]*("+$+")"+s+")","g"),replaceSplit:K(I),replaceParam:K("(("+A+")("+L+")"+H+")|(("+a+")("+L+")"+s+")","g"),checkElem:K("([^<>]+)|(<([a-z/!"+C+T+"][^\\s<>]*)([^<>]*)>|<)([^<]*)","ig"),extension:K("^"+O+"([^\\s]+)","i"),exAll:K("^([/]?)("+O+"|"+N+k+"|"+k+")([^\\s]+)","i"),include:K("<"+O+"include([^>]*)>","ig"),incompleteStart:K(a+"((?!"+s+")[\\s\\S])*$"),incompleteStartR:K(A+"((?!"+H+")[\\s\\S])*$"),incompleteEnd:K("^[\\s\\S]*?"+s),incompleteEndR:K("^[\\s\\S]*?"+H)};if(!n)return F;G(z.tmplRule,F)}I({},!0);var F={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},W=/[&><"']/g;var q={nbsp:" ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lt:"<",gt:">",amp:"&",quot:'"',"#x27":"'"},B=RegExp("&("+Object.keys(q).join("|")+");","g");function J(e){return null==e?"":e.replace?e.replace(B,function(e,n){return q[n]}):e}G(z,{escape:function(e){return null==e?"":e.replace?e.replace(W,function(e){return F[e]}):e},unescape:J});var Z=/^(-?([0-9]+[\.]?[0-9]+)|[0-9])$/;function U(e){if(g(e)||N(e)||o(e))return e;for(var n,r,t=/([^\s:]+)[\s]?:[\s]?([^;]+)[;]?/g;n=t.exec(e);){var a=n[1],l=n[2];r||(r={}),/^[A-Z-]+$/.test(a)&&(a=a.toLowerCase()),r[a=j(a)]=Z.test(l)?+l:l}return r}function Q(e,n,r){var t,a;n||(n=this.data);for(var l=0,s=n.length;l<s;l++)if((a=n[l])&&void 0!==(t=a[e]))return r?{_njCtx:a,val:t,prop:e}:t}function X(e,n){return null!=e&&null!=n.level&&(e+=n.level),e}function V(e,n,r){return null==e?e:e.val._njTmpl?e.val.call({_njData:n.data,_njParent:n.parent,_njIndex:n.index,_njLevel:X(r,n),_njIcp:n.icp}):e.val.call(n.data[n.data.length-1],n)}function Y(e,n,r,t,a){var l;return t.icp&&(l=Q(r,t.icp))||(l=n.cp[e]),null!=a&&l&&(l=l[a]),l||r}function ee(e,n,r,t,a){return null!=e?A(e)?Y(e.toLowerCase(),r,e,a):e:Y(n,r,t,a)}function ne(e,n){return null!=e&&""!==e?e:n}function re(e,n){var r=e.args;if(r)for(var t=r.length;t--;)n.unshift(r[t])}function te(e,n){return n?{data:n.data?k(n.data,e.data):e.data,parent:n.fallback?e:e.parent,root:e.root||e,index:"index"in n?n.index:e.index,item:"item"in n?n.item:e.item,level:e.level,getData:Q,get ctxInstance(){return this.data[this.data.length-1]},d:Q,icp:e.icp}:e}function ae(e){switch(e){case"class":e="className";break;case"for":e="htmlFor"}return e}function le(){var e="",n=G.apply(S,arguments);for(var r in n){var t=n[r];e+=" "+r+(r!==t?'="'+t+'"':" ")}return e}function se(n,r,t,a,l){return function(e){return t(n,r,e,a,l)}}function ie(a,l){return function(e,n){var r=this,t=i(arguments);return l(a,{data:r&&r._njData?k(t,r._njData):t,parent:r?r._njParent:null,index:r?r._njIndex:null,item:r?r._njItem:null,level:r?r._njLevel:null,getData:Q,d:Q,icp:function(e,n){var r;return e&&e.components&&(N(r=e.components)||(r=[r])),n&&n._njIcp&&(r=r?k(r,n._njIcp):n._njIcp),r}(e&&e._njParam?n:e,r)})}}function oe(e){if(null==e.level)return"";for(var n="",r=0;r<e.level;r++)n+="  ";return n}function ue(e){return null==e.index?"":0==e.index?"":"\n"}function pe(e){return z.createElement.apply(null,e)}function ce(e){return e._njCtx?e.val.bind(e._njCtx):e}var fe={if:function(e,n){var r;if(e&&e._njOpts&&(e=(n=e).props.condition),"false"===e&&(e=!1),e)r=n.children();else{var t=n.props;if(t){var a=t.else;if(t.elseifs){var l=t.elseifs.length;M(t.elseifs,function(e,n){if(e.value)return r=e.fn(),!1;n===l-1&&a&&(r=a())},!1,!0)}else a&&(r=a())}}return n.useString&&null==r?"":r},else:function(e){return e.subExProps.else=e.children},elseif:function(e,n){e&&e._njOpts&&(e=(n=e).props.condition||n.props.value);var r=n.subExProps;r.elseifs||(r.elseifs=[]),r.elseifs.push({value:e,fn:n.children})},switch:function(r,e){r&&r._njOpts&&(r=(e=r).props.value);var t,a=e.props,l=a.elseifs.length;return M(a.elseifs,function(e,n){if(r===e.value)return t=e.fn(),!1;n===l-1&&a.else&&(t=a.else())},!1,!0),t},each:function(e,i){e&&e._njOpts&&(e=(i=e).props.of);var o,u=i.useString,n=i.props;if(e){o=u?"":[];var p=c(e);M(e,function(e,n,r,t){var a,l={data:[e],index:p?n:r,item:e,fallback:!0};a={"@first":0===l.index,"@last":l.index===(p?r:t)-1},p||(a||(a={}),a["@key"]=n),a&&l.data.push(a);var s=i.children(l);u?o+=s:o.push(s)},!1,p),u||o.length||(o=null),o&&o.length||!n||!n.else||(o=n.else())}else n&&n.else&&(o=n.else()),u&&null==o&&(o="");return o},prop:function(e,n){var r,t=n.children();r=void 0!==t?t:!n.useString||e,n.exProps[n.outputH?ae(e):e]=r},spread:function(e,r){M(e,function(e,n){r.exProps[n]=e},!1,!1)},show:function(e){if(!e.value()){var n=e.attrs,r=e.useString;n.style||(n.style=r?"":{}),r?n.style+=(n.style?";":"")+"display:none":N(n.style)?n.style.push({display:"none"}):n.style.display="none"}},for:function(r,t,e){var a,l=1;if(r&&r._njOpts){var s=(e=r).props;Object.keys(s).forEach(function(e){var n=s[e];"to"===e?t=n:"step"===e?l=n:(r=n,a=e)})}else e.props&&(l=e.props.step||1);var n,i=e.useString;for(n=i?"":[];r<=t;r+=l){var o=e.children({data:a?[T({},a,r)]:null,index:r,fallback:!0});i?n+=o:n.push(o)}return n},obj:function(e){return e.props},list:function(){var e=arguments,n=e.length-1,r=e[n];if(0<n){var t=i(e,0,n);return r.useString&&(t=t.join("")),t}return[r.children()]},fn:function(e){var n=e.props;return function(){var r,t=arguments;if(n){r={};var a=Object.keys(n);a.forEach(function(e,n){return r[a[n]]=t[n]})}return e.children({data:[r]})}},block:function(e){return e.children()},with:function(e,n){if(e&&e._njOpts)return(n=e).children({data:[n.props]});var r=n.props;return n.children({data:[r&&r.as?T({},r.as,e):e]})},arg:function(e){var n=e.exProps;n.args||(n.args=[]),n.args.push(e.children())},css:function(e){return e.props.style}};function me(e,n){var r={onlyGlobal:!1,useString:!1,newContext:!0,exProps:!1,isProp:!1,subExProps:!1,isSub:!1,addSet:!1,useExpressionInJsx:"onlyTemplateLiteral",hasName:!0,noTagName:!1,hasAttrs:!0,hasTmplCtx:!0,hasOutputH:!1};return e&&(r=G(r,e)),n&&(r=G(r,n)),r}var ve={onlyGlobal:!0,newContext:!1,hasName:!1,hasAttrs:!1,hasTmplCtx:!1},de={if:me(ve),else:me(ve,{subExProps:!0,isSub:!0}),switch:me(ve,{needPrefix:"onlyUpperCase"}),each:me(ve,{newContext:{item:"item",index:"index",datas:{first:["@first","first"],last:["@last","last"]}}}),for:me(ve,{newContext:{index:"index",getDatasFromProp:{except:["to","step","index"]}}}),prop:me(ve,{exProps:!0,subExProps:!0,isProp:!0,needPrefix:!0}),obj:me(ve,{needPrefix:!0}),fn:me(ve,{newContext:!0,needPrefix:!0}),with:me(ve,{newContext:{getDatasFromProp:!0}}),style:{useExpressionInJsx:!1,needPrefix:!0}};function ge(e,n,r,a){var t=e;g(e)||((t={})[e]={extension:n,options:r}),M(t,function(e,n){if(e){var r=e.extension,t=e.options;r?fe[n]=r:a||(fe[n]=e),a?(de[n]||(de[n]=me()),G(de[n],t)):de[n]=me(t)}},!1,!1)}de.elseif=me(de.else),de.spread=me(de.prop),de.list=me(de.obj),de.block=me(de.obj),de.pre=me(de.obj),de.arg=me(de.prop),de.show=me(de.prop,{isDirective:!0,noTagName:!0,hasAttrs:!0,hasOutputH:!0}),de.css=me(de.obj),fe.case=fe.elseif,de.case=de.elseif,fe.empty=fe.default=fe.else,de.empty=de.default=de.else,fe.strProp=fe.prop,de.strProp=me(de.prop,{useString:!0}),fe.strArg=fe.arg,de.strArg=me(de.strProp),fe.pre=fe.block,de.pre=de.block,G(z,{extensions:fe,extensionConfig:de,registerExtension:ge});var _e=/(\d{3})(?=\d)/g,he={".":function(e,n,r){return null==e?e:e._njCtx?{_njCtx:e.val,val:e.val[n],prop:n}:r?{obj:e,prop:n}:e[n]},_:function(e,n){return e&&null!=e.obj[e.prop]?e.obj[e.prop].apply(e.obj,n):null},"#":function(e,n,r){return null==e?e:V({val:e[n],_njCtx:e},r.context,r.level)},"**":function(e,n){return Math.pow(e,n)},"%%":function(e,n){return Math.floor(e/n)},"?:":function(e,n,r){return e?n:r},"!":function(e){return!e},int:function(e){return parseInt(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:10)},float:function(e){return parseFloat(e)},bool:function(e){return"false"!==e&&!!e},reg:function(e,n){return RegExp(e,n)},css:function(e){return U(e)},"..":xe(1),rLt:xe(0),"<=>":function(e,n){return n<e?1:e==n?0:-1},capitalize:function(e){return R(e)},lowerFirst:function(e){return E(e)},currency:function(e,n,r){if(0>e-parseFloat(e))return je.currency.placeholder;r=null!=(r=null!=n&&"string"==typeof n?n:r)&&"string"==typeof r?r:je.currency.symbol,n=null!=n&&"number"==typeof n?n:2;var t=Math.abs(e=parseFloat(e)).toFixed(n),a=n?t.slice(0,-1-n):t,l=a.length%3,s=0<l?a.slice(0,l)+(3<a.length?",":""):"",i=n?t.slice(-1-n):"";return(e<0?"-":"")+r+s+a.slice(l).replace(_e,"$1,")+i}};function xe(r){return function(n,e){return Object.keys(Array.apply(null,{length:e-n+r})).map(function(e){return+e+n})}}function ye(e,n){var r={onlyGlobal:!1,hasOptions:!1,hasLevel:!1,hasTmplCtx:!0};return e&&(r=G(r,e)),n&&(r=G(r,n)),r}var be={onlyGlobal:!0,hasOptions:!1},je={".":ye(be),_:ye({onlyGlobal:!0}),"#":ye({onlyGlobal:!0,hasOptions:!0,hasLevel:!0}),"**":ye(be),"%%":ye(be),"?:":ye(be),"!":ye(be),int:ye(be),float:ye(be),bool:ye(be),reg:ye(be),css:ye(be),"..":ye(be),rLt:ye(be),"<=>":ye(be),capitalize:ye(be),lowerFirst:ye(be),currency:ye(be,{symbol:"$",placeholder:""})},Pe=/\*|\||\/|\.|\?|\+/g;function Re(e,n,r,a){var t=e;g(e)||((t={})[e]={filter:n,options:r}),M(t,function(e,n){if(e){var r=e.filter,t=e.options;r?he[n]=r:a||(he[n]=e),a?(je[n]||(je[n]=ye()),G(je[n],t)):je[n]=ye(t)}},!1,!1)}z.REGEX_OPERATORS=RegExp(["+=","+","-[0-9]","-","**","*","%%","%","===","!==","==","!=","<=>","<=",">=","=","..<","<",">","&&","||","?:","?",":","../","..","/"].map(function(e){return e.replace(Pe,function(e){return"\\"+e})}).join("|"),"g"),G(z,{filters:he,filterConfig:je,registerFilter:Re});var Ee=/('[^']*')|("[^"]*")|(-?[0-9][0-9]*(\.\d+)?)|true|false|null|undefined|Object|Array|Math|Date|JSON|(([a-zA-Z_$#@])([a-zA-Z_$\d]*))/,Se=/_njQs(\d+)_/g,Ce=/_njSet_/;function we(e,s,i,o){var n=L();if(0<=e.indexOf("|")){var r,u=[];e=(r=e.split("|"))[0].trim(),M(r=r.slice(1),function(e){if(""!==(e=e.trim())){var n=function(e){return e.split("'bracket_")}(e),r=L(),t=n[0].trim();if(t){var a=n[1];if(null!=a){var l=[];M(s[a].split(","),function(e){""!==e&&(l[l.length]=we(e.trim(),s,i,o))},!1,!0),r.params=l}r.name=t,u.push(r)}}},!1,!0),n.filters=u}if(0==(e=function(e,r){return e.replace(Se,function(e,n){return r[n]})}(e,i)).indexOf("../")){var t=0;e=e.replace(/\.\.\//g,function(){return t++,""}),n.parentNum=t}if(""!==e){var a=Ee.exec(e),l="#"===a[6];n.name=l?a[7]:a[0],a[5]||(n.isBasicType=!0),l&&(n.isComputed=!0),n.name=n.name.replace(Ce,function(){return n.hasSet=!0,""})}else n.isEmpty=!0;return n}var Te=/_nj(L|G)t_/g,Oe={_njLt_:"<",_njGt_:">"},ke=/"[^"]*"|'[^']*'/g,Ne={"||":"or","..<":"rLt"},Ae=/[\s]+((\|\||\.\.<)[\s]*)/g,He={")":")_(","]":"]_("},Le=/(\)|\]|\.([^\s'"._#()|]+))[\s]*\(/g,$e=/([(,|])[\s]+/g,Ie=/\.([a-zA-Z_$#@][a-zA-Z_$\d]*)/g,Fe=/([^\s([,])(\[)/g,Ge={"[":"list(","]":")","{":"obj(","}":")"},Ke=/\[|\]|\{|\}/g,ze=/^[\s]*set[\s]+|([(,])[\s]*set[\s]+/g,Me=/^[\s]*([(]+)|([(,])[\s]*([(]+)/g,De=["../"],We=/-[0-9]/,qe=["","(","[",","];function Be(e,n,r,t){var a=e[2].trim(),l=[e[0],e[1],null,!0];return 0<r&&(l[3]=!1),t&&(a="set "+a),a=(a=a.replace(Te,function(e){return Oe[e]}).replace(ke,function(e){return n.push(e),"_njQs"+(n.length-1)+"_"})).replace(z.REGEX_OPERATORS,function(e,n){return We.test(e)?0<n&&qe.indexOf(a[n-1].trim())<0?e.split("-").join(" - "):e:De.indexOf(e)<0?" ".concat(e," "):e}).replace(Ie,function(e,n){var r="#"===n[0];r&&(n=n.substr(1));var t=n.length-1,a=0<t&&"_"===n[t];return(r?"#":".")+"('"+(a?n.substr(0,t):n)+"')"+(a?"_":"")}).replace(Fe,function(e,n,r){return n+".("}).replace(Ke,function(e){return Ge[e]}).replace(ze,function(e,n){return(n||"")+"_njSet_"}).replace(Me,function(e,n,r,t){return(r||"")+(r?t:n).replace(/[(]/g,"bracket(")}).replace(Ae,function(e,n,r){return" "+Ne[r]+" "}).replace($e,function(e,n){return n}).replace(Le,function(e,n,r){return r?".('"+r+"')_(":He[n]}),l[2]=a.trim(),l}var Je=/\(([^()]*)\)/g,Ze=/([!]+)((-?[0-9][0-9]*(\.\d+)?|[^\s,|'=]+)('bracket_\d+)?([._#]'bracket_\d+)*)/g,Ue=/[\s]+([^\s(),|"']+)[\s]+((-?[0-9][0-9]*(\.\d+)?|[^\s,|']+)('bracket_\d+)?([._#]'bracket_\d+)*)/g,Qe=/[(,]/g,Xe=/(\|)?(((\.+|_|#+)'bracket_)|[\s]+([^\s._#|]+[\s]*'bracket_))/g;function Ve(e,n){return Ye((e=e.replace(Ze,function(){var e=arguments;return n.push(Ye(e[2])),e[1]+"'bracket_"+(n.length-1)})).replace(Ue,function(){var e=arguments;return n.push(Ye(e[2]))," "+e[1]+"'bracket_"+(n.length-1)}))}function Ye(e){return(" "+e).replace(Qe,function(e){return e+" "}).replace(Xe,function(e,n,r,t,a,l){return n?e:" | "+(t||l)}).trim()}function en(a,l,e,n,r){var t=L(),s=A(a),i=s?e?["",""]:a.split(l.replaceSplit):[a],o=null,u=!1;if(s&&(i=i.map(function(e){return e.replace(/\n/g,"_njNl_").replace(/\r/g,"")})),1<i.length){var p=[];M(function(e,n,r,t,a){var l,s,i=n.replaceParam,o=0;if(t)s=[Be(l=[e,n.startRule,e],r,o,a)];else for(;l=i.exec(e);){s||(s=[]);var u=l[2];s.push(Be([l[0],u||l[5],u?l[3]:l[6]],r,o,a)),o++}return s}(a,l,p,e,r),function(e){var n=L(),r=[];u=!!e[3]&&e[0]===a;var t=function e(n,r){var t=n.replace(Je,function(e,n){return r.push(Ve(n,r)),"'bracket_"+(r.length-1)});return t!==n?e(t,r):Ve(t,r)}(e[2],r);n.prop=we(t,r,p,a),n.escape=e[1]!==l.firstChar+l.startRule,o.push(n)},!(o=[]),!0)}return t.props=o,t.strs=i,t.isAll=u,t.onlyKey=n,t}var nn=/^<[^>]+\/>$/i;var rn={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};function tn(e,n){for(var r,t,a=n.openTagParams;r=a.exec(e);){var l=r[1];if("/"!==l){t||(t=[]);var s=r[8],i=null!=r[4]?r[4]:r[6],o=!1;null!=s?s=P(s):(s=l,i||(o=!0)),r[9]||r[10]||(/\/>$/.test(s)?s=s.substr(0,s.length-2):(/>$/.test(s)||/\/$/.test(s))&&(s=s.substr(0,s.length-1)));var u=void 0;":"===l[0]&&(l=l.substr(1),u=!0),t.push({key:l,value:s,onlyBrace:i,hasColon:u,onlyKey:o})}}return t}function an(e,n,r){var t,a=n.extension.exec(e);if(a&&(t=[a[1]],!r)){var l=tn(e,n);l&&t.push(l)}return t}function ln(e,n){return e.match(n.exAll)}var sn=/^[a-z]/;function on(e){return"params"===e||"props"===e}function un(e){var n=de[e];return{isSub:!!n&&n.isSub,isProp:!!n&&n.isProp,useString:!!n&&n.useString,addSet:!!n&&n.addSet}}function pn(e,n){return 0==e.indexOf(n.propRule)}function cn(e,n){return 0==e.indexOf(n.strPropRule+n.propRule)}var fn=["style","script","textarea","pre","xmp","template","noscript",z.textTag];function mn(e,n,r,t,a){var l={type:"nj_plaintext"};l.content=[en(e,a,null,null,null!=n.ex?un(n.ex).addSet:null)],l.allowNewline=t,n[r].push(l)}var vn=/_njBp(\d+)_/g;function dn(e,r,a,l,t,n){var s="content";if(N(e)){var i={},o=e[0];if(A(o)){var u,p,c,f,m,v,d,g,_=e.length,h=e[_-1],x=!1,y=!1;if(u=an(o,a)){var b=u[0];if(p=u[1],f=function(e){return"tmpl"===e}(b),!(m=on(b))){var j=un(b);d=j.isSub,g=(v=j.isProp)?!l:d,j.useString&&(i.useString=j.useString)}i.type="nj_ex",i.ex=b,null==p||f||m||(i.args||(i.args=[]),M(p,function(e){var n=e.key,r=e.value;if("useString"!==n){if("_njIsProp"===n)return i.isDirective=i.isProp=v=!0,void(g=!l);var t=en(r,a,e.hasColon,e.onlyKey);e.onlyBrace?i.args.push(t):(i.params||(i.params=L()),i.params[n]=t)}else i.useString=!("false"===r)},!1,!0)),x=!0}else{var P=function(e,n){return n.xmlOpenTag.exec(e)}(o,a);P&&(/\/$/.test(c=P[1])&&(c=c.substr(0,c.length-1)),!function(e){return nn.test(e)}(o)?y=function(e,n){return A(e)&&e.toLowerCase()==="</"+n+">"}(h,c):i.selfCloseTag=!0,x=!0)}if(x){var R=!0;if(t&&(i.allowNewline=!0),u)f?(R=!1,function(e,n,r){var t=n.params;t||(t=n.params=L());var a=t.tmpls;if(a){var l=a.strs[0],s=l._njLen;l[null!=r?r:"_njT"+s]={node:e,no:s},l._njLen=++s}else{var i,o=(T(i={},null!=r?r:"_njT0",{node:e,no:0}),T(i,"_njLen",1),i);t.tmpls=en(o)}}(i,r,p?p[0].value:null)):(m||g)&&(R=!1),null==t&&"pre"===i.ex&&(t=!0,i.allowNewline="nlElem");else{var E=function(e,n){return n.braceParam.exec(e)}(i.type=c,a);E&&(i.typeRefer=en(E[0],a));var S=tn(o,a);S&&(i.params||(i.params=L()),M(S,function(e){i.params[e.onlyBrace?e.onlyBrace.replace(/\.\.\//g,""):e.key]=en(e.value,a,e.hasColon,e.onlyKey)},!1,!0)),i.selfCloseTag||(i.selfCloseTag=function(e){return rn[e.toLowerCase()]}(c)),null==t&&-1<fn.indexOf(c.toLowerCase())&&(t=!0,i.allowNewline="nlElem")}R&&r[s].push(i);var C=e.slice(1,_-(y?1:0));C&&C.length&&gn(C,i,a,m||l&&!v,t),(m||g)&&function(e,n,r,t){var a,l=t?"propsExS":"paramsEx";n[l]?k(n[l].content,r||t?[e]:e.content):((a=r||t?{type:"nj_ex",ex:"props",content:[e]}:e).parentType=n.type,n[l]=a)}(i,r,v,d)}else gn(e,r,a,l,t)}else N(o)&&gn(e,r,a,l,t)}else if(A(e))if(t)mn(n&&"nlElem"===r.allowNewline?H(e):e,r,s,t,a);else{var w=[];e.replace(a.braceParamG,function(e){return w.push(e),"_njBp"+(w.length-1)+"_"}).split(/\n/g).forEach(function(e,n){""!==(e=e.trim())&&mn(e.replace(vn,function(e,n){return w[n]}),r,s,t,a)})}else mn(e,r,s,t,a)}function gn(e,t,a,l,s){t.content||(t.content=[]),M(e,function(e,n,r){dn(e,t,a,l,s,n==r-1)},!1,!0)}function _n(e,n,r,t,a,l,s,i){var o="",u=null!=s?s:r.useString,p=A(t),c=p||0===t,f=1===e.length?"1":"2",m={_type:0,_params:0,_paramsE:0,_compParam:0,_dataRefer:0,_ex:0,_value:0,_filter:0,_fnH:0,_tmp:0,newContext:a};u?m._children=0:m._compParam=0,!c&&a&&(o+="p2 = p1.n(p2, p3);\n"),"2"==f&&(o+=u?"var ret = '';\n":"var ret = [];\n"),o+=On(e,n,r,m,f,l,s),"2"==f&&(o+="return ret;");try{var v=r[c?"main"+(p?t:""):"fn"+t]=Function("p1","p2","p3","p4","p5",o);p&&null!=i&&(v._njName=i)}catch(e){_("Failed to generate template function:\n\n"+e+" in\n\n"+o+"\n")}return t}function hn(e,n,r,t,a,l,s,i,o,u){var p=", useString: "+(null==n?"p1.us":n?"true":"false"),c=!e,f=t._no;if(r){var m=!e||e.newContext,v=r.isDirective||e&&e.isDirective;(c||e.exProps||r.isProp)&&(p+=", exProps: "+a),(c||e.subExProps||r.isProp)&&(p+=", subExProps: "+l),(c||e.hasName)&&(p+=", name: '"+r.ex+"'"),o&&v&&(c||!e.noTagName)&&(p+=", tagName: "+o,p+=", setTagName: function(c) { "+o+" = c }"),u&&(c||e.hasAttrs)&&(p+=", attrs: "+u),null!=i&&(p+=", props: "+i),p+=", "+(v?"value":"children")+": "+(r.content?"p1.r(p1, p2, p1.fn"+_n(r.content,r,t,++t._no,m,s,n)+", "+a+", "+l+")":"p1.np")}return"{ _njOpts: "+(0==f?"'main'":f)+(c||e.hasTmplCtx?", global: p1, context: p2":"")+(c||e.hasOutputH?", outputH: "+!t.useString:"")+p+(null!=s&&(c||e.hasLevel)?", level: "+s:"")+" }"}var xn="nj_custom",yn=["+","-","*","/","%","===","!==","==","!=","<=",">=","=","+=","<",">","&&","||","?",":"],bn=["=","+="],jn={or:"||"};function Pn(e,n,r,t){var a,l=!1,s=e.isBasicType,i=e.isComputed,o=e.hasSet;if(s)a=e.name;else{var u=e.name,p=e.parentNum,c="",f=!1;switch(u){case"@index":c="index",l=!0;break;case"@item":c="item",l=!0;break;case"this":c="data",l=function(e){return"".concat(e,"[").concat(e,".length - 1]")};break;case"@data":c="data",l=!0;break;case"@g":c="p1.g",l=xn;break;case"@root":c="(p2.root || p2)",l=xn;break;case"@context":c="p2",l=xn;break;case"@lt":c="'<'",l=xn;break;case"@gt":c="'>'",l=xn;break;case"@lb":c="'{'",l=xn;break;case"@rb":c="'}'",l=xn;break;case"@q":c="'\"'",l=xn;break;case"@sq":c='"\'"',l=xn}if(p){c||(c="data");for(var m="p2"==c,v=0;v<p;v++)c=m?c+".parent":"parent."+c;l||(f=!0)}if(l||f){var d=l===xn?c:"p2."+c;g(l)&&(d=l(d)),a=l?d:(i?"p1.c(":"")+"p2.d('"+u+"', "+d+(i||o?", true":"")+")"+(i?", p2, "+t+")":"")}else a=(i?"p1.c(":"")+"p2.d('"+u+"'"+(i||o?", 0, true":"")+")"+(i?", p2, "+t+")":"")}return a&&(a=Sn(a)),function(e,n,r,t){return n.useString?r&&t!==xn?"p1.es("+e+")":e:J(e)}(a,r,!s&&!i&&n,l)}function Rn(e){var n=jn[e];return null!=n?n:e}function En(e){return Sn(e).replace(/_njNl_/g,"\\n").replace(/'/g,"\\'")}function Sn(e){return e.replace(/\\/g,"\\\\")}function Cn(a,s,l,i){var o=a.strs[0],u="";return A(o)?(u=a.isAll||""===o?"":"'"+En(o)+"'",M(a.props,function(e,n){var r=function m(v,e,d,g,_,h){var x=v.filters&&yn.indexOf(Rn(v.filters[0].name))<0?"":e?v.name:Pn(v,d,g,h),y="";return v.filters&&v.filters.forEach(function(r,e){var n=v.filters[e+1]&&yn.indexOf(Rn(v.filters[e+1].name))<0,t=Rn(r.name);if(yn.indexOf(t)<0)if("_"===t){var a="p1.f['".concat(t,"'](").concat(y);r.params.length&&(a+=", [",r.params.forEach(function(e,n){a+=m(e,null,d,g,_,h),n<r.params.length-1&&(a+=", ")}),a+="]"),a+=")",y=n?a:(x+=a,"")}else{var l,s,i,o,u=v.isEmpty&&0==e;if("bracket"===t)l="(",s=")";else if("list"===t)l="[",s="]";else if("obj"===t)l="{ ",s=" }",i=!0;else{if("require"==t)l="require";else{var p="p1.f['".concat(t,"']");l=(o=je[t])&&o.onlyGlobal?p:"p1.cf(p2.d('".concat(t,"', 0, true) || ").concat(p).concat("",")")}l+="(",s=")"}var c=l;if(u)r.params.forEach(function(e,n){c+=m(e,i,d,g,_,h),n<r.params.length-1&&(c+=", ")});else{c+=0==e?Pn(v,d,g,h):""!==y?y:v.filters[e-1].params[0].filters?m(v.filters[e-1].params[0],null,d,g,_,h):Pn(v.filters[e-1].params[0],d,g,h),r.params&&r.params.forEach(function(e,n){c+=", ",c+=e.filters?m(e,null,d,g,_,h):Pn(e,d,g,h)});var f=v.filters[e+1];"."===t&&f&&"_"===Rn(f.name)&&(c+=", true"),o&&o.hasOptions&&(c+=", ".concat(hn(o,_,null,g,null,null,h)))}c+=s,y=n?c:(x+=c,"")}else bn.indexOf(t)<0?x+=" ".concat(t," "):x+="._njCtx.".concat(0==e?v.name:P(v.filters[e-1].params[0].name)," ").concat(t," "),v.filters[e+1]&&yn.indexOf(Rn(v.filters[e+1].name))<0||(r.params[0].filters?(x+="(",x+=m(r.params[0],null,d,g,_,h),x+=")"):x+=Pn(r.params[0],d,g,h))}),x}(e.prop,null,e.escape,s,l,i);if(a.isAll)r="("+r+")";else{var t=a.strs[n+1];r=(""===o&&0==n?"":" + ")+"("+r+")"+(""!==t?" + '"+En(t)+"'":"")}if(u+=r,a.isAll)return!1},!1,!0)):g(o)&&null!=o._njLen&&(u+="{\n",M(o,function(e,n,r,t){if("_njLen"!==n){var a=0!=n.indexOf("_njT"),l="p1.main"+_n(e.node.content,e.node,s,"T"+ ++s._noT,null,null,null,a?n:null);u+='  "'+e.no+'": '+l,a&&(u+=',\n  "'+n+'": '+l)}else u+="  length: "+e;u+=",\n",r===t-1&&(u+="  _njData: p2.data,\n                         _njParent: p2.parent,\n                         _njIndex: p2.index,\n                         _njItem: p2.item,\n                         _njLevel: p1.l("+i+", p2),\n                         _njIcp: p2.icp\n")},!1,!1),u+="}"),u}function wn(e,n,r,t,a,l,s,i,o,u){var p="var _paramsE"+n+" = {};\n",c={};return c._paramsSE=e?(c._paramsE=s,"_paramsE"+n):(c._paramsE="_paramsE"+n,i),p+=On(r.content,r,t,a,c,null,l,o,u)}function Tn(e,l,n,s,i,r,t,a){var o,u,p=e.params,c=e.paramsEx,f=e.propsExS,m=l.useString,v=c||f,d="";if(p||v){if(o=n._params++,d="var "+(u="_params"+o)+" = ",p){var g=Object.keys(p),_=g.length;d+="{\n",M(g,function(e,n){var r=Cn(p[e],l,s,i);m||"style"!==e||(r="p1.sp("+r+")");var t=En(e),a=p[e].onlyKey;m||(t=ae(t)),d+="  '"+t+"': "+(a?s?"'"+t+"'":"true":r)+(n<_-1?",\n":"")},!1,!1),d+="\n};\n"}if(v){var h,x,y=c&&f;p||(d+="{};\n"),c&&(h=n._paramsE++,d+=wn(!1,h,c,l,n,s,r,t,a,u)),f&&(x=n._paramsE++,d+=wn(!0,x,f,l,n,s,r,t,a,u)),d+=s?"\n"+u+" = p1.ans({}, _paramsE"+h+", "+u+");\n":y?"\n"+u+" = p1.an({}, _paramsE"+h+", _paramsE"+x+", "+u+");\n":"\n"+u+" = p1.an({}, _paramsE"+(null!=h?h:x)+", "+u+");\n"}else s&&(d+="\n"+u+" = p1.ans({}, "+u+");\n")}return[d,o]}function On(e,r,t,a,l,s,i,o,u){var p="";return e&&M(e,function(e){var n=e.useString;p+=function(e,n,t,r,a,l,s,i,o,u){var p="",c=t.useString;if("nj_plaintext"===e.type){var f=Cn(e.content[0],t,s,l);if(""===f)return p;var m=kn(e,n,1,a,{text:f},t,l,s,e.allowNewline,i);p+=c?m:J(m)}else if("nj_ex"===e.type){var v,d=r._ex++,g=r._dataRefer++,_="",h=de[e.ex],x="_ex"+d,y="p1.x['"+e.ex+"']";h&&h.onlyGlobal?p+="\nvar "+x+" = "+y+";\n":(p+="\nvar "+x+";\n",p+="var "+(v="_fnH"+r._fnH++)+" = p2.d('"+e.ex+"', 0, true);\n",p+="if ("+v+") {\n",p+="  "+x+" = "+v+".val;\n",p+="} else {\n",p+="  "+x+" = "+y+";\n",p+="}\n"),_+="var _dataRefer"+g+" = [\n",e.args&&M(e.args,function(e,n){var r=Cn(e,t,s,l);_+="  "+r+","},!1,!0);var b="p4",j="p5";if(a){var P=a._paramsE,R=a._paramsSE;P&&(b=P),R&&(j=R)}var E=Tn(e,t,r,!1,l,b,j,o),S=E[0],C=E[1];_+=hn(h,s,e,t,b,j,l,""!==S?"_params"+C:null,o,u),_+="\n];\n",""!==S&&(_+="p1.aa(_params"+C+", _dataRefer"+g+");\n"),p+=S+_,p+=kn(e,n,2,a,{_ex:d,_dataRefer:g,fnH:v},t,l,s,e.allowNewline,i)}else{var w,T,O,k=r._type++,N="_type"+k;if(w=e.typeRefer?(T=Cn(e.typeRefer,t,l),e.typeRefer.props[0].prop.name):e.type,c)O=T?"p1.en("+T+", '"+w+"')":"'"+w+"'";else{var A=w.toLowerCase(),H="";if(!T&&-1<A.indexOf(".")){var L=w.split(".");A=A.split(".")[0],w=L[0],H=", '"+L[1]+"'"}O=T?"p1.er("+T+", '"+A+"', p1, '"+w+"', p2)":"p1.e('"+A+"', p1, '"+w+"', p2"+H+")"}p+="\nvar _type"+k+" = "+O+";\n";var $,I,F=Tn(e,t,r,c,l,null,null,N),G=F[0],K=F[1];p+=G,p+=c?"var _children"+(I=r._children++)+" = '';\n":"var _compParam"+($=r._compParam++)+" = [_type"+k+", "+(""!==G?"_params"+K:"null")+"];\n",p+=On(e.content,e,t,r,c?{_children:"_children"+I}:{_compParam:"_compParam"+$},c&&e.type===z.noWsTag?null:null!=l?l+1:l,s,N),p+=kn(e,n,3,a,c?{_type:k,_typeS:w,_typeR:T,_params:""!==G?K:null,_children:I,_selfClose:e.selfCloseTag}:{_compParam:$},t,l,s,e.allowNewline,i)}return p}(e,r,t,a,l,s,null!=n?n:i,t._firstNode&&0==s,o,u),t._firstNode&&(t._firstNode=!1)},!1,!0),p}function kn(e,n,r,t,a,l,s,i,o,u){var p,c=l.useString,f=null!=i?i:c,m=null==s;switch(r){case 1:p=(!c||o||m?"":u?"nj_root"!==n.type?"p1.fl(p2) + ":"":"'\\n' + ")+Nn(s,l,o)+An(c,u||m)+a.text;break;case 2:p="_ex"+a._ex+".apply("+(a.fnH?a.fnH+" ? "+a.fnH+"._njCtx : p2":"p2")+", _dataRefer"+a._dataRefer+")";break;case 3:if(c)if(p=o&&"nlElem"!==o||m?"":u?"nj_root"!==n.type?"p1.fl(p2) + ":"":"'\\n' + ",e.type!==z.textTag&&e.type!==z.noWsTag){var v=Nn(s,l,o),d=e.content,g=a._typeR,_=null!=a._params;p+=v+An(c,u||m)+"'<"+(g?"' + _type"+a._type:a._typeS)+(_?(g?"":"'")+" + _params"+a._params:"")+(g||_?" + '":""),a._selfClose?p+=" />'":(p+=">'",p+=" + _children"+a._children+" + ",p+=(!d||o||m?"":"'\\n' + ")+(d?v:"")+An(c,m)+"'</"+(g?"' + _type"+a._type+" + '":a._typeS)+">'")}else p+="_children"+a._children;else p="p1.H(_compParam"+a._compParam+")"}return"1"===t?"\nreturn "+p+";":"2"===t?f?"\nret += "+p+";\n":"\nret.push("+p+");\n":t._paramsE||t._paramsSE?"\n"+p+";\n":c?"\n"+t._children+" += "+p+";\n":"\n"+t._compParam+".push("+p+");\n"}function Nn(e,n,r){var t="";if(r&&"nlElem"!==r)return t;if(n.useString&&null!=e&&0<e){t+="'";for(var a=0;a<e;a++)t+="  ";t+="' + "}return t}function An(e,n){return e&&!n?"p1.ls(p2) + ":""}var Hn=function(e,n,r){var t={useString:r,_no:0,_noT:0,_firstNode:!0};return _n(e,n,t,t._no,null,0),t},Ln=z.preAsts,$n="_njParam",In=["style","script","textarea","xmp",z.textTag],Fn=rn;function Gn(e){var n,r=""+e,t=Ln[r],s=this.outputH,i=this.tmplRule,a=this.onlyParse,l=this.fileName,o=this.isExpression,u=this.isCss;if(!t){var p=A(e)?[e]:e,c=p.length,f="",m=!1;M(p,function(e,n){var r="";if(0==n&&(o?e=(s?i.firstChar:"")+i.startRule+" "+e:u&&(e="<"+i.extensionRule+'css style="'+e)),n<c-1){var t=e.length-1,a="#"===e[t],l="..."===e.substr(t-2);m&&(m=!i["incompleteEnd"+("isR"===m?"R":"")].test(e)),m||(m=i.incompleteStartR.test(e)?"isR":i.incompleteStart.test(e)),a?e=e.substr(0,t):l&&(e=e.substr(0,t-2)),r=(a?"#":l?"...":"")+$n+n,m||(r=i.startRule+r+i.endRule)}n==c-1&&(o?e+=" "+i.endRule+(s?i.lastChar:""):u&&(e+='" />')),f+=e+r},!1,!0);var v=z.includeParser;v&&(f=v(f,l,i)),f=function(e,n){var r=n.commentRule;return e.replace(RegExp("\x3c!--"+r+"[\\s\\S]*?"+r+"--\x3e","g"),"").replace(RegExp("([\\s]+:[^\\s=>]+=(('[^']+')|(\"[^\"]+\")))|("+n.braceParamStr+")","g"),function(e,n,r,t,a,l){return(n||l).replace(Dn,function(e){return Mn[e]})})}(f,i),s||(z.textMode&&(f="<"+z.textTag+">"+f+"</"+z.textTag+">"),z.noWsMode&&(f="<"+z.noWsTag+">"+f+"</"+z.noWsTag+">")),t=function(e,n,r){var t,a,l=[],s={elem:l,elemName:"root",parent:null},i=n.checkElem,o=null;for(;t=i.exec(e);){var u=t[1],p=t[2],c=t[3],f=t[4],m=t[5];if(o){var v=o,d=O(v,4),g=d[0],_=d[1],h=d[2],x=d[3],y=!!p&&ln(c,n);y&&!y[1]&&(pn(c,n)||cn(c,n)||on(y[3])||un(y[3]).isProp)?(s=Kn(_,s),qn(g,_,h,s.elem,null,n,r)):Jn(g,_,h,s.elem,n,r),zn(x,s),o=null}if(u&&""!==u&&Zn(u,s.elem),p)if("<"!==p)if(0==p.indexOf("<!"))Zn(p,s.elem);else{var b=ln(c,n);if("/"===c[0])if(c.substr(1).toLowerCase()===a&&(a=null),b||!a){var j=s.elemName;(j.indexOf($n)<0?c==="/"+j:-1<c.indexOf($n)||"//"===c)&&(s=s.parent)}else Zn(p,s.elem);else if("/"===p[p.length-2])b||!a?Jn(p,c,f,s.elem,n,r):Zn(p,s.elem);else if(b||!a)if(!a&&Fn[c.toLowerCase()])o=[p,c,f,m];else{var P=c.toLowerCase();-1<In.indexOf(P)&&(a=P),s=Kn(c,s),qn(p,c,f,s.elem,null,n,r)}else Zn(p,s.elem)}else null==m&&(m=""),m=p+m;!o&&zn(m,s)}if(o){var R=o,E=O(R,4),S=E[0],C=E[1],w=E[2],T=E[3];Jn(S,C,w,s.elem,n,r),zn(T,s)}return l}(f,i,s),y(t,"_njParamCount",{value:c-1}),Ln[r]=t}if(a)n={_njTmpl:t,_njTmplKey:r};else{var d,g=arguments,_=t._njParamCount;if(0<_){y(d={},"_njParam",{value:!0});for(var h=0;h<_;h++)d[$n+h]=g[h+1]}b(n=d?function(){return x.apply(this,k([d],arguments))}:function(){return x.apply(this,arguments)},{_njTmpl:{value:t},_njTmplKey:{value:r}});var x=z["compile"+(s?"H":"")](n,r,null,null,i)}return n}function Kn(e,n){var r={elem:[],elemName:e,parent:n};return n.elem.push(r.elem),r}function zn(e,n){e&&""!==e&&Zn(e,n.elem)}var Mn={"<":"_njLt_",">":"_njGt_"},Dn=/>|</g;function Wn(e,n,r,t){return t.extensionRule+(e?"strProp":"prop")+" "+t.startRule+"'"+n.substr((e?t.strPropRule.length:0)+t.propRule.length)+"'"+t.endRule+r}function qn(e,n,r,t,a,l,s){var i,o,u=function(e,n){var r,t=E(e),a=de[t];return a&&(!a.needPrefix||"onlyUpperCase"==a.needPrefix&&sn.test(e))&&(r=n.extensionRule+t),r}(n,l);if(u&&(n=u),an(n,l,!0))i=e.substring(1,e.length-1),u&&(i=l.extensionRule+E(i));else if(cn(n,l))i=Wn(!0,n,r,l);else if(pn(n,l))i=Wn(!1,n,r,l);else{var p=function(e,n,g){var _,h=n.extensionRule,x=n.startRule,y=n.endRule,b=n.firstChar,j=n.lastChar,r=n.exAttrs;return{elem:e=(e=e.replace(n.spreadProp,function(e,n,r,t,a){return r&&(a=r),_||(_=[h+"props"]),_.push([h+"spread "+(r?b:"")+x+a.replace(/\.\.\./,"")+y+(r?j:"")+"/"])," "})).replace(r,function(e,n,r,t,a,l,s,i,o,u,p,c,f){if(null==u)return e;var m,v;_||(_=[h+"props"]),p=p.replace(Bn,function(e,n,r,t,a){return a&&(m=a.substr(1).split("-").map(function(e){var r,t="",a=e.split(/[$.]/);return a.forEach(function(e,n){0==n?r="name:'"+e+"'"+(n<a.length-1?",":""):t+="'"+e+"'"+(n<a.length-1?",":"")}),"{"+r+(""!=t?"modifiers:["+t+"]":"")+"}"})),r&&(v=r.substr(1).split(/[$.]/).map(function(e){return"'"+e+"'"})),n});var d=[h+p+" _njIsProp"+(m?' arguments="'+b+x+"["+m.join(",")+"]"+y+j+'"':"")+(v?' modifiers="'+x+"["+v.join(",")+"]"+y+'"':"")+(c?"":" /")];return c&&d.push((o?(g?b:"")+x+" ":"")+P(f)+(o?" "+y+(g?j:""):"")),_.push(d)," "}),params:_}}(e,l,s);i=p.elem,o=p.params}if(a){var c=[i];o&&c.push(o),t.push(c)}else t.push(i),o&&t.push(o)}var Bn=/([^\s-$.]+)(([$.][^\s-$.]+)*)((-[^\s-$.]+([$.][^\s-$.]+)*)*)/;function Jn(e,n,r,t,a,l){/\/$/.test(n)&&(n=n.substr(0,n.length-1)),qn(e,n,r,t,!0,a,l)}function Zn(e,n){n.push(e)}function Un(p){return function(e,n,r,t,a){if(e){if(g(n)){var l=n;n=l.tmplKey,r=l.fileName,t=l.delimiters,a=l.tmplRule}var s;if(n&&(s=z.templates[n]),!s){var i,o,u=g(e);if(u&&e.main)i=e;else n&&(o=z.asts[n]),o||(u&&"nj_root"===e.type?o=e:(a||(a=t?I(t):z.tmplRule),o=Vn(),A(e)&&(e=Gn.call({tmplRule:a,outputH:p,onlyParse:!0,fileName:r},e)),dn(e._njTmpl,o,a)),n&&(z.asts[n]=o)),i=Hn(o.content,o,!p);s=function(e,n){var r={tmplKey:n,us:e.useString,x:z.extensions,f:z.filters,np:m,tf:v,wn:d,n:te,c:V,sp:U,r:se,e:Y,er:ee,en:ne,aa:re,an:G,g:z.global,l:X,cf:ce};return r.us?(r.ans=le,r.es=z.escape,r.ls=oe,r.fl=ue):(r.h=z.createElement,r.H=pe,r.cp=z.components),M(e,function(e,n){0==n.indexOf("main")?(r[n]=ie(r,e),b(r[n],{_njTmpl:{value:!0},tmplName:{value:e._njName}}),r["_"+n]=e):0==n.indexOf("fn")&&(r[n]=e)},!1,!1),r}(i,n),n&&(z.templates[n]=s)}return s.main}}}var Qn=Un(),Xn=Un(!0);function Vn(){var e=L();return e.type="nj_root",e.content=[],e}function Yn(r){return function(e,n){return(r?Xn:Qn)(e,n?{tmplKey:n.tmplKey?n.tmplKey:e._njTmplKey,fileName:n.fileName,delimiters:n.delimiters}:e._njTmplKey).apply(null,i(arguments,1))}}var er=Yn(),nr=Yn(!0);function rr(a){return function(e,n){var r=(a?Xn:Qn)(e,e._njTmplKey);if(n){var t=function(){return r.apply(this,k([n],arguments))};return y(n,"_njParam",{value:!0}),b(t,{_njTmpl:{value:!0}}),t}return r}}var tr=rr(),ar=rr(!0);function lr(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.outputH,r=e.delimiters,t=e.fileName,a=e.isExpression,l=e.isCss,s=r?I(r):z.tmplRule;return function(){return Gn.apply({tmplRule:s,outputH:n,fileName:t,isExpression:a,isCss:l},arguments)}}function sr(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return e.outputH=!0,lr(e)}G(z,{compile:Qn,compileH:Xn,precompile:function(e,n,r){var t=Vn();e.quasis?e=Gn.call({tmplRule:r,outputH:n,onlyParse:!0,isExpression:e.isExpression,isCss:e.isCss},e.quasis):A(e)&&(e=Gn.call({tmplRule:r,outputH:n,onlyParse:!0},e));return dn(e._njTmpl,t,r),Hn(t.content,t,!n)},render:er,renderH:nr,buildRender:tr,buildRenderH:ar});var ir=lr(),or=sr();function ur(){return(z.outputH?or:ir).apply(null,arguments)()}var pr=lr({isExpression:!0}),cr=sr({isExpression:!0});function fr(){return(z.outputH?cr:pr).apply(null,arguments)()}var mr=sr({isCss:!0});function vr(){return mr.apply(null,arguments)()}G(z,{createTaggedTmpl:lr,createTaggedTmplH:sr,taggedTmpl:ir,taggedTmplH:or,template:ur,expression:fr,css:vr}),G(z,{registerComponent:$,getComponentConfig:function(e){return w.get(A(e)?C[e]:e)},copyComponentConfig:function(e,n){return w.set(e,w.get(n)),e},createTmplRule:I,config:function(e){var n=e.delimiters,r=e.includeParser,t=e.createElement,a=e.outputH,l=e.textMode,s=e.noWsMode;n&&I(n,!0),r&&(z.includeParser=r),t&&(z.createElement=t),null!=a&&(z.outputH=a),null!=l&&(z.textMode=l),null!=s&&(z.noWsMode=s)}});var dr=z.global;dr.NornJ=dr.nj=z,e.compile=Qn,e.compileH=Xn,e.css=vr,e.default=z,e.expression=fr,e.registerComponent=$,e.registerExtension=ge,e.registerFilter=Re,e.render=er,e.renderH=nr,e.taggedTmpl=ir,e.taggedTmplH=or,e.template=ur,Object.defineProperty(e,"__esModule",{value:!0})});
