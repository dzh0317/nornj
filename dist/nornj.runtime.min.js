/*!
* NornJ template engine v5.0.0-rc.7
* (c) 2016-2019 Joe_Sky
* Released under the MIT License.
*/
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).NornJ={})}(this,function(e){"use strict";function u(){return u["taggedTmpl"+(u.outputH?"H":"")].apply(null,arguments)}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}u.createElement=null,u.components={},u.componentConfig=new Map,u.preAsts={},u.asts={},u.templates={},u.errorTitle="[NornJ]",u.tmplRule={},u.outputH=!1,u.global="undefined"!=typeof self?self:global,u.textTag="nj-text",u.textMode=!1,u.noWsTag="nj-noWs",u.noWsMode=!1;var t=Array.prototype.push,o=Array.prototype.slice,i=Object.prototype.hasOwnProperty,n=Object.prototype.toString,a=u.errorTitle,l=Object.defineProperty,s=Object.defineProperties;function c(e,n){return t.apply(e,n),e}function f(e,n,r){return o.call(e,n,r)}function p(e){return Array.isArray(e)}function v(e){var n=r(e);return!p(e)&&("function"===n||"object"===n&&!!e)}function d(e){return"[object Number]"===n.call(e)}function g(e){return"[object String]"===n.call(e)}var m,y=(m="length",function(e){return null==e?void 0:e[m]});function h(e){var n=y(e);return"number"==typeof n&&0<=n}function b(e,n,r){if(e)if(null==r&&(r=h(e)),r)for(var t=0,o=e.length;t<o;t++){if(!1===n.call(e,e[t],t,o))break}else for(var i=Object.keys(e),a=i.length,l=0;l<a;l++){var u=i[l];if(!1===n.call(e,e[u],u,l,a))break}}var j=/(\n|\r)?[\s\xA0]+$/;function x(){}function w(e,n,r){if(!e)switch(r){case"ex":throw Error(a+'Extension tag "'+n+'" is undefined, please check it has been registered.');default:throw Error(a+(n||e))}}function _(e,n){switch(n){case"f":e='A filter called "'+e+'" is undefined.'}console.warn(a+e)}function P(){return Object.create(null)}var O=/["]+/g,S=/[']+/g;function C(e){return-1<e.indexOf("-")&&(e=e.replace(/-\w/g,function(e){return e.substr(1).toUpperCase()})),e}var N=Object.assign||function(e){for(var n=1,r=arguments;n<r.length;n++){var t=r[n];for(var o in t)i.call(t,o)&&(e[o]=t[o])}return e};function T(e){return e[0].toUpperCase()+e.substr(1)}function A(e){return e[0].toLowerCase()+e.substr(1)}N(u,{defineProp:l,defineProps:s,arrayPush:c,arraySlice:f,isArray:p,isObject:v,isNumber:d,isString:g,isArrayLike:h,each:b,noop:x,throwIf:w,warn:_,obj:P,camelCase:C,assign:N,capitalize:T,lowerFirst:A});var k=Object.freeze({defineProp:l,defineProps:s,arrayPush:c,arraySlice:f,isArray:p,isObject:v,isNumber:d,isString:g,isArrayLike:h,each:b,trimRight:function(e){return e.replace(j,function(e,n){return n?"\n":""})},noop:x,throwIf:w,warn:_,error:function(e){console.error(a+e)},obj:P,clearQuot:function(e,n){if(null!=e){var r;if(null==n){var t=e[0];"'"===t?r=S:'"'===t&&(r=O)}else r=n?O:S;return r&&(e=e.replace(r,"")),e}},camelCase:C,assign:N,capitalize:T,lowerFirst:A}),L=u.components,E=u.componentConfig;function F(e,n,r){var l,t=e;return v(e)||((t={})[e]={component:n,options:r}),b(t,function(e,n,r){var t;if(null!=e){var o=e.component,i=e.options,a=n.toLowerCase();E.set(L[a]=t=o||e,i)}0==r?l=t:(1==r&&(l=[l]),l.push(t))},!1),l}var H={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},I=/[&><"']/g;var D={nbsp:" ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lt:"<",gt:">",amp:"&",quot:'"',"#x27":"'"},K=RegExp("&("+Object.keys(D).join("|")+");","g");N(u,{escape:function(e){return null==e?"":e.replace?e.replace(I,function(e){return H[e]}):e},unescape:function(e){return null==e?"":e.replace?e.replace(K,function(e,n){return D[n]}):e}});var R=/^(-?([0-9]+[\.]?[0-9]+)|[0-9])$/;function z(e){if(v(e)||p(e)||d(e))return e;for(var n,r,t=/([^\s:]+)[\s]?:[\s]?([^;]+)[;]?/g;n=t.exec(e);){var o=n[1],i=n[2];r||(r={}),/^[A-Z-]+$/.test(o)&&(o=o.toLowerCase()),r[o=C(o)]=R.test(i)?+i:i}return r}function M(e,n,r){var t,o;n||(n=this.data);for(var i=0,a=n.length;i<a;i++)if((o=n[i])&&void 0!==(t=o[e]))return r?{source:o,value:t,prop:e,_njSrc:!0}:t}function G(e,n){return null!=e&&null!=n.level&&(e+=n.level),e}function $(e,n,r){return null==e?e:e._njTmpl?e.call({_njData:n.data,_njParent:n.parent,_njIndex:n.index,_njLevel:G(r,n),_njIcp:n.icp}):e.call(n.data[n.data.length-1],n)}function J(e,n,r,t,o){var i;return t.icp&&(i=M(r,t.icp))||(i=n.cp[e]),null!=o&&i&&(i=i[o]),i||r}function U(e,n,r,t,o){return null!=e?g(e)?J(e.toLowerCase(),r,e,o):e:J(n,r,t,o)}function W(e,n){return null!=e&&""!==e?e:n}function q(e,n){var r=e.args;if(r)for(var t=r.length;t--;)n.unshift(r[t])}function Q(e,n){return n?{data:n.data?c(n.data,e.data):e.data,parent:n.newParent?e:e.parent,root:e.root||e,index:"index"in n?n.index:e.index,item:"item"in n?n.item:e.item,level:e.level,getData:M,get $this(){return this.data[this.data.length-1]},d:M,icp:e.icp}:e}function Z(){var e="",n=N.apply(k,arguments);for(var r in n){var t=n[r];e+=" "+r+(r!==t?'="'+t+'"':" ")}return e}function B(n,r,t){return function(e){return t(n,r,e)}}function V(o,i){return function(e,n){var r=this,t=f(arguments);return i(o,{data:r&&r._njData?c(t,r._njData):t,parent:r?r._njParent:null,index:r?r._njIndex:null,item:r?r._njItem:null,level:r?r._njLevel:null,getData:M,d:M,icp:function(e,n){var r;return e&&e.components&&(p(r=e.components)||(r=[r])),n&&n._njIcp&&(r=r?c(r,n._njIcp):n._njIcp),r}(e&&e._njParam?n:e,r)})}}function X(e){if(null==e.level)return"";for(var n="",r=0;r<e.level;r++)n+="  ";return n}function Y(e){return null==e.index?"":0==e.index?"":"\n"}function ee(e){return u.createElement.apply(null,e)}function ne(e){return e.source?e.value.bind(e.source):e}var re={if:function(e,n){var r;if(e&&e._njOpts&&(e=(n=e).props.condition),"false"===e&&(e=!1),e)r=n.children();else{var t=n.props;if(t){var o=t.else;if(t.elseifs){var i=t.elseifs.length;b(t.elseifs,function(e,n){if(e.value)return r=e.fn(),!1;n===i-1&&o&&(r=o())},!0)}else o&&(r=o())}}return n.useString&&null==r?"":r},else:function(e){return e.tagProps.else=e.children},elseif:function(e,n){e&&e._njOpts&&(e=(n=e).props.condition||n.props.value);var r=n.tagProps;r.elseifs||(r.elseifs=[]),r.elseifs.push({value:e,fn:n.children})},switch:function(r,e){r&&r._njOpts&&(r=(e=r).props.value);var t,o=e.props,i=o.elseifs.length;return b(o.elseifs,function(e,n){if(r===e.value)return t=e.fn(),!1;n===i-1&&o.else&&(t=o.else())},!0),t},each:function(e,l){e&&e._njOpts&&(e=(l=e).props.of);var u,s=l.useString,n=l.props;if(e){u=s?"":[];var c=h(e);b(e,function(e,n,r,t){var o,i={data:[e],index:c?n:r,item:e,newParent:!0};o={"@first":0===i.index,"@last":i.index===(c?r:t)-1},c||(o||(o={}),o["@key"]=n),o&&i.data.push(o);var a=l.children(i);s?u+=a:u.push(a)},c),s||u.length||(u=null),u&&u.length||!n||!n.else||(u=n.else())}else n&&n.else&&(u=n.else()),s&&null==u&&(u="");return u},prop:function(e,n){var r,t=n.value();r=void 0!==t?t:!n.useString||e,n.tagProps[n.outputH?function(e){switch(e){case"class":e="className";break;case"for":e="htmlFor"}return e}(e):e]=r},spread:function(e,r){var t=r.tagProps;b(e,function(e,n){void 0===t[n]&&(r.tagProps[n]=e)},!1)},show:function(e){if(!e.value()){var n=e.tagProps,r=e.useString;n.style||(n.style=r?"":{}),r?n.style+=(n.style?";":"")+"display:none":p(n.style)?n.style.push({display:"none"}):n.style.display="none"}},obj:function(e){return e.props},block:function(e){return e.children()},with:function(e,n){if(e&&e._njOpts)return(n=e).children({data:[n.props]});var r=n.props;return n.children({data:[r&&r.as?function(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}({},r.as,e):e]})},arg:function(e){var n=e.tagProps;n.args||(n.args=[]),n.args.push(e.value())},css:function(e){return e.props.style}};function te(e,n){var r={onlyGlobal:!1,useString:!1,newContext:!0,isSubTag:!1,isDirective:!1,addSet:!1,useExpressionInJsx:"onlyTemplateLiteral",hasName:!0,noTagName:!1,hasTagProps:!0,hasTmplCtx:!0,hasOutputH:!1};return e&&(r=N(r,e)),n&&(r=N(r,n)),r}var oe={onlyGlobal:!0,newContext:!1,hasName:!1,hasTagProps:!1,hasTmplCtx:!1},ie={if:te(oe),else:te(oe,{isSubTag:!0,hasTagProps:!0}),switch:te(oe,{needPrefix:"onlyUpperCase"}),each:te(oe,{newContext:{item:"item",index:"index",datas:{first:["@first","first"],last:["@last","last"]}}}),prop:te(oe,{isDirective:!0,needPrefix:!0,hasTagProps:!0}),obj:te(oe,{needPrefix:!0}),with:te(oe,{newContext:{getDatasFromProp:!0}}),style:{useExpressionInJsx:!1,needPrefix:!0}};function ae(e,n,r,o){var t=e;v(e)||((t={})[e]={extension:n,options:r}),b(t,function(e,n){if(e){var r=e.extension,t=e.options;r?re[n]=r:o||(re[n]=e),o?(ie[n]||(ie[n]=te()),N(ie[n],t)):ie[n]=te(t)}},!1)}ie.elseif=te(ie.else),ie.spread=te(ie.prop),ie.block=te(ie.obj),ie.arg=te(ie.prop),ie.show=te(ie.prop,{noTagName:!0,hasOutputH:!0}),ie.css=te(ie.obj),re.for=re.each,ie.for=te(ie.each),re.case=re.elseif,ie.case=ie.elseif,re.empty=re.default=re.else,ie.empty=ie.default=ie.else,re.strProp=re.prop,ie.strProp=te(ie.prop,{useString:!0}),re.strArg=re.arg,ie.strArg=te(ie.strProp),re.pre=re.block,ie.pre=ie.block,N(u,{extensions:re,extensionConfig:ie,registerExtension:ae});var le=/(\d{3})(?=\d)/g,ue={".":function(e,n,r){return null==e?e:e._njSrc?{source:e.value,value:e.value[n],prop:n,_njSrc:!0}:r?{source:e,value:e[n],prop:n,_njSrc:!0}:e[n]},_:function(e,n){if(null==e)return e;if(e._njSrc){var r=e.source[e.prop];return null!=r?r.apply(e.source,n):r}return e.apply(null,n)},"#":function(e,n,r){return null==e?e:$(e[n],r.context,r.level)},"**":function(e,n){var r=Math.pow(e,n);return isNaN(r)?0:r},"%%":function(e,n){var r=Math.floor(e/n);return isNaN(r)?0:r},"?:":function(e,n,r){return e?n:r},"!":function(e){return!e},int:function(e){var n=parseInt(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:10);return isNaN(n)?0:n},float:function(e,n){var r=parseFloat(e);return isNaN(r)?0:null!=n?r.toFixed(n):r},bool:function(e){return"false"!==e&&!!e},reg:function(e,n){return RegExp(e,n)},css:function(e){return z(e)},"..":se(1),rLt:se(0),"<=>":function(e,n){return n<e?1:e==n?0:-1},capitalize:function(e){return T(e)},lowerFirst:function(e){return A(e)},camelCase:function(e){return C(e)},isObject:function(e){return v(e)},isNumber:function(e){return d(e)},isString:function(e){return g(e)},isArrayLike:function(e){return h(e)},currency:function(e,n,r){if(0>e-parseFloat(e))return pe.currency.placeholder;r=null!=(r=null!=n&&"string"==typeof n?n:r)&&"string"==typeof r?r:pe.currency.symbol,n=null!=n&&"number"==typeof n?n:2;var t=Math.abs(e=parseFloat(e)).toFixed(n),o=n?t.slice(0,-1-n):t,i=o.length%3,a=0<i?o.slice(0,i)+(3<o.length?",":""):"",l=n?t.slice(-1-n):"";return(e<0?"-":"")+r+a+o.slice(i).replace(le,"$1,")+l}};function se(r){return function(n,e){return Object.keys(Array.apply(null,{length:e-n+r})).map(function(e){return+e+n})}}function ce(e,n){var r={onlyGlobal:!1,hasOptions:!1,isOperator:!1,hasLevel:!1,hasTmplCtx:!0,alias:null};return e&&(r=N(r,e)),n&&(r=N(r,n)),r}var fe={onlyGlobal:!0,hasOptions:!1},pe={".":ce(fe),_:ce({onlyGlobal:!0}),"#":ce({onlyGlobal:!0,hasOptions:!0,hasLevel:!0}),"**":ce(fe),"%%":ce(fe),"?:":ce(fe),"!":ce(fe),int:ce(fe),float:ce(fe),bool:ce(fe),reg:ce(fe),css:ce(fe),"..":ce(fe),rLt:ce(fe),"<=>":ce(fe),capitalize:ce(fe),lowerFirst:ce(fe),camelCase:ce(fe),isObject:ce(fe),isNumber:ce(fe),isString:ce(fe),isArrayLike:ce(fe),currency:ce(fe,{symbol:"$",placeholder:""})};function ve(e,n,r,l){var t=e;v(e)||((t={})[e]={filter:n,options:r}),b(t,function(e,n){if(e){var r=e.filter,t=e.options;if(t){if(t.isOperator){var o=u.createRegexOperators;o&&o(n)}var i=t.alias;if(i){var a=u.createFilterAlias;a&&(a(n,i),n=i)}}r?ue[n]=r:l||(ue[n]=e),l?(pe[n]||(pe[n]=ce()),N(pe[n],t)):pe[n]=ce(t)}},!1)}function de(e){return function(e,n,r,t,o){if(e){if(v(n)){var i=n;n=i.tmplKey,i.fileName,i.delimiters,i.tmplRule}var a,l;if(n&&(a=u.templates[n]),!a)v(e)&&e.main&&(l=e),a=function(e,n){var r={tmplKey:n,us:e.useString,x:u.extensions,f:u.filters,np:x,tf:w,wn:_,n:Q,c:$,sp:z,r:B,e:J,er:U,en:W,aa:q,an:N,g:u.global,l:G,cf:ne};return r.us?(r.ans=Z,r.es=u.escape,r.ls=X,r.fl=Y):(r.h=u.createElement,r.H=ee,r.cp=u.components),b(e,function(e,n){"main"===n?(r[n]=V(r,e),s(r[n],{_njTmpl:{value:!0}}),r["_"+n]=e):0==n.indexOf("fn")&&(r[n]=e)},!1),r}(l),n&&(u.templates[n]=a);return a.main}}}N(u,{filters:ue,filterConfig:pe,registerFilter:ve});var ge=de(),me=de();function ye(r){return function(e,n){return(r?me:ge)(e,n?{tmplKey:n.tmplKey?n.tmplKey:e._njTmplKey,fileName:n.fileName,delimiters:n.delimiters}:e._njTmplKey).apply(null,f(arguments,1))}}var he=ye(),be=ye(!0);function je(o){return function(e,n){var r=(o?me:ge)(e,e._njTmplKey);if(n){var t=function(){return r.apply(this,c([n],arguments))};return l(n,"_njParam",{value:!0}),s(t,{_njTmpl:{value:!0}}),t}return r}}var xe=je(),we=je(!0);N(u,{compile:ge,compileH:me,render:he,renderH:be,buildRender:xe,buildRenderH:we}),N(u,{registerComponent:F,getComponentConfig:function(e){return E.get(g(e)?L[e]:e)},config:function(e){var n=e.createElement,r=e.outputH;n&&(u.createElement=n),null!=r&&(u.outputH=r)}});var _e=u.global;_e.NornJ=_e.nj=u,e.compile=ge,e.compileH=me,e.default=u,e.registerComponent=F,e.registerExtension=ae,e.registerFilter=ve,e.render=he,e.renderH=be,Object.defineProperty(e,"__esModule",{value:!0})});
