/*!
* NornJ template engine v5.0.0-alpha.2
* (c) 2016-2019 Joe_Sky
* Released under the MIT License.
*/
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.NornJ={})}(this,function(e){"use strict";function n(){return n["taggedTmpl"+(n.outputH?"H":"")].apply(null,arguments)}n.createElement=null,n.components={},n.componentConfig=new Map,n.preAsts={},n.asts={},n.templates={},n.errorTitle="[NornJ]",n.tmplRule={},n.outputH=!1,n.global="undefined"!=typeof self?self:global,n.textTag="nj-text",n.textMode=!1,n.noWsTag="nj-noWs",n.noWsMode=!1;var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e},o=Array.prototype.push,i=Array.prototype.slice,l=Object.prototype.hasOwnProperty,s=Object.prototype.toString,u=n.errorTitle,a=Object.defineProperty,p=Object.defineProperties;function f(e,n){return o.apply(e,n),e}function c(e,n,t){return i.call(e,n,t)}function v(e){return Array.isArray(e)}function d(e){var n=void 0===e?"undefined":t(e);return!v(e)&&("function"===n||"object"===n&&!!e)}function m(e){return"[object Number]"===s.call(e)}function y(e){return"[object String]"===s.call(e)}var b,g=(b="length",function(e){return null==e?void 0:e[b]});function x(e){var n=g(e);return"number"==typeof n&&n>=0}function j(e,n,t,r){if(e)if(null==r&&(r=x(e)),t=t||e,r)for(var o=0,i=e.length;i>o;o++){if(!1===n.call(t,e[o],o,i))break}else for(var l=Object.keys(e),s=l.length,u=0;s>u;u++){var a=l[u];if(!1===n.call(t,e[a],a,u,s))break}}var h=/(\n|\r)?[\s\xA0]+$/;function _(){}function P(e,n,t){if(!e)switch(t){case"ex":throw Error(u+'Extension tag "'+n+'" is undefined, please check it has been registered.');default:throw Error(u+(n||e))}}function w(e,n){switch(n){case"f":e='A filter called "'+e+'" is undefined.'}console.warn(u+e)}function C(){return Object.create(null)}var O=/["]+/g,E=/[']+/g;function S(e){return e.indexOf("-")>-1&&(e=e.replace(/-\w/g,function(e){return e.substr(1).toUpperCase()})),e}var k=Object.assign||function(e){for(var n=1,t=arguments;t.length>n;n++){var r=t[n];for(var o in r)l.call(r,o)&&(e[o]=r[o])}return e};function A(e){return e[0].toUpperCase()+e.substr(1)}k(n,{defineProp:a,defineProps:p,arrayPush:f,arraySlice:c,isArray:v,isObject:d,isNumber:m,isString:y,isArrayLike:x,each:j,noop:_,throwIf:P,warn:w,obj:C,toCamelCase:S,assign:k,capitalize:A});var G=Object.freeze({defineProp:a,defineProps:p,arrayPush:f,arraySlice:c,isArray:v,isObject:d,isNumber:m,isString:y,isArrayLike:x,each:j,trimRight:function(e){return e.replace(h,function(e,n){return n?"\n":""})},noop:_,throwIf:P,warn:w,error:function(e){console.error(u+e)},obj:C,clearQuot:function(e,n){if(null!=e){var t=void 0;if(null==n){var r=e[0];"'"===r?t=E:'"'===r&&(t=O)}else t=n?O:E;return t&&(e=e.replace(t,"")),e}},toCamelCase:S,assign:k,capitalize:A});function N(e,t,r){var o=e,i=void 0;return d(e)||((o={})[e]={component:t,options:r}),j(o,function(e,t,r){if(null!=e){var o=e.component,l=e.options,s=t.toLowerCase(),u=o||e;n.components[s]=u,n.componentConfig.set(u,l)}0==r?i=e:(1==r&&(i=[i]),i.push(e))},!1,!1),i}var T={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},H=/[&><"']/g;var I={nbsp:" ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lt:"<",gt:">",amp:"&",quot:'"',"#x27":"'"},R=RegExp("&("+Object.keys(I).join("|")+");","g");k(n,{escape:function(e){return null==e?"":e.replace?e.replace(H,function(e){return T[e]}):e},unescape:function(e){return null==e?"":e.replace?e.replace(R,function(e,n){return I[n]}):e}});var L=/^(-?([0-9]+[\.]?[0-9]+)|[0-9])$/;function z(e){if(d(e)||v(e)||m(e))return e;for(var n=/([^\s:]+)[\s]?:[\s]?([^;]+)[;]?/g,t=void 0,r=void 0;t=n.exec(e);){var o=t[1],i=t[2];r||(r={}),/^[A-Z-]+$/.test(o)&&(o=o.toLowerCase()),r[o=S(o)]=L.test(i)?+i:i}return r}function D(e,n,t){var r=void 0,o=void 0;n||(n=this.data);for(var i=0,l=n.length;l>i;i++)if((o=n[i])&&void 0!==(r=o[e]))return t?{_njCtx:o,val:r,prop:e}:r}function F(e,n){return null!=e&&null!=n.level&&(e+=n.level),e}function K(e,n,t){return null==e?e:e.val._njTmpl?e.val.call({_njData:n.data,_njParent:n.parent,_njIndex:n.index,_njLevel:F(t,n),_njIcp:n.icp}):e.val.call(n.data[n.data.length-1],n)}function M(e,n,t,r,o){var i=void 0;return r.icp&&(i=D(t,r.icp))||(i=n.cp[e]),null!=o&&i&&(i=i[o]),i||t}function U(e,n,t,r,o){return null!=e?y(e)?M(e.toLowerCase(),t,e,o):e:M(n,t,r,o)}function J(e,n){return null!=e&&""!==e?e:n}function W(e,n){var t=e.args;if(t)for(var r=t.length;r--;)n.unshift(t[r])}function $(e,n){return n?{data:n.data?f(n.data,e.data):e.data,parent:n.fallback?e:e.parent,root:e.root||e,index:"index"in n?n.index:e.index,item:"item"in n?n.item:e.item,level:e.level,getData:D,d:D,icp:e.icp}:e}function q(){var e="",n=k.apply(G,arguments);for(var t in n){var r=n[t];e+=" "+t+(t!==r?'="'+r+'"':" ")}return e}function Q(e,n,t,r,o){return function(i){return t(e,n,i,r,o)}}function X(e,n){return function(t,r){var o=c(arguments);return n(e,{data:this&&this._njData?f(o,this._njData):o,parent:this?this._njParent:null,index:this?this._njIndex:null,item:this?this._njItem:null,level:this?this._njLevel:null,getData:D,d:D,icp:function(e,n){var t=void 0;return e&&e.components&&(v(t=e.components)||(t=[t])),n&&n._njIcp&&(t=t?f(t,n._njIcp):n._njIcp),t}(t&&t._njParam?r:t,this)})}}function Z(e){if(null==e.level)return"";for(var n="",t=0;e.level>t;t++)n+="  ";return n}function B(e){return null==e.index?"":0==e.index?"":"\n"}function V(e){return n.createElement.apply(null,e)}function Y(e){return e._njCtx?e.val.bind(e._njCtx):e}var ee={if:function(e,n){e&&e._njOpts&&(e=(n=e).props.condition),"false"===e&&(e=!1);var t=void 0;if(n.useUnless?!e:!!e)t=n.result();else{var r=n.props;if(r){var o=r.else;if(r.elseifs){var i=r.elseifs.length;j(r.elseifs,function(e,n){if(e.value)return t=e.fn(),!1;n===i-1&&o&&(t=o())},!1,!0)}else o&&(t=o())}}return n.useString&&null==t?"":t},else:function(e){return e.subExProps.else=e.result},elseif:function(e,n){e&&e._njOpts&&(e=(n=e).props.condition||n.props.value);var t=n.subExProps;t.elseifs||(t.elseifs=[]),t.elseifs.push({value:e,fn:n.result})},switch:function(e,n){e&&e._njOpts&&(e=(n=e).props.value);var t=void 0,r=n.props,o=r.elseifs.length;return j(r.elseifs,function(n,i){if(e===n.value)return t=n.fn(),!1;i===o-1&&r.else&&(t=r.else())},!1,!0),t},unless:function(e,n){return n.useUnless=!0,ee.if(e,n)},each:function(e,n){e&&e._njOpts&&(e=(n=e).props.of);var t=n.useString,r=n.props,o=void 0;if(e){o=t?"":[];var i=x(e);j(e,function(e,r,l,s){var u={data:[e],index:i?r:l,item:e,fallback:!0},a=void 0;a={"@first":0===u.index,"@last":u.index===(i?l:s)-1},i||(a||(a={}),a["@key"]=r),a&&u.data.push(a);var p=n.result(u);t?o+=p:o.push(p)},!1,i),t||o.length||(o=null),o&&o.length||!r||!r.else||(o=r.else())}else r&&r.else&&(o=r.else()),t&&null==o&&(o="");return o},prop:function(e,n){var t=n.result(),r=void 0;r=void 0!==t?t:!n.useString||e,n.exProps[n.outputH?function(e){switch(e){case"class":e="className";break;case"for":e="htmlFor"}return e}(e):e]=r},spread:function(e,n){j(e,function(e,t){n.exProps[t]=e},!1,!1)},show:function(e){if(!e.result()){var n=e.attrs,t=e.useString;n.style||(n.style=t?"":{}),t?n.style+=(n.style?";":"")+"display:none":v(n.style)?n.style.push({display:"none"}):n.style.display="none"}},for:function(e,n,t){var o=1,i=void 0;if(e&&e._njOpts){var l=(t=e).props;Object.keys(l).forEach(function(t){var r=l[t];"to"===t?n=r:"step"===t?o=r:(e=r,i=t)})}else t.props&&(o=t.props.step||1);var s=void 0,u=t.useString;for(s=u?"":[];n>=e;e+=o){var a=t.result({data:i?[r({},i,e)]:null,index:e,fallback:!0});u?s+=a:s.push(a)}return s},obj:function(e){return e.props},list:function(){var e=arguments,n=e.length-1,t=e[n];if(n>0){var r=c(e,0,n);return t.useString&&(r=r.join("")),r}return[t.result()]},fn:function(e){var n=e.props;return function(){var t=arguments,r=void 0;if(n){r={};var o=Object.keys(n);o.forEach(function(e,n){return r[o[n]]=t[n]})}return e.result({data:[r]})}},block:function(e){return e.result()},pre:function(e){return ee.block(e)},with:function(e,n){if(e&&e._njOpts)return(n=e).result({data:[n.props]});var t=n.props;return n.result({data:[t&&t.as?r({},t.as,e):e]})},arg:function(e){var n=e.exProps;n.args||(n.args=[]),n.args.push(e.result())},once:function(e){var n=e.context.root||e.context,t=e.props,r=t&&t.name?t.name:"_njOnceCache_"+e._njFnsNo,o=n[r];return void 0===o&&(o=n[r]=e.result()),o},css:function(e){return e.props.style}};function ne(e,n){var t={onlyGlobal:!1,useString:!1,newContext:!0,exProps:!1,isProp:!1,subExProps:!1,isSub:!1,addSet:!1,useExpressionInJsx:"onlyTemplateLiteral"};return e&&(t=k(t,e)),n&&(t=k(t,n)),t}var te={onlyGlobal:!0,newContext:!1},re={if:ne(te),else:ne({onlyGlobal:!0,newContext:!1,subExProps:!0,isSub:!0}),switch:ne(te,{needPrefix:"onlyUpperCase"}),unless:ne(te),each:ne({onlyGlobal:!0,newContext:{item:"item",index:"index",datas:{first:["@first","first"],last:["@last","last"]}}}),for:ne({onlyGlobal:!0,newContext:{index:"index",getDatasFromProp:{except:["to","step","index"]}}}),prop:ne({onlyGlobal:!0,newContext:!1,exProps:!0,subExProps:!0,isProp:!0}),spread:ne({onlyGlobal:!0,newContext:!1,exProps:!0,subExProps:!0,isProp:!0}),obj:ne({onlyGlobal:!0,newContext:!1}),list:ne(te,{needPrefix:"onlyUpperCase"}),with:ne({onlyGlobal:!0,newContext:{getDatasFromProp:!0}}),style:{useExpressionInJsx:!1,needPrefix:!0}};function oe(e,n,t,r){var o=e;d(e)||((o={})[e]={extension:n,options:t}),j(o,function(e,n){if(e){var t=e.extension,o=e.options;t?ee[n]=t:r||(ee[n]=e),r?(re[n]||(re[n]={}),k(re[n],o)):re[n]=ne(o)}},!1,!1)}re.elseif=ne(re.else),re.fn=ne(re.with),re.block=ne(re.obj),re.pre=ne(re.obj,{needPrefix:!0}),re.arg=ne(re.prop),re.once=ne(re.obj),re.show=ne(re.prop),re.css=ne(re.obj),ee.case=ee.elseif,re.case=re.elseif,ee.empty=ee.default=ee.else,re.empty=re.default=re.else,ee.strProp=ee.prop,re.strProp=ne(re.prop,{useString:!0}),ee.strArg=ee.arg,re.strArg=ne(re.strProp),k(n,{extensions:ee,extensionConfig:re,registerExtension:oe});var ie={".":function(e,n,t){return null==e?e:e._njCtx?{_njCtx:e.val,val:e.val[n],prop:n}:t?{obj:e,prop:n}:e[n]},_:function(e,n){return null!=e?e.obj[e.prop].apply(e.obj,n):null},"#":function(e,n,t){return null==e?e:K({val:e[n],_njCtx:e},t.context,t.level)},"**":function(e,n){return Math.pow(e,n)},"%%":function(e,n){return Math.floor(e/n)},"?:":function(e,n,t){return e?n:t},"!":function(e){return!e},int:function(e){return parseInt(e,10)},float:function(e){return parseFloat(e)},bool:function(e){return"false"!==e&&!!e},reg:function(e,n){return RegExp(e,n)},css:function(e){return z(e)},"..":le(1),rLt:le(0),"<=>":function(e,n){return e>n?1:e==n?0:-1},capitalize:function(e){return A(e)}};function le(e){return function(n,t){return Object.keys(Array.apply(null,{length:t-n+e})).map(function(e){return+e+n})}}function se(e){var n={onlyGlobal:!1,hasOptions:!0};return e&&(n=k(n,e)),n}var ue={onlyGlobal:!0,hasOptions:!1},ae={".":se(ue),_:se({onlyGlobal:!0}),"#":se({onlyGlobal:!0}),"**":se(ue),"%%":se(ue),"?:":se(ue),"!":se(ue),int:se(ue),float:se(ue),bool:se(ue),reg:se(ue),css:se(ue),"..":se(ue),rLt:se(ue),"<=>":se(ue),capitalize:se(ue)};ie.prop=ie["."],ae.prop=ae["."];var pe=/\*|\||\/|\.|\?|\+/g;function fe(e,n,t,r){var o=e;d(e)||((o={})[e]={filter:n,options:t}),j(o,function(e,n){if(e){var t=e.filter,o=e.options;t?ie[n]=t:r||(ie[n]=e),r?(ae[n]||(ae[n]={}),k(ae[n],o)):ae[n]=se(o)}},!1,!1)}function ce(e){return function(e,t,r,o,i){if(e){if(d(t)){var l=t;t=l.tmplKey,l.fileName,l.delimiters,l.tmplRule}var s=void 0;if(t&&(s=n.templates[t]),!s){var u=void 0;d(e)&&e.main&&(u=e),s=function(e){var t={us:e.useString,x:n.extensions,f:n.filters,np:_,tf:P,wn:w,n:$,c:K,sp:z,r:Q,e:M,er:U,en:J,aa:W,an:k,g:n.global,l:F,cf:Y};return t.us?(t.ans=q,t.es=n.escape,t.ls=Z,t.fl=B):(t.h=n.createElement,t.H=V,t.cp=n.components),j(e,function(e,n){0===n.indexOf("main")?(t[n]=X(t,e),p(t[n],{_njTmpl:{value:!0},tmplName:{value:e._njName}}),t["_"+n]=e):0===n.indexOf("fn")&&(t[n]=e)},!1,!1),t}(u),t&&(n.templates[t]=s)}return s.main}}}n.REGEX_OPERATORS=RegExp(["+=","+","-[0-9]","-","**","*","%%","%","===","!==","==","!=","<=>","<=",">=","=","..<","<",">","&&","||","?:","?",":","../","..","/"].map(function(e){return e.replace(pe,function(e){return"\\"+e})}).join("|"),"g"),k(n,{filters:ie,filterConfig:ae,registerFilter:fe});var ve=ce(),de=ce();function me(e){return function(n,t){return(e?de:ve)(n,t?{tmplKey:t.tmplKey?t.tmplKey:n._njTmplKey,fileName:t.fileName,delimiters:t.delimiters}:n._njTmplKey).apply(null,c(arguments,1))}}var ye=me(),be=me(!0);function ge(e){return function(n,t){var r=(e?de:ve)(n,n._njTmplKey);if(t){var o=function(){return r.apply(this,f([t],arguments))};return p(o,{_njTmpl:{value:!0}}),o}return r}}var xe=ge(),je=ge(!0);k(n,{compile:ve,compileH:de,render:ye,renderH:be,buildRender:xe,buildRenderH:je}),k(n,{registerComponent:N,getComponentConfig:function(e){return n.componentConfig.get(y(e)?n.components[e]:e)},config:function(e){var t=e.createElement,r=e.outputH;t&&(n.createElement=t),null!=r&&(n.outputH=r)}});var he=n.global;he.NornJ=he.nj=n,e.registerComponent=N,e.default=n,e.registerExtension=oe,e.registerFilter=fe,e.compile=ve,e.compileH=de,e.render=ye,e.renderH=be,Object.defineProperty(e,"__esModule",{value:!0})});
