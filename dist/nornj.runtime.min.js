/*!
* NornJ template engine v5.0.0-rc.6
* (c) 2016-2019 Joe_Sky
* Released under the MIT License.
*/
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).NornJ={})}(this,function(e){"use strict";function s(){return s["taggedTmpl"+(s.outputH?"H":"")].apply(null,arguments)}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}s.createElement=null,s.components={},s.componentConfig=new Map,s.preAsts={},s.asts={},s.templates={},s.errorTitle="[NornJ]",s.tmplRule={},s.outputH=!1,s.global="undefined"!=typeof self?self:global,s.textTag="nj-text",s.textMode=!1,s.noWsTag="nj-noWs",s.noWsMode=!1;var r=Array.prototype.push,o=Array.prototype.slice,i=Object.prototype.hasOwnProperty,n=Object.prototype.toString,a=s.errorTitle,l=Object.defineProperty,c=Object.defineProperties;function f(e,n){return r.apply(e,n),e}function p(e,n,t){return o.call(e,n,t)}function d(e){return Array.isArray(e)}function v(e){var n=t(e);return!d(e)&&("function"===n||"object"===n&&!!e)}function m(e){return"[object Number]"===n.call(e)}function g(e){return"[object String]"===n.call(e)}var h,y=(h="length",function(e){return null==e?void 0:e[h]});function b(e){var n=y(e);return"number"==typeof n&&0<=n}function x(e,n,t,r){if(e)if(null==r&&(r=b(e)),t=t||e,r)for(var o=0,i=e.length;o<i;o++){if(!1===n.call(t,e[o],o,i))break}else for(var a=Object.keys(e),l=a.length,s=0;s<l;s++){var u=a[s];if(!1===n.call(t,e[u],u,s,l))break}}var j=/(\n|\r)?[\s\xA0]+$/;function _(){}function w(e,n,t){if(!e)switch(t){case"ex":throw Error(a+'Extension tag "'+n+'" is undefined, please check it has been registered.');default:throw Error(a+(n||e))}}function C(e,n){switch(n){case"f":e='A filter called "'+e+'" is undefined.'}console.warn(a+e)}function O(){return Object.create(null)}var P=/["]+/g,S=/[']+/g;function E(e){return-1<e.indexOf("-")&&(e=e.replace(/-\w/g,function(e){return e.substr(1).toUpperCase()})),e}var A=Object.assign||function(e){for(var n=1,t=arguments;n<t.length;n++){var r=t[n];for(var o in r)i.call(r,o)&&(e[o]=r[o])}return e};function k(e){return e[0].toUpperCase()+e.substr(1)}function T(e){return e[0].toLowerCase()+e.substr(1)}A(s,{defineProp:l,defineProps:c,arrayPush:f,arraySlice:p,isArray:d,isObject:v,isNumber:m,isString:g,isArrayLike:b,each:x,noop:_,throwIf:w,warn:C,obj:O,toCamelCase:E,assign:A,capitalize:k,lowerFirst:T});var N=Object.freeze({defineProp:l,defineProps:c,arrayPush:f,arraySlice:p,isArray:d,isObject:v,isNumber:m,isString:g,isArrayLike:b,each:x,trimRight:function(e){return e.replace(j,function(e,n){return n?"\n":""})},noop:_,throwIf:w,warn:C,error:function(e){console.error(a+e)},obj:O,clearQuot:function(e,n){if(null!=e){var t;if(null==n){var r=e[0];"'"===r?t=S:'"'===r&&(t=P)}else t=n?P:S;return t&&(e=e.replace(t,"")),e}},toCamelCase:E,assign:A,capitalize:k,lowerFirst:T}),H=s.components,F=s.componentConfig;function I(e,n,t){var l,r=e;return v(e)||((r={})[e]={component:n,options:t}),x(r,function(e,n,t){var r;if(null!=e){var o=e.component,i=e.options,a=n.toLowerCase();F.set(H[a]=r=o||e,i)}0==t?l=r:(1==t&&(l=[l]),l.push(r))},!1,!1),l}var L={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},R=/[&><"']/g;var D={nbsp:" ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lt:"<",gt:">",amp:"&",quot:'"',"#x27":"'"},K=RegExp("&("+Object.keys(D).join("|")+");","g");A(s,{escape:function(e){return null==e?"":e.replace?e.replace(R,function(e){return L[e]}):e},unescape:function(e){return null==e?"":e.replace?e.replace(K,function(e,n){return D[n]}):e}});var z=/^(-?([0-9]+[\.]?[0-9]+)|[0-9])$/;function G(e){if(v(e)||d(e)||m(e))return e;for(var n,t,r=/([^\s:]+)[\s]?:[\s]?([^;]+)[;]?/g;n=r.exec(e);){var o=n[1],i=n[2];t||(t={}),/^[A-Z-]+$/.test(o)&&(o=o.toLowerCase()),t[o=E(o)]=z.test(i)?+i:i}return t}function M(e,n,t){var r,o;n||(n=this.data);for(var i=0,a=n.length;i<a;i++)if((o=n[i])&&void 0!==(r=o[e]))return t?{_njCtx:o,val:r,prop:e}:r}function J(e,n){return null!=e&&null!=n.level&&(e+=n.level),e}function $(e,n,t){return null==e?e:e.val._njTmpl?e.val.call({_njData:n.data,_njParent:n.parent,_njIndex:n.index,_njLevel:J(t,n),_njIcp:n.icp}):e.val.call(n.data[n.data.length-1],n)}function U(e,n,t,r,o){var i;return r.icp&&(i=M(t,r.icp))||(i=n.cp[e]),null!=o&&i&&(i=i[o]),i||t}function W(e,n,t,r,o){return null!=e?g(e)?U(e.toLowerCase(),t,e,o):e:U(n,t,r,o)}function q(e,n){return null!=e&&""!==e?e:n}function Q(e,n){var t=e.args;if(t)for(var r=t.length;r--;)n.unshift(t[r])}function X(e,n){return n?{data:n.data?f(n.data,e.data):e.data,parent:n.fallback?e:e.parent,root:e.root||e,index:"index"in n?n.index:e.index,item:"item"in n?n.item:e.item,level:e.level,getData:M,get ctxInstance(){return this.data[this.data.length-1]},d:M,icp:e.icp}:e}function Z(){var e="",n=A.apply(N,arguments);for(var t in n){var r=n[t];e+=" "+t+(t!==r?'="'+r+'"':" ")}return e}function B(n,t,r,o,i){return function(e){return r(n,t,e,o,i)}}function V(o,i){return function(e,n){var t=this,r=p(arguments);return i(o,{data:t&&t._njData?f(r,t._njData):r,parent:t?t._njParent:null,index:t?t._njIndex:null,item:t?t._njItem:null,level:t?t._njLevel:null,getData:M,d:M,icp:function(e,n){var t;return e&&e.components&&(d(t=e.components)||(t=[t])),n&&n._njIcp&&(t=t?f(t,n._njIcp):n._njIcp),t}(e&&e._njParam?n:e,t)})}}function Y(e){if(null==e.level)return"";for(var n="",t=0;t<e.level;t++)n+="  ";return n}function ee(e){return null==e.index?"":0==e.index?"":"\n"}function ne(e){return s.createElement.apply(null,e)}function te(e){return e._njCtx?e.val.bind(e._njCtx):e}var re={if:function(e,n){var t;if(e&&e._njOpts&&(e=(n=e).props.condition),"false"===e&&(e=!1),e)t=n.children();else{var r=n.props;if(r){var o=r.else;if(r.elseifs){var i=r.elseifs.length;x(r.elseifs,function(e,n){if(e.value)return t=e.fn(),!1;n===i-1&&o&&(t=o())},!1,!0)}else o&&(t=o())}}return n.useString&&null==t?"":t},else:function(e){return e.attrs.else=e.children},elseif:function(e,n){e&&e._njOpts&&(e=(n=e).props.condition||n.props.value);var t=n.attrs;t.elseifs||(t.elseifs=[]),t.elseifs.push({value:e,fn:n.children})},switch:function(t,e){t&&t._njOpts&&(t=(e=t).props.value);var r,o=e.props,i=o.elseifs.length;return x(o.elseifs,function(e,n){if(t===e.value)return r=e.fn(),!1;n===i-1&&o.else&&(r=o.else())},!1,!0),r},each:function(e,l){e&&e._njOpts&&(e=(l=e).props.of);var s,u=l.useString,n=l.props;if(e){s=u?"":[];var c=b(e);x(e,function(e,n,t,r){var o,i={data:[e],index:c?n:t,item:e,fallback:!0};o={"@first":0===i.index,"@last":i.index===(c?t:r)-1},c||(o||(o={}),o["@key"]=n),o&&i.data.push(o);var a=l.children(i);u?s+=a:s.push(a)},!1,c),u||s.length||(s=null),s&&s.length||!n||!n.else||(s=n.else())}else n&&n.else&&(s=n.else()),u&&null==s&&(s="");return s},prop:function(e,n){var t,r=n.children();t=void 0!==r?r:!n.useString||e,n.attrs[n.outputH?function(e){switch(e){case"class":e="className";break;case"for":e="htmlFor"}return e}(e):e]=t},spread:function(e,t){var r=t.attrs;x(e,function(e,n){void 0===r[n]&&(t.attrs[n]=e)},!1,!1)},show:function(e){if(!e.value()){var n=e.attrs,t=e.useString;n.style||(n.style=t?"":{}),t?n.style+=(n.style?";":"")+"display:none":d(n.style)?n.style.push({display:"none"}):n.style.display="none"}},for:function(t,r,e){var o,i=1;if(t&&t._njOpts){var a=(e=t).props;Object.keys(a).forEach(function(e){var n=a[e];"to"===e?r=n:"step"===e?i=n:(t=n,o=e)})}else e.props&&(i=e.props.step||1);var n,l=e.useString;for(n=l?"":[];t<=r;t+=i){var s=e.children({data:o?[u({},o,t)]:null,index:t,fallback:!0});l?n+=s:n.push(s)}return n},obj:function(e){return e.props},list:function(){var e=arguments,n=e.length-1,t=e[n];if(0<n){var r=p(e,0,n);return t.useString&&(r=r.join("")),r}return[t.children()]},fn:function(e){var n=e.props;return function(){var t,r=arguments;if(n){t={};var o=Object.keys(n);o.forEach(function(e,n){return t[o[n]]=r[n]})}return e.children({data:[t]})}},block:function(e){return e.children()},with:function(e,n){if(e&&e._njOpts)return(n=e).children({data:[n.props]});var t=n.props;return n.children({data:[t&&t.as?u({},t.as,e):e]})},arg:function(e){var n=e.attrs;n.args||(n.args=[]),n.args.push(e.children())},css:function(e){return e.props.style}};function oe(e,n){var t={onlyGlobal:!1,useString:!1,newContext:!0,exProps:!1,isProp:!1,subExProps:!1,isSub:!1,addSet:!1,useExpressionInJsx:"onlyTemplateLiteral",hasName:!0,noTagName:!1,hasAttrs:!0,hasTmplCtx:!0,hasOutputH:!1};return e&&(t=A(t,e)),n&&(t=A(t,n)),t}var ie={onlyGlobal:!0,newContext:!1,hasName:!1,hasAttrs:!1,hasTmplCtx:!1},ae={if:oe(ie),else:oe(ie,{subExProps:!0,isSub:!0,hasAttrs:!0}),switch:oe(ie,{needPrefix:"onlyUpperCase"}),each:oe(ie,{newContext:{item:"item",index:"index",datas:{first:["@first","first"],last:["@last","last"]}}}),for:oe(ie,{newContext:{index:"index",getDatasFromProp:{except:["to","step","index"]}}}),prop:oe(ie,{exProps:!0,subExProps:!0,isProp:!0,needPrefix:!0,hasAttrs:!0}),obj:oe(ie,{needPrefix:!0}),fn:oe(ie,{newContext:!0,needPrefix:!0}),with:oe(ie,{newContext:{getDatasFromProp:!0}}),style:{useExpressionInJsx:!1,needPrefix:!0}};function le(e,n,t,o){var r=e;v(e)||((r={})[e]={extension:n,options:t}),x(r,function(e,n){if(e){var t=e.extension,r=e.options;t?re[n]=t:o||(re[n]=e),o?(ae[n]||(ae[n]=oe()),A(ae[n],r)):ae[n]=oe(r)}},!1,!1)}ae.elseif=oe(ae.else),ae.spread=oe(ae.prop),ae.list=oe(ae.obj),ae.block=oe(ae.obj),ae.pre=oe(ae.obj),ae.arg=oe(ae.prop),ae.show=oe(ae.prop,{isDirective:!0,noTagName:!0,hasAttrs:!0,hasOutputH:!0}),ae.css=oe(ae.obj),re.case=re.elseif,ae.case=ae.elseif,re.empty=re.default=re.else,ae.empty=ae.default=ae.else,re.strProp=re.prop,ae.strProp=oe(ae.prop,{useString:!0}),re.strArg=re.arg,ae.strArg=oe(ae.strProp),re.pre=re.block,ae.pre=ae.block,A(s,{extensions:re,extensionConfig:ae,registerExtension:le});var se=/(\d{3})(?=\d)/g,ue={".":function(e,n,t){return null==e?e:e._njCtx?{_njCtx:e.val,val:e.val[n],prop:n}:t?{obj:e,prop:n}:e[n]},_:function(e,n){return e&&null!=e.obj[e.prop]?e.obj[e.prop].apply(e.obj,n):null},"#":function(e,n,t){return null==e?e:$({val:e[n],_njCtx:e},t.context,t.level)},"**":function(e,n){return Math.pow(e,n)},"%%":function(e,n){return Math.floor(e/n)},"?:":function(e,n,t){return e?n:t},"!":function(e){return!e},int:function(e){return parseInt(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:10)},float:function(e){return parseFloat(e)},bool:function(e){return"false"!==e&&!!e},reg:function(e,n){return RegExp(e,n)},css:function(e){return G(e)},"..":ce(1),rLt:ce(0),"<=>":function(e,n){return n<e?1:e==n?0:-1},capitalize:function(e){return k(e)},lowerFirst:function(e){return T(e)},currency:function(e,n,t){if(0>e-parseFloat(e))return de.currency.placeholder;t=null!=(t=null!=n&&"string"==typeof n?n:t)&&"string"==typeof t?t:de.currency.symbol,n=null!=n&&"number"==typeof n?n:2;var r=Math.abs(e=parseFloat(e)).toFixed(n),o=n?r.slice(0,-1-n):r,i=o.length%3,a=0<i?o.slice(0,i)+(3<o.length?",":""):"",l=n?r.slice(-1-n):"";return(e<0?"-":"")+t+a+o.slice(i).replace(se,"$1,")+l}};function ce(t){return function(n,e){return Object.keys(Array.apply(null,{length:e-n+t})).map(function(e){return+e+n})}}function fe(e,n){var t={onlyGlobal:!1,hasOptions:!1,hasLevel:!1,hasTmplCtx:!0};return e&&(t=A(t,e)),n&&(t=A(t,n)),t}var pe={onlyGlobal:!0,hasOptions:!1},de={".":fe(pe),_:fe({onlyGlobal:!0}),"#":fe({onlyGlobal:!0,hasOptions:!0,hasLevel:!0}),"**":fe(pe),"%%":fe(pe),"?:":fe(pe),"!":fe(pe),int:fe(pe),float:fe(pe),bool:fe(pe),reg:fe(pe),css:fe(pe),"..":fe(pe),rLt:fe(pe),"<=>":fe(pe),capitalize:fe(pe),lowerFirst:fe(pe),currency:fe(pe,{symbol:"$",placeholder:""})},ve=/\*|\||\/|\.|\?|\+/g;function me(e,n,t,o){var r=e;v(e)||((r={})[e]={filter:n,options:t}),x(r,function(e,n){if(e){var t=e.filter,r=e.options;t?ue[n]=t:o||(ue[n]=e),o?(de[n]||(de[n]=fe()),A(de[n],r)):de[n]=fe(r)}},!1,!1)}function ge(e){return function(e,n,t,r,o){if(e){if(v(n)){var i=n;n=i.tmplKey,i.fileName,i.delimiters,i.tmplRule}var a,l;if(n&&(a=s.templates[n]),!a)v(e)&&e.main&&(l=e),a=function(e,n){var t={tmplKey:n,us:e.useString,x:s.extensions,f:s.filters,np:_,tf:w,wn:C,n:X,c:$,sp:G,r:B,e:U,er:W,en:q,aa:Q,an:A,g:s.global,l:J,cf:te};return t.us?(t.ans=Z,t.es=s.escape,t.ls=Y,t.fl=ee):(t.h=s.createElement,t.H=ne,t.cp=s.components),x(e,function(e,n){0==n.indexOf("main")?(t[n]=V(t,e),c(t[n],{_njTmpl:{value:!0},tmplName:{value:e._njName}}),t["_"+n]=e):0==n.indexOf("fn")&&(t[n]=e)},!1,!1),t}(l),n&&(s.templates[n]=a);return a.main}}}s.REGEX_OPERATORS=RegExp(["+=","+","-[0-9]","-","**","*","%%","%","===","!==","==","!=","<=>","<=",">=","=","..<","<",">","&&","||","?:","?",":","../","..","/"].map(function(e){return e.replace(ve,function(e){return"\\"+e})}).join("|"),"g"),A(s,{filters:ue,filterConfig:de,registerFilter:me});var he=ge(),ye=ge();function be(t){return function(e,n){return(t?ye:he)(e,n?{tmplKey:n.tmplKey?n.tmplKey:e._njTmplKey,fileName:n.fileName,delimiters:n.delimiters}:e._njTmplKey).apply(null,p(arguments,1))}}var xe=be(),je=be(!0);function _e(o){return function(e,n){var t=(o?ye:he)(e,e._njTmplKey);if(n){var r=function(){return t.apply(this,f([n],arguments))};return l(n,"_njParam",{value:!0}),c(r,{_njTmpl:{value:!0}}),r}return t}}var we=_e(),Ce=_e(!0);A(s,{compile:he,compileH:ye,render:xe,renderH:je,buildRender:we,buildRenderH:Ce}),A(s,{registerComponent:I,getComponentConfig:function(e){return F.get(g(e)?H[e]:e)},config:function(e){var n=e.createElement,t=e.outputH;n&&(s.createElement=n),null!=t&&(s.outputH=t)}});var Oe=s.global;Oe.NornJ=Oe.nj=s,e.compile=he,e.compileH=ye,e.default=s,e.registerComponent=I,e.registerExtension=le,e.registerFilter=me,e.render=xe,e.renderH=je,Object.defineProperty(e,"__esModule",{value:!0})});
