/*!
* NornJ template engine v5.0.0-alpha.1
* (c) 2016-2019 Joe_Sky
* Released under the MIT License.
*/
!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(n.NornJ={})}(this,function(n){"use strict";function e(){return e["taggedTmpl"+(e.outputH?"H":"")].apply(null,arguments)}e.createElement=null,e.components={},e.componentConfig=new Map,e.preAsts={},e.asts={},e.templates={},e.errorTitle="[NornJ]",e.tmplRule={},e.outputH=!1,e.global="undefined"!=typeof self?self:global,e.textTag="nj-text",e.textMode=!1,e.noWsTag="nj-noWs",e.noWsMode=!1;var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r=function(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n},o=Array.prototype.push,i=Array.prototype.slice,l=Object.prototype.hasOwnProperty,u=Object.prototype.toString,s=e.errorTitle,a=Object.defineProperty,f=Object.defineProperties;function p(n,e){return o.apply(n,e),n}function c(n,e,t){return i.call(n,e,t)}function v(n){return Array.isArray(n)}function d(n){var e=void 0===n?"undefined":t(n);return!v(n)&&("function"===e||"object"===e&&!!n)}function m(n){return"[object Number]"===u.call(n)}function b(n){return"[object String]"===u.call(n)}var y,g=(y="length",function(n){return null==n?void 0:n[y]});function x(n){var e=g(n);return"number"==typeof e&&e>=0}function j(n,e,t,r){if(n)if(null==r&&(r=x(n)),t=t||n,r)for(var o=0,i=n.length;i>o;o++){if(!1===e.call(t,n[o],o,i))break}else for(var l=Object.keys(n),u=l.length,s=0;u>s;s++){var a=l[s];if(!1===e.call(t,n[a],a,s,u))break}}var h=/(\n|\r)?[\s\xA0]+$/;function _(){}function w(n,e,t){if(!n)switch(t){case"ex":throw Error(s+'Extension tag "'+e+'" is undefined, please check it has been registered.');default:throw Error(s+(e||n))}}function P(n,e){switch(e){case"f":n='A filter called "'+n+'" is undefined.'}console.warn(s+n)}function C(){return Object.create(null)}var O=/["]+/g,E=/[']+/g;function S(n){return n.indexOf("-")>-1&&(n=n.replace(/-\w/g,function(n){return n.substr(1).toUpperCase()})),n}var k=Object.assign||function(n){for(var e=1,t=arguments;t.length>e;e++){var r=t[e];for(var o in r)l.call(r,o)&&(n[o]=r[o])}return n};function A(n){return n[0].toUpperCase()+n.substr(1)}k(e,{defineProp:a,defineProps:f,arrayPush:p,arraySlice:c,isArray:v,isObject:d,isNumber:m,isString:b,isArrayLike:x,each:j,noop:_,throwIf:w,warn:P,obj:C,toCamelCase:S,assign:k,capitalize:A});var G=Object.freeze({defineProp:a,defineProps:f,arrayPush:p,arraySlice:c,isArray:v,isObject:d,isNumber:m,isString:b,isArrayLike:x,each:j,trimRight:function(n){return n.replace(h,function(n,e){return e?"\n":""})},noop:_,throwIf:w,warn:P,error:function(n){console.error(s+n)},obj:C,clearQuot:function(n,e){if(null!=n){var t=void 0;if(null==e){var r=n[0];"'"===r?t=E:'"'===r&&(t=O)}else t=e?O:E;return t&&(n=n.replace(t,"")),n}},toCamelCase:S,assign:k,capitalize:A});function N(n,t,r){var o=n,i=void 0;return d(n)||((o={})[n]={component:t,options:r}),j(o,function(n,t,r){if(null!=n){var o=n.component,l=n.options,u=t.toLowerCase(),s=o||n;e.components[u]=s,e.componentConfig.set(s,l)}0==r?i=n:(1==r&&(i=[i]),i.push(n))},!1,!1),i}var T={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},H=/[&><"']/g;var I={nbsp:" ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lt:"<",gt:">",amp:"&",quot:'"',"#x27":"'"},R=RegExp("&("+Object.keys(I).join("|")+");","g");k(e,{escape:function(n){return null==n?"":n.replace?n.replace(H,function(n){return T[n]}):n},unescape:function(n){return null==n?"":n.replace?n.replace(R,function(n,e){return I[e]}):n}});var L=/^(-?([0-9]+[\.]?[0-9]+)|[0-9])$/;function z(n){if(d(n)||v(n)||m(n))return n;for(var e=/([^\s:]+)[\s]?:[\s]?([^;]+)[;]?/g,t=void 0,r=void 0;t=e.exec(n);){var o=t[1],i=t[2];r||(r={}),/^[A-Z-]+$/.test(o)&&(o=o.toLowerCase()),r[o=S(o)]=L.test(i)?+i:i}return r}function D(n,e,t){var r=void 0,o=void 0;e||(e=this.data);for(var i=0,l=e.length;l>i;i++)if((o=e[i])&&void 0!==(r=o[n]))return t?{_njCtx:o,val:r,prop:n}:r}function F(n,e){return null!=n&&null!=e.level&&(n+=e.level),n}function K(n,e,t){return null==n?n:n.val._njTmpl?n.val.call({_njData:e.data,_njParent:e.parent,_njIndex:e.index,_njLevel:F(t,e),_njIcp:e.icp}):n.val.call(e.data[e.data.length-1],e)}function M(n,e,t,r,o){var i=void 0;return r.icp&&(i=D(t,r.icp))||(i=e.cp[n]),null!=o&&i&&(i=i[o]),i||t}function J(n,e,t,r,o){return null!=n?b(n)?M(n.toLowerCase(),t,n,o):n:M(e,t,r,o)}function U(n,e){return null!=n&&""!==n?n:e}function W(n,e){var t=n.args;if(t)for(var r=t.length;r--;)e.unshift(t[r])}function $(n,e){return e?{data:e.data?p(e.data,n.data):n.data,parent:e.fallback?n:n.parent,root:n.root||n,index:"index"in e?e.index:n.index,item:"item"in e?e.item:n.item,level:n.level,getData:D,d:D,icp:n.icp}:n}function q(){var n="",e=k.apply(G,arguments);for(var t in e){var r=e[t];n+=" "+t+(t!==r?'="'+r+'"':" ")}return n}function Q(n,e,t,r,o){return function(i){return t(n,e,i,r,o)}}function X(n,e){return function(t,r){var o=c(arguments);return e(n,{data:this&&this._njData?p(o,this._njData):o,parent:this?this._njParent:null,index:this?this._njIndex:null,item:this?this._njItem:null,level:this?this._njLevel:null,getData:D,d:D,icp:function(n,e){var t=void 0;return n&&n.components&&(v(t=n.components)||(t=[t])),e&&e._njIcp&&(t=t?p(t,e._njIcp):e._njIcp),t}(t&&t._njParam?r:t,this)})}}function Z(n){if(null==n.level)return"";for(var e="",t=0;n.level>t;t++)e+="  ";return e}function B(n){return null==n.index?"":0==n.index?"":"\n"}function V(n){return e.createElement.apply(null,n)}function Y(n){return n._njCtx?n.val.bind(n._njCtx):n}var nn={if:function(n,e){n&&n._njOpts&&(n=(e=n).props.condition),"false"===n&&(n=!1);var t=void 0;if(e.useUnless?!n:!!n)t=e.result();else{var r=e.props;if(r){var o=r.else;if(r.elseifs){var i=r.elseifs.length;j(r.elseifs,function(n,e){if(n.value)return t=n.fn(),!1;e===i-1&&o&&(t=o())},!1,!0)}else o&&(t=o())}}return e.useString&&null==t?"":t},else:function(n){return n.subExProps.else=n.result},elseif:function(n,e){n&&n._njOpts&&(n=(e=n).props.condition||e.props.value);var t=e.subExProps;t.elseifs||(t.elseifs=[]),t.elseifs.push({value:n,fn:e.result})},switch:function(n,e){n&&n._njOpts&&(n=(e=n).props.value);var t=void 0,r=e.props,o=r.elseifs.length;return j(r.elseifs,function(e,i){if(n===e.value)return t=e.fn(),!1;i===o-1&&r.else&&(t=r.else())},!1,!0),t},unless:function(n,e){return e.useUnless=!0,nn.if(n,e)},each:function(n,e){n&&n._njOpts&&(n=(e=n).props.of);var t=e.useString,r=e.props,o=void 0;if(n){o=t?"":[];var i=x(n);j(n,function(n,r,l,u){var s={data:[n],index:i?r:l,item:n,fallback:!0},a=void 0;a={"@first":0===s.index,"@last":s.index===(i?l:u)-1},i||(a||(a={}),a["@key"]=r),a&&s.data.push(a);var f=e.result(s);t?o+=f:o.push(f)},!1,i),t||o.length||(o=null),o&&o.length||!r||!r.else||(o=r.else())}else r&&r.else&&(o=r.else()),t&&null==o&&(o="");return o},prop:function(n,e){var t=e.result(),r=void 0;r=void 0!==t?t:!e.useString||n,e.exProps[e.outputH?function(n){switch(n){case"class":n="className";break;case"for":n="htmlFor"}return n}(n):n]=r},spread:function(n,e){j(n,function(n,t){e.exProps[t]=n},!1,!1)},show:function(n){if(!n.result()){var e=n.attrs,t=n.useString;e.style||(e.style=t?"":{}),t?e.style+=(e.style?";":"")+"display:none":v(e.style)?e.style.push({display:"none"}):e.style.display="none"}},for:function(n,e,t){var o=1,i=void 0;if(n&&n._njOpts){var l=(t=n).props;Object.keys(l).forEach(function(t){var r=l[t];"to"===t?e=r:"step"===t?o=r:(n=r,i=t)})}else t.props&&(o=t.props.step||1);var u=void 0,s=t.useString;for(u=s?"":[];e>=n;n+=o){var a=t.result({data:i?[r({},i,n)]:null,index:n,fallback:!0});s?u+=a:u.push(a)}return u},obj:function(n){return n.props},list:function(){var n=arguments,e=n.length-1,t=n[e];if(e>0){var r=c(n,0,e);return t.useString&&(r=r.join("")),r}return[t.result()]},fn:function(n){var e=n.props;return function(){var t=arguments,r=void 0;if(e){r={};var o=Object.keys(e);o.forEach(function(n,e){return r[o[e]]=t[e]})}return n.result({data:[r]})}},block:function(n){return n.result()},pre:function(n){return nn.block(n)},with:function(n,e){if(n&&n._njOpts)return(e=n).result({data:[e.props]});var t=e.props;return e.result({data:[t&&t.as?r({},t.as,n):n]})},arg:function(n){var e=n.exProps;e.args||(e.args=[]),e.args.push(n.result())},once:function(n){var e=n.context.root||n.context,t=n.props,r=t&&t.name?t.name:"_njOnceCache_"+n._njFnsNo,o=e[r];return void 0===o&&(o=e[r]=n.result()),o},css:function(n){return n.props.style}};function en(n){var e={onlyGlobal:!1,useString:!1,newContext:!0,exProps:!1,isProp:!1,subExProps:!1,isSub:!1,addSet:!1,useExpressionInJsx:"onlyTemplateLiteral"};return n&&(e=k(e,n)),e}var tn={onlyGlobal:!0,newContext:!1},rn={if:en(tn),else:en({onlyGlobal:!0,newContext:!1,subExProps:!0,isSub:!0}),switch:en(tn),unless:en(tn),each:en({onlyGlobal:!0,newContext:{item:"item",index:"index",datas:{first:["@first","first"],last:["@last","last"]}}}),for:en({onlyGlobal:!0,newContext:{index:"index",getDatasFromProp:{except:["to","step","index"]}}}),prop:en({onlyGlobal:!0,newContext:!1,exProps:!0,subExProps:!0,isProp:!0}),spread:en({onlyGlobal:!0,newContext:!1,exProps:!0,subExProps:!0,isProp:!0}),obj:en({onlyGlobal:!0,newContext:!1}),list:en(tn),with:en({onlyGlobal:!0,newContext:{getDatasFromProp:!0}}),style:{useExpressionInJsx:!1,needPrefix:!0}};function on(n,e,t,r){var o=n;d(n)||((o={})[n]={extension:e,options:t}),j(o,function(n,e){if(n){var t=n.extension,o=n.options;t?nn[e]=t:r||(nn[e]=n),r?(rn[e]||(rn[e]={}),k(rn[e],o)):rn[e]=en(o)}},!1,!1)}rn.elseif=en(rn.else),rn.fn=en(rn.with),rn.block=en(rn.obj),rn.pre=k(en(rn.obj),{needPrefix:!0}),rn.arg=en(rn.prop),rn.once=en(rn.obj),rn.show=en(rn.prop),rn.css=en(rn.obj),nn.case=nn.elseif,rn.case=rn.elseif,nn.empty=nn.default=nn.else,rn.empty=rn.default=rn.else,nn.strProp=nn.prop,rn.strProp=k(en(rn.prop),{useString:!0}),nn.strArg=nn.arg,rn.strArg=en(rn.strProp),k(e,{extensions:nn,extensionConfig:rn,registerExtension:on});var ln={".":function(n,e,t){return null==n?n:n._njCtx?{_njCtx:n.val,val:n.val[e],prop:e}:t?{obj:n,prop:e}:n[e]},_:function(n,e){return null!=n?n.obj[n.prop].apply(n.obj,e):null},"#":function(n,e,t){return null==n?n:K({val:n[e],_njCtx:n},t.context,t.level)},"**":function(n,e){return Math.pow(n,e)},"%%":function(n,e){return Math.floor(n/e)},"?:":function(n,e,t){return n?e:t},"!":function(n){return!n},int:function(n){return parseInt(n,10)},float:function(n){return parseFloat(n)},bool:function(n){return"false"!==n&&!!n},reg:function(n,e){return RegExp(n,e)},css:function(n){return z(n)},"..":un(1),rLt:un(0),"<=>":function(n,e){return n>e?1:n==e?0:-1},capitalize:function(n){return A(n)}};function un(n){return function(e,t){return Object.keys(Array.apply(null,{length:t-e+n})).map(function(n){return+n+e})}}function sn(n){var e={onlyGlobal:!1,hasOptions:!0};return n&&(e=k(e,n)),e}var an={onlyGlobal:!0,hasOptions:!1},fn={".":sn(an),_:sn({onlyGlobal:!0}),"#":sn({onlyGlobal:!0}),"**":sn(an),"%%":sn(an),"?:":sn(an),"!":sn(an),int:sn(an),float:sn(an),bool:sn(an),reg:sn(an),css:sn(an),"..":sn(an),rLt:sn(an),"<=>":sn(an),capitalize:sn(an)};ln.prop=ln["."],fn.prop=fn["."];var pn=/\*|\||\/|\.|\?|\+/g;function cn(n,e,t,r){var o=n;d(n)||((o={})[n]={filter:e,options:t}),j(o,function(n,e){if(n){var t=n.filter,o=n.options;t?ln[e]=t:r||(ln[e]=n),r?(fn[e]||(fn[e]={}),k(fn[e],o)):fn[e]=sn(o)}},!1,!1)}function vn(n){return function(n,t,r,o,i){if(n){if(d(t)){var l=t;t=l.tmplKey,l.fileName,l.delimiters,l.tmplRule}var u=void 0;if(t&&(u=e.templates[t]),!u){var s=void 0;d(n)&&n.main&&(s=n),u=function(n){var t={us:n.useString,x:e.extensions,f:e.filters,np:_,tf:w,wn:P,n:$,c:K,sp:z,r:Q,e:M,er:J,en:U,aa:W,an:k,g:e.global,l:F,cf:Y};return t.us?(t.ans=q,t.es=e.escape,t.ls=Z,t.fl=B):(t.h=e.createElement,t.H=V,t.cp=e.components),j(n,function(n,e){0===e.indexOf("main")?(t[e]=X(t,n),f(t[e],{_njTmpl:{value:!0},tmplName:{value:n._njName}}),t["_"+e]=n):0===e.indexOf("fn")&&(t[e]=n)},!1,!1),t}(s),t&&(e.templates[t]=u)}return u.main}}}e.REGEX_OPERATORS=RegExp(["+=","+","-[0-9]","-","**","*","%%","%","===","!==","==","!=","<=>","<=",">=","=","..<","<",">","&&","||","?:","?",":","../","..","/"].map(function(n){return n.replace(pn,function(n){return"\\"+n})}).join("|"),"g"),k(e,{filters:ln,filterConfig:fn,registerFilter:cn});var dn=vn(),mn=vn();function bn(n){return function(e,t){return(n?mn:dn)(e,t?{tmplKey:t.tmplKey?t.tmplKey:e._njTmplKey,fileName:t.fileName,delimiters:t.delimiters}:e._njTmplKey).apply(null,c(arguments,1))}}var yn=bn(),gn=bn(!0);function xn(n){return function(e,t){var r=(n?mn:dn)(e,e._njTmplKey);if(t){var o=function(){return r.apply(this,p([t],arguments))};return f(o,{_njTmpl:{value:!0}}),o}return r}}var jn=xn(),hn=xn(!0);k(e,{compile:dn,compileH:mn,render:yn,renderH:gn,buildRender:jn,buildRenderH:hn}),k(e,{registerComponent:N,getComponentConfig:function(n){return e.componentConfig.get(b(n)?e.components[n]:n)},config:function(n){var t=n.createElement,r=n.outputH;t&&(e.createElement=t),null!=r&&(e.outputH=r)}});var _n=e.global;_n.NornJ=_n.nj=e,n.registerComponent=N,n.default=e,n.registerExtension=on,n.registerFilter=cn,n.compile=dn,n.compileH=mn,n.render=yn,n.renderH=gn,Object.defineProperty(n,"__esModule",{value:!0})});
