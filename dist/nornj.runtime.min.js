/*!
* NornJ template engine v5.0.0-rc.1
* (c) 2016-2019 Joe_Sky
* Released under the MIT License.
*/
!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((n=n||self).NornJ={})}(this,function(n){"use strict";function u(){return u["taggedTmpl"+(u.outputH?"H":"")].apply(null,arguments)}function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function s(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}u.createElement=null,u.components={},u.componentConfig=new Map,u.preAsts={},u.asts={},u.templates={},u.errorTitle="[NornJ]",u.tmplRule={},u.outputH=!1,u.global="undefined"!=typeof self?self:global,u.textTag="nj-text",u.textMode=!1,u.noWsTag="nj-noWs",u.noWsMode=!1;var r=Array.prototype.push,o=Array.prototype.slice,i=Object.prototype.hasOwnProperty,e=Object.prototype.toString,l=u.errorTitle,a=Object.defineProperty,p=Object.defineProperties;function c(n,e){return r.apply(n,e),n}function f(n,e,t){return o.call(n,e,t)}function v(n){return Array.isArray(n)}function d(n){var e=t(n);return!v(n)&&("function"===e||"object"===e&&!!n)}function m(n){return"[object Number]"===e.call(n)}function y(n){return"[object String]"===e.call(n)}var b,x=(b="length",function(n){return null==n?void 0:n[b]});function g(n){var e=x(n);return"number"==typeof e&&0<=e}function j(n,e,t,r){if(n)if(null==r&&(r=g(n)),t=t||n,r)for(var o=0,i=n.length;o<i;o++){if(!1===e.call(t,n[o],o,i))break}else for(var l=Object.keys(n),a=l.length,u=0;u<a;u++){var s=l[u];if(!1===e.call(t,n[s],s,u,a))break}}var h=/(\n|\r)?[\s\xA0]+$/;function _(){}function P(n,e,t){if(!n)switch(t){case"ex":throw Error(l+'Extension tag "'+e+'" is undefined, please check it has been registered.');default:throw Error(l+(e||n))}}function w(n,e){switch(e){case"f":n='A filter called "'+n+'" is undefined.'}console.warn(l+n)}function C(){return Object.create(null)}var O=/["]+/g,E=/[']+/g;function S(n){return-1<n.indexOf("-")&&(n=n.replace(/-\w/g,function(n){return n.substr(1).toUpperCase()})),n}var k=Object.assign||function(n){for(var e=1,t=arguments;e<t.length;e++){var r=t[e];for(var o in r)i.call(r,o)&&(n[o]=r[o])}return n};function A(n){return n[0].toUpperCase()+n.substr(1)}k(u,{defineProp:a,defineProps:p,arrayPush:c,arraySlice:f,isArray:v,isObject:d,isNumber:m,isString:y,isArrayLike:g,each:j,noop:_,throwIf:P,warn:w,obj:C,toCamelCase:S,assign:k,capitalize:A});var G=Object.freeze({defineProp:a,defineProps:p,arrayPush:c,arraySlice:f,isArray:v,isObject:d,isNumber:m,isString:y,isArrayLike:g,each:j,trimRight:function(n){return n.replace(h,function(n,e){return e?"\n":""})},noop:_,throwIf:P,warn:w,error:function(n){console.error(l+n)},obj:C,clearQuot:function(n,e){if(null!=n){var t;if(null==e){var r=n[0];"'"===r?t=E:'"'===r&&(t=O)}else t=e?O:E;return t&&(n=n.replace(t,"")),n}},toCamelCase:S,assign:k,capitalize:A}),N=u.components,T=u.componentConfig;function H(n,e,t){var a,r=n;return d(n)||((r={})[n]={component:e,options:t}),j(r,function(n,e,t){var r;if(null!=n){var o=n.component,i=n.options,l=e.toLowerCase();T.set(N[l]=r=o||n,i)}0==t?a=r:(1==t&&(a=[a]),a.push(r))},!1,!1),a}var I={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},R=/[&><"']/g;var L={nbsp:" ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lt:"<",gt:">",amp:"&",quot:'"',"#x27":"'"},D=RegExp("&("+Object.keys(L).join("|")+");","g");k(u,{escape:function(n){return null==n?"":n.replace?n.replace(R,function(n){return I[n]}):n},unescape:function(n){return null==n?"":n.replace?n.replace(D,function(n,e){return L[e]}):n}});var K=/^(-?([0-9]+[\.]?[0-9]+)|[0-9])$/;function z(n){if(d(n)||v(n)||m(n))return n;for(var e,t,r=/([^\s:]+)[\s]?:[\s]?([^;]+)[;]?/g;e=r.exec(n);){var o=e[1],i=e[2];t||(t={}),/^[A-Z-]+$/.test(o)&&(o=o.toLowerCase()),t[o=S(o)]=K.test(i)?+i:i}return t}function F(n,e,t){var r,o;e||(e=this.data);for(var i=0,l=e.length;i<l;i++)if((o=e[i])&&void 0!==(r=o[n]))return t?{_njCtx:o,val:r,prop:n}:r}function M(n,e){return null!=n&&null!=e.level&&(n+=e.level),n}function U(n,e,t){return null==n?n:n.val._njTmpl?n.val.call({_njData:e.data,_njParent:e.parent,_njIndex:e.index,_njLevel:M(t,e),_njIcp:e.icp}):n.val.call(e.data[e.data.length-1],e)}function J(n,e,t,r,o){var i;return r.icp&&(i=F(t,r.icp))||(i=e.cp[n]),null!=o&&i&&(i=i[o]),i||t}function W(n,e,t,r,o){return null!=n?y(n)?J(n.toLowerCase(),t,n,o):n:J(e,t,r,o)}function $(n,e){return null!=n&&""!==n?n:e}function q(n,e){var t=n.args;if(t)for(var r=t.length;r--;)e.unshift(t[r])}function Q(n,e){return e?{data:e.data?c(e.data,n.data):n.data,parent:e.fallback?n:n.parent,root:n.root||n,index:"index"in e?e.index:n.index,item:"item"in e?e.item:n.item,level:n.level,getData:F,d:F,icp:n.icp}:n}function X(){var n="",e=k.apply(G,arguments);for(var t in e){var r=e[t];n+=" "+t+(t!==r?'="'+r+'"':" ")}return n}function Z(e,t,r,o,i){return function(n){return r(e,t,n,o,i)}}function B(o,i){return function(n,e){var t=this,r=f(arguments);return i(o,{data:t&&t._njData?c(r,t._njData):r,parent:t?t._njParent:null,index:t?t._njIndex:null,item:t?t._njItem:null,level:t?t._njLevel:null,getData:F,d:F,icp:function(n,e){var t;return n&&n.components&&(v(t=n.components)||(t=[t])),e&&e._njIcp&&(t=t?c(t,e._njIcp):e._njIcp),t}(n&&n._njParam?e:n,t)})}}function V(n){if(null==n.level)return"";for(var e="",t=0;t<n.level;t++)e+="  ";return e}function Y(n){return null==n.index?"":0==n.index?"":"\n"}function nn(n){return u.createElement.apply(null,n)}function en(n){return n._njCtx?n.val.bind(n._njCtx):n}var tn={if:function(n,e){var t;if(n&&n._njOpts&&(n=(e=n).props.condition),"false"===n&&(n=!1),e.useUnless?!n:!!n)t=e.children();else{var r=e.props;if(r){var o=r.else;if(r.elseifs){var i=r.elseifs.length;j(r.elseifs,function(n,e){if(n.value)return t=n.fn(),!1;e===i-1&&o&&(t=o())},!1,!0)}else o&&(t=o())}}return e.useString&&null==t?"":t},else:function(n){return n.subExProps.else=n.children},elseif:function(n,e){n&&n._njOpts&&(n=(e=n).props.condition||e.props.value);var t=e.subExProps;t.elseifs||(t.elseifs=[]),t.elseifs.push({value:n,fn:e.children})},switch:function(t,n){t&&t._njOpts&&(t=(n=t).props.value);var r,o=n.props,i=o.elseifs.length;return j(o.elseifs,function(n,e){if(t===n.value)return r=n.fn(),!1;e===i-1&&o.else&&(r=o.else())},!1,!0),r},unless:function(n,e){return e.useUnless=!0,tn.if(n,e)},each:function(n,a){n&&n._njOpts&&(n=(a=n).props.of);var u,s=a.useString,e=a.props;if(n){u=s?"":[];var p=g(n);j(n,function(n,e,t,r){var o,i={data:[n],index:p?e:t,item:n,fallback:!0};o={"@first":0===i.index,"@last":i.index===(p?t:r)-1},p||(o||(o={}),o["@key"]=e),o&&i.data.push(o);var l=a.children(i);s?u+=l:u.push(l)},!1,p),s||u.length||(u=null),u&&u.length||!e||!e.else||(u=e.else())}else e&&e.else&&(u=e.else()),s&&null==u&&(u="");return u},prop:function(n,e){var t,r=e.children();t=void 0!==r?r:!e.useString||n,e.exProps[e.outputH?function(n){switch(n){case"class":n="className";break;case"for":n="htmlFor"}return n}(n):n]=t},spread:function(n,t){j(n,function(n,e){t.exProps[e]=n},!1,!1)},show:function(n){if(!n.value()){var e=n.attrs,t=n.useString;e.style||(e.style=t?"":{}),t?e.style+=(e.style?";":"")+"display:none":v(e.style)?e.style.push({display:"none"}):e.style.display="none"}},for:function(t,r,n){var o,i=1;if(t&&t._njOpts){var l=(n=t).props;Object.keys(l).forEach(function(n){var e=l[n];"to"===n?r=e:"step"===n?i=e:(t=e,o=n)})}else n.props&&(i=n.props.step||1);var e,a=n.useString;for(e=a?"":[];t<=r;t+=i){var u=n.children({data:o?[s({},o,t)]:null,index:t,fallback:!0});a?e+=u:e.push(u)}return e},obj:function(n){return n.props},list:function(){var n=arguments,e=n.length-1,t=n[e];if(0<e){var r=f(n,0,e);return t.useString&&(r=r.join("")),r}return[t.children()]},fn:function(n){var e=n.props;return function(){var t,r=arguments;if(e){t={};var o=Object.keys(e);o.forEach(function(n,e){return t[o[e]]=r[e]})}return n.children({data:[t]})}},block:function(n){return n.children()},pre:function(n){return tn.block(n)},with:function(n,e){if(n&&n._njOpts)return(e=n).children({data:[e.props]});var t=e.props;return e.children({data:[t&&t.as?s({},t.as,n):n]})},arg:function(n){var e=n.exProps;e.args||(e.args=[]),e.args.push(n.children())},once:function(n){var e=n.context.root||n.context,t=n.props,r=t&&t.name?t.name:"_njOnceCache_"+n.exNo,o=e[r];return void 0===o&&(o=e[r]=n.children()),o},css:function(n){return n.props.style}};function rn(n,e){var t={onlyGlobal:!1,useString:!1,newContext:!0,exProps:!1,isProp:!1,subExProps:!1,isSub:!1,addSet:!1,useExpressionInJsx:"onlyTemplateLiteral"};return n&&(t=k(t,n)),e&&(t=k(t,e)),t}var on={onlyGlobal:!0,newContext:!1},ln={if:rn(on),else:rn({onlyGlobal:!0,newContext:!1,subExProps:!0,isSub:!0}),switch:rn(on,{needPrefix:"onlyUpperCase"}),unless:rn(on),each:rn({onlyGlobal:!0,newContext:{item:"item",index:"index",datas:{first:["@first","first"],last:["@last","last"]}}}),for:rn({onlyGlobal:!0,newContext:{index:"index",getDatasFromProp:{except:["to","step","index"]}}}),prop:rn({onlyGlobal:!0,newContext:!1,exProps:!0,subExProps:!0,isProp:!0}),spread:rn({onlyGlobal:!0,newContext:!1,exProps:!0,subExProps:!0,isProp:!0}),obj:rn({onlyGlobal:!0,newContext:!1}),list:rn(on,{needPrefix:"onlyUpperCase"}),with:rn({onlyGlobal:!0,newContext:{getDatasFromProp:!0}}),style:{useExpressionInJsx:!1,needPrefix:!0}};function an(n,e,t,o){var r=n;d(n)||((r={})[n]={extension:e,options:t}),j(r,function(n,e){if(n){var t=n.extension,r=n.options;t?tn[e]=t:o||(tn[e]=n),o?(ln[e]||(ln[e]={}),k(ln[e],r)):ln[e]=rn(r)}},!1,!1)}ln.elseif=rn(ln.else),ln.fn=rn(ln.with),ln.block=rn(ln.obj),ln.pre=rn(ln.obj,{needPrefix:!0}),ln.arg=rn(ln.prop),ln.once=rn(ln.obj),ln.show=rn(ln.prop,{isDirective:!0}),ln.css=rn(ln.obj),tn.case=tn.elseif,ln.case=ln.elseif,tn.empty=tn.default=tn.else,ln.empty=ln.default=ln.else,tn.strProp=tn.prop,ln.strProp=rn(ln.prop,{useString:!0}),tn.strArg=tn.arg,ln.strArg=rn(ln.strProp),k(u,{extensions:tn,extensionConfig:ln,registerExtension:an});var un={".":function(n,e,t){return null==n?n:n._njCtx?{_njCtx:n.val,val:n.val[e],prop:e}:t?{obj:n,prop:e}:n[e]},_:function(n,e){return n&&null!=n.obj[n.prop]?n.obj[n.prop].apply(n.obj,e):null},"#":function(n,e,t){return null==n?n:U({val:n[e],_njCtx:n},t.context,t.level)},"**":function(n,e){return Math.pow(n,e)},"%%":function(n,e){return Math.floor(n/e)},"?:":function(n,e,t){return n?e:t},"!":function(n){return!n},int:function(n){return parseInt(n,10)},float:function(n){return parseFloat(n)},bool:function(n){return"false"!==n&&!!n},reg:function(n,e){return RegExp(n,e)},css:function(n){return z(n)},"..":sn(1),rLt:sn(0),"<=>":function(n,e){return e<n?1:n==e?0:-1},capitalize:function(n){return A(n)}};function sn(t){return function(e,n){return Object.keys(Array.apply(null,{length:n-e+t})).map(function(n){return+n+e})}}function pn(n){var e={onlyGlobal:!1,hasOptions:!0};return n&&(e=k(e,n)),e}var cn={onlyGlobal:!0,hasOptions:!1},fn={".":pn(cn),_:pn({onlyGlobal:!0}),"#":pn({onlyGlobal:!0}),"**":pn(cn),"%%":pn(cn),"?:":pn(cn),"!":pn(cn),int:pn(cn),float:pn(cn),bool:pn(cn),reg:pn(cn),css:pn(cn),"..":pn(cn),rLt:pn(cn),"<=>":pn(cn),capitalize:pn(cn)};un.prop=un["."],fn.prop=fn["."];var vn=/\*|\||\/|\.|\?|\+/g;function dn(n,e,t,o){var r=n;d(n)||((r={})[n]={filter:e,options:t}),j(r,function(n,e){if(n){var t=n.filter,r=n.options;t?un[e]=t:o||(un[e]=n),o?(fn[e]||(fn[e]={}),k(fn[e],r)):fn[e]=pn(r)}},!1,!1)}function mn(n){return function(n,e,t,r,o){if(n){if(d(e)){var i=e;e=i.tmplKey,i.fileName,i.delimiters,i.tmplRule}var l,a;if(e&&(l=u.templates[e]),!l)d(n)&&n.main&&(a=n),l=function(n,e){var t={tmplKey:e,us:n.useString,x:u.extensions,f:u.filters,np:_,tf:P,wn:w,n:Q,c:U,sp:z,r:Z,e:J,er:W,en:$,aa:q,an:k,g:u.global,l:M,cf:en};return t.us?(t.ans=X,t.es=u.escape,t.ls=V,t.fl=Y):(t.h=u.createElement,t.H=nn,t.cp=u.components),j(n,function(n,e){0==e.indexOf("main")?(t[e]=B(t,n),p(t[e],{_njTmpl:{value:!0},tmplName:{value:n._njName}}),t["_"+e]=n):0==e.indexOf("fn")&&(t[e]=n)},!1,!1),t}(a),e&&(u.templates[e]=l);return l.main}}}u.REGEX_OPERATORS=RegExp(["+=","+","-[0-9]","-","**","*","%%","%","===","!==","==","!=","<=>","<=",">=","=","..<","<",">","&&","||","?:","?",":","../","..","/"].map(function(n){return n.replace(vn,function(n){return"\\"+n})}).join("|"),"g"),k(u,{filters:un,filterConfig:fn,registerFilter:dn});var yn=mn(),bn=mn();function xn(t){return function(n,e){return(t?bn:yn)(n,e?{tmplKey:e.tmplKey?e.tmplKey:n._njTmplKey,fileName:e.fileName,delimiters:e.delimiters}:n._njTmplKey).apply(null,f(arguments,1))}}var gn=xn(),jn=xn(!0);function hn(o){return function(n,e){var t=(o?bn:yn)(n,n._njTmplKey);if(e){var r=function(){return t.apply(this,c([e],arguments))};return a(e,"_njParam",{value:!0}),p(r,{_njTmpl:{value:!0}}),r}return t}}var _n=hn(),Pn=hn(!0);k(u,{compile:yn,compileH:bn,render:gn,renderH:jn,buildRender:_n,buildRenderH:Pn}),k(u,{registerComponent:H,getComponentConfig:function(n){return T.get(y(n)?N[n]:n)},config:function(n){var e=n.createElement,t=n.outputH;e&&(u.createElement=e),null!=t&&(u.outputH=t)}});var wn=u.global;wn.NornJ=wn.nj=u,n.compile=yn,n.compileH=bn,n.default=u,n.registerComponent=H,n.registerExtension=an,n.registerFilter=dn,n.render=gn,n.renderH=jn,Object.defineProperty(n,"__esModule",{value:!0})});
