/*!
 * NornJ template engine v5.2.0-rc.1
 * (c) 2016-2020 Joe_Sky
 * Released under the MIT License.
 */
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e=e||self).NornJ={})}(this,function(e){"use strict";var s=function e(){return e["taggedTmpl"+(e.outputH?"H":"")].apply(null,arguments)};function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],t=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(t=(a=l.next()).done)&&(n.push(a.value),!r||n.length!==r);t=!0);}catch(e){i=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(i)throw o}}return n}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}s.preAsts={},s.asts={},s.templates={},s.errorTitle="[NornJ]",s.tmplRule={},s.outputH=!1,s.global="undefined"!=typeof self?self:global,s.textTag="nj-text",s.textMode=!1,s.noWsTag="nj-noWs",s.noWsMode=!1,s.fixTagName=!0;var t=Array.prototype.push,i=Array.prototype.slice,o=Object.prototype.hasOwnProperty,a=Object.prototype.toString,l=s.errorTitle,u=Object.defineProperty,c=Object.defineProperties;function r(r){return function(e){return a.call(e)==="[object "+r+"]"}}var f=r("Number"),p=r("String"),y=r("Map"),d=r("WeakMap"),g=r("Set"),h=r("WeakSet");function m(e,r){return t.apply(e,r),e}function b(e,r,n){return i.call(e,r,n)}function x(e){return Array.isArray(e)}function j(e){var r=n(e);return!x(e)&&("function"===r||"object"===r&&!!e)}var w,O=(w="length",function(e){return null==e?void 0:e[w]});function P(e){var r=O(e);return"number"==typeof r&&0<=r}function S(e,r,n){var t=e.size,i=0,o=!0,a=!1,l=void 0;try{for(var s,u=e[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=s.value,f=void 0;if(n){var p=v(c,2);f=r.call(e,p[1],p[0],i,t)}else f=r.call(e,c,i,t);if(!1===f)break;i++}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}function C(e,r,n){if(e)if(null==n&&(n=P(e)),n)for(var t=0,i=e.length;t<i;t++){if(!1===r.call(e,e[t],t,i))break}else if(g(e)||h(e))S(e,r);else if(y(e)||d(e))S(e,r,!0);else for(var o=Object.keys(e),a=o.length,l=0;l<a;l++){var s=o[l];if(!1===r.call(e,e[s],s,l,a))break}}var _=/(\n|\r)?[\s\xA0]+$/;function k(){}function N(e,r,n){if(!e)switch(n){case"ex":throw Error(l+'Extension tag "'+r+'" is undefined, please check it has been registered.');default:throw Error(l+(r||e))}}function T(e,r){switch(r){case"f":e='A filter called "'+e+'" is undefined.'}console.warn(l+e)}function A(){return Object.create(null)}var F=/["]+/g,E=/[']+/g;function L(e){return~e.indexOf("-")&&(e=e.replace(/-\w/g,function(e){return e.substr(1).toUpperCase()})),e}var H=Object.assign||function(e){for(var r=1,n=arguments;r<n.length;r++){var t=n[r];for(var i in t)o.call(t,i)&&(e[i]=t[i])}return e};function M(e){return e[0].toUpperCase()+e.substr(1)}function W(e){return e[0].toLowerCase()+e.substr(1)}function z(e){return M(e)}H(s,{defineProp:u,defineProps:c,arrayPush:m,arraySlice:b,isArray:x,isObject:j,isNumber:f,isString:p,isArrayLike:P,isMap:y,isWeakMap:d,isSet:g,isWeakSet:h,each:C,noop:k,throwIf:N,warn:T,obj:A,camelCase:L,assign:H,upperFirst:M,lowerFirst:W,capitalize:z});var K=Object.freeze({__proto__:null,defineProp:u,defineProps:c,isNumber:f,isString:p,isMap:y,isWeakMap:d,isSet:g,isWeakSet:h,arrayPush:m,arraySlice:b,isArray:x,isObject:j,isArrayLike:P,each:C,trimRight:function(e){return e.replace(_,function(e,r){return r?"\n":""})},noop:k,throwIf:N,warn:T,error:function(e){console.error(l+e)},obj:A,clearQuot:function(e,r){if(null!=e){var n;if(null==r){var t=e[0];"'"===t?n=E:'"'===t&&(n=F)}else n=r?F:E;return n&&(e=e.replace(n,"")),e}},camelCase:L,assign:H,upperFirst:M,lowerFirst:W,capitalize:z});H(s,{config:function(e){var r=e.createElement,n=e.outputH;r&&(s.createElement=r),null!=n&&(s.outputH=n)}});var R={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},$=/[&><"']/g;var I={nbsp:" ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lt:"<",gt:">",amp:"&",quot:'"',"#x27":"'"},G=RegExp("&("+Object.keys(I).join("|")+");","g");H(s,{escape:function(e){return null==e?"":e.replace?e.replace($,function(e){return R[e]}):e},unescape:function(e){return null==e?"":e.replace?e.replace(G,function(e,r){return I[r]}):e}});var D,U,J=/^(-?([0-9]+[.]?[0-9]+)|[0-9])$/;function q(e){if(j(e)||x(e)||f(e))return e;for(var r,n,t=/([^\s:]+)[\s]?:[\s]?([^;]+)[;]?/g;r=t.exec(e);){var i=r[1],o=r[2];n=n||{},/^[A-Z-]+$/.test(i)&&(i=i.toLowerCase()),n[i=L(i)]=J.test(o)?+o:o}return n}function B(e,r,n){for(var t,i,o=0,a=(r=r||this.data).length;o<a;o++)if((i=r[o])&&void 0!==(t=i[e]))return n?{source:i,value:t,prop:e,_njSrc:!0}:t}function Q(e,r){return null==e?e:e._njTmpl?e.call(r):e.call(r.$this,r)}function Z(e,r,n,t,i){var o;return o=t.icp&&(o=B(n,t.icp))||r.cp[e],null!=i&&o&&(o=o[i]),o||n}function V(e,r,n,t,i){return null!=e?p(e)?Z(e.toLowerCase(),n,e,i):e:Z(r,n,t,i)}function X(e,r){return null!=e&&""!==e?e:r}function Y(e,r){var n=e.args;if(n)for(var t=n.length;t--;)r.unshift(n[t])}function ee(e,r){return r?H({},e,{data:r.data?m(r.data,e.data):e.data,parent:r.newParent?e:e.parent,index:null!=r.index?r.index:e.index,item:null!=r.item?r.item:e.item}):e}function re(e){for(var r="",n=arguments.length,t=Array(1<n?n-1:0),i=1;i<n;i++)t[i-1]=arguments[i];var o=H.apply(K,[e].concat(t));for(var a in o){var l=o[a];r+=" "+a+(a!==l?'="'+l+'"':" ")}return r}function ne(r,n,t){return function(e){return t(r,n,e)}}function te(t,i){return function(e,r){var n=b(arguments);return i(t,this&&this._njCtx?H({},this,{data:m(n,this.data)}):{data:n,getData:B,get $this(){return this.data[this.data.length-1]},d:B,icp:function(e){var r;return e&&e.components&&(x(r=e.components)||(r=[r])),r}(e&&e._njParam?r:e),_njCtx:!0})}}function ie(e){if(null==e.level)return"";for(var r="",n=0;n<e.level;n++)r+="  ";return r}function oe(e){return null==e.index?"":0==e.index?"":"\n"}function ae(e){return s.createElement.apply(null,e)}function le(e){return e.source?e.value.bind(e.source):e}(U=D=D||{}).OnlyLowerCase="onlyLowerCase";var se={if:function(e,r){var n;e&&e._njOpts&&(e=(r=e).props.condition),"false"===e&&(e=!1);var t=r.props;if(e)n=(t&&t.then||r.children)();else if(t){var i=t.else;if(t.elseifs){var o=t.elseifs.length;C(t.elseifs,function(e,r){if(e.value)return n=e.fn(),!1;r===o-1&&i&&(n=i())},!0)}else i&&(n=i())}return r.useString&&null==n?"":n},then:function(e){return e.tagProps.then=e.children},else:function(e){return e.tagProps.else=e.children},elseif:function(e,r){e&&e._njOpts&&(e=(r=e).props.condition||r.props.value);var n=r.tagProps;n.elseifs||(n.elseifs=[]),n.elseifs.push({value:e,fn:r.children})},switch:function(n,e){var t;n&&n._njOpts&&(n=(e=n).props.value);var i=e.props,r=i.elseifs||[{}],o=r.length;return C(r,function(e,r){if(n===e.value)return t=e.fn(),!1;r===o-1&&i.else&&(t=i.else())},!0),t},each:function(e,l){e&&e._njOpts&&(e=(l=e).props.of);var s,u=l.useString,r=l.props;if(e){s=u?"":[];var n=P(e),c=n||g(e)||h(e);C(e,function(e,r,n,t){var i={data:[e],index:c?r:n,item:e,newParent:!0},o={"@first":0===i.index,"@last":i.index===(c?n:t)-1};c||(o["@key"]=r),i.data.push(o);var a=l.children(i);u?s+=a:s.push(a)},n),u||s.length||(s=null),s&&s.length||!r||!r.else||(s=r.else())}else r&&r.else&&(s=r.else()),u&&null==s&&(s="");return s},prop:function(e,r){var n,t=r.value();n=void 0!==t?t:!r.useString||e,r.tagProps[r.outputH?function(e){switch(e){case"class":e="className";break;case"for":e="htmlFor"}return e}(e):e]=n},spread:function(e,n){var t=n.tagProps;C(e,function(e,r){void 0===t[r]&&(n.tagProps[r]=e)},!1)},show:function(e){if(!e.value()){var r=e.tagProps,n=e.useString;r.style||(r.style=n?"":{}),n?r.style+=(r.style?";":"")+"display:none":x(r.style)?r.style.push({display:"none"}):r.style.display="none"}},obj:function(e){return e.props},block:function(e){return e.children()},with:function(e,r){if(e&&e._njOpts)return(r=e).children({data:[r.props]});var n=r.props;return r.children({data:[n&&n.as?function(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}({},n.as,e):e]})},arg:function(e){var r=e.tagProps;r.args||(r.args=[]),r.args.push(e.value())},css:function(e){return e.props.style}};function ue(e,r){var n={onlyGlobal:!1,useString:!1,newContext:!0,isSubTag:!1,isDirective:!1,isBindable:!1,useExpressionInProps:!1,hasName:!0,noTagName:!1,hasTagProps:!0,hasTmplCtx:!0,hasOutputH:!1};return e&&(n=H(n,e)),r&&(n=H(n,r)),n}var ce={onlyGlobal:!0,newContext:!(U.OnlyUpperCase="onlyUpperCase"),hasName:!1,hasTagProps:!1,hasTmplCtx:!1},fe=ue(ce,{useExpressionInProps:!0}),pe={if:ue(fe),else:ue(fe,{isSubTag:!0,hasTagProps:!0}),switch:ue(fe,{needPrefix:D.OnlyLowerCase}),each:ue(fe,{newContext:{item:"item",index:"index",data:{first:["@first","first"],last:["@last","last"],$key:["@key","key"]}}}),prop:ue(ce,{isDirective:!0,needPrefix:!0,hasTagProps:!0}),obj:ue(ce,{needPrefix:!0}),with:ue(ce,{newContext:{getDataFromProps:!0}}),style:{needPrefix:!0}};function ve(e,r,n,i){var t=e;j(e)||((t={})[e]={extension:r,options:n}),C(t,function(e,r){if(e){var n=e.extension,t=e.options;n?se[r]=n:i||(se[r]=e),i?(pe[r]||(pe[r]=ue()),j(t)?H(pe[r],t):pe[r]=ue()):pe[r]=ue(t)}},!1)}pe.then=ue(pe.else),pe.elseif=ue(pe.else),pe.spread=ue(pe.prop),pe.block=ue(pe.obj),pe.arg=ue(pe.prop),pe.show=ue(pe.prop,{useExpressionInProps:!0,noTagName:!0,hasOutputH:!0}),pe.css=ue(pe.obj),se.for=se.each,pe.for=ue(pe.each),se.case=se.elseif,pe.case=ue(pe.elseif),se.empty=se.default=se.else,pe.empty=ue(pe.else),pe.default=ue(pe.else),se.strProp=se.prop,pe.strProp=ue(pe.prop,{useString:!0}),se.strArg=se.arg,pe.strArg=ue(pe.strProp),se.pre=se.block,pe.pre=ue(pe.block),H(s,{extensions:se,extensionConfig:pe,registerExtension:ve});var ye=/(\d{3})(?=\d)/g,de={".":function(e,r,n){return null==e?e:e._njSrc?{source:e.value,value:e.value[r],prop:r,parent:e,_njSrc:!0}:n?{source:e,value:e[r],prop:r,_njSrc:!0}:e[r]},_:function(e,r){if(null==e)return e;if(e._njSrc){var n=e.source[e.prop];return null!=n?n.apply(e.source,r):n}return e.apply(null,r)},"#":function(e,r,n){return null==e?e:Q(e[r],n.context)},"**":function(e,r){var n=Math.pow(e,r);return isNaN(n)?0:n},"%%":function(e,r){var n=Math.floor(e/r);return isNaN(n)?0:n},"?:":function(e,r,n){return e?r:n},"!":function(e){return!e},int:function(e,r){var n=parseInt(e,1<arguments.length&&void 0!==r?r:10);return isNaN(n)?0:n},float:function(e,r){var n=parseFloat(e);return isNaN(n)?0:null!=r?n.toFixed(r):n},bool:function(e){return"false"!==e&&!!e},reg:function(e,r){return RegExp(e,r)},css:function(e){return q(e)},rOpe:ge(1),rLt:ge(0),"<=>":function(e,r){return r<e?1:e==r?0:-1},upperFirst:function(e){return M(e)},lowerFirst:function(e){return W(e)},camelCase:function(e){return L(e)},isObject:function(e){return j(e)},isNumber:function(e){return f(e)},isString:function(e){return p(e)},isArrayLike:function(e){return P(e)},currency:function(e,r,n,t){if(0>e-parseFloat(e))return null!=t?t:be.currency.placeholder;e=parseFloat(e),n=null!=(n=null!=r&&p(r)?r:n)&&p(n)?n:be.currency.symbol,r=null!=r&&f(r)?r:2;var i=Math.abs(e).toFixed(r),o=r?i.slice(0,-1-r):i,a=o.length%3,l=0<a?o.slice(0,a)+(3<o.length?",":""):"",s=r?i.slice(-1-r):"";return(e<0?"-":"")+n+l+o.slice(a).replace(ye,"$1,")+s}};function ge(n){return function(r,e){return Object.keys(Array.apply(null,{length:e-r+n})).map(function(e){return+e+r})}}function he(e,r){var n={onlyGlobal:!1,hasOptions:!1,isOperator:!1,hasLevel:!1,hasTmplCtx:!0,alias:null};return e&&(n=H(n,e)),r&&(n=H(n,r)),n}var me={onlyGlobal:!0,hasOptions:!1},be={".":he(me),_:he({onlyGlobal:!0}),"#":he({onlyGlobal:!0,hasOptions:!0,hasLevel:!0}),"**":he(me),"%%":he(me),"?:":he(me),"!":he(me),int:he(me),float:he(me),bool:he(me),reg:he(me),css:he(me),rOpe:he(me),rLt:he(me),"<=>":he(me),upperFirst:he(me),lowerFirst:he(me),camelCase:he(me),isObject:he(me),isNumber:he(me),isString:he(me),isArrayLike:he(me),currency:he(me,{symbol:"$",placeholder:""})};function xe(e,r,n,l){var t=e;j(e)||((t={})[e]={filter:r,options:n}),C(t,function(e,r){if(e){var n=e.filter,t=e.options;if(t){if(t.isOperator){var i=s.createRegexOperators;i&&i(r)}var o=t.alias;if(o){var a=s.createFilterAlias;a&&a(r,o),r=o}}n?de[r]=n:l||(de[r]=e),l?(be[r]||(be[r]=he()),j(t)?H(be[r],t):be[r]=he()):be[r]=he(t)}},!1)}de.capitalize=de.upperFirst,be.capitalize=he(be.upperFirst),H(s,{filters:de,filterConfig:be,registerFilter:xe});var je={},we=new Map;function Oe(e,r,n){var l,t=e;return j(e)||((t={})[e]={component:r,options:n}),C(t,function(e,r,n){var t;if(null!=e){var i=e.component,o=e.options,a=r.toLowerCase();we.set(je[a]=t=i||e,o)}0==n?l=t:(1==n&&(l=[l]),l.push(t))},!1),l}function Pe(){return function(e,r,n,t,i){if(e){if(j(r)){var o=r;r=o.tmplKey,o.fileName,o.delimiters,o.tmplRule}var a,l;if(r&&(a=s.templates[r]),!a)j(e)&&e.main&&(l=e),a=function(e,r){var n={tmplKey:r,us:e.useString,x:s.extensions,f:s.filters,np:k,tf:N,wn:T,n:ee,c:Q,sp:q,r:ne,e:Z,er:V,en:X,aa:Y,an:H,g:s.global,cf:le};return n.us?(n.ans=re,n.es=s.escape,n.ls=ie,n.fl=oe):(n.h=s.createElement,n.H=ae,n.cp=s.components),C(e,function(e,r){"main"===r?(n[r]=te(n,e),c(n[r],{_njTmpl:{value:!0}}),n["_"+r]=e):r.indexOf("fn")||(n[r]=e)},!1),n}(l),r&&(s.templates[r]=a);return a.main}}}H(s,{components:je,componentConfig:we,registerComponent:Oe,getComponentConfig:function(e){return we.get(p(e)&&je[e]||e)},copyComponentConfig:function(e,r){return we.set(e,we.get(r)),e}});var Se=Pe(),Ce=Pe();function _e(n){return function(e,r){return(n?Ce:Se)(e,r?{tmplKey:r.tmplKey?r.tmplKey:e._njTmplKey,fileName:r.fileName,delimiters:r.delimiters}:e._njTmplKey).apply(null,b(arguments,1))}}var ke=_e(),Ne=_e(!0);function Te(i){return function(e,r){var n=(i?Ce:Se)(e,e._njTmplKey);if(r){var t=function(){return n.apply(this,m([r],arguments))};return u(r,"_njParam",{value:!0}),c(t,{_njTmpl:{value:!0}}),t}return n}}var Ae=Te(),Fe=Te(!0);H(s,{compile:Se,compileH:Ce,render:ke,renderH:Ne,buildRender:Ae,buildRenderH:Fe});var Ee=s.global;Ee.NornJ=Ee.nj=s,e.compile=Se,e.compileH=Ce,e.default=s,e.registerComponent=Oe,e.registerExtension=ve,e.registerFilter=xe,e.render=ke,e.renderH=Ne,Object.defineProperty(e,"__esModule",{value:!0})});
