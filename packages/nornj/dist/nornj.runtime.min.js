/*!
* NornJ template engine v5.0.0-rc.39
* (c) 2016-2019 Joe_Sky
* Released under the MIT License.
*/
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).NornJ={})}(this,function(e){"use strict";function l(){return l["taggedTmpl"+(l.outputH?"H":"")].apply(null,arguments)}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}l.createElement=null,l.components={},l.componentConfig=new Map,l.preAsts={},l.asts={},l.templates={},l.errorTitle="[NornJ]",l.tmplRule={},l.outputH=!1,l.global="undefined"!=typeof self?self:global,l.textTag="nj-text",l.textMode=!1,l.noWsTag="nj-noWs",l.noWsMode=!1,l.fixTagName=!0;var t=Array.prototype.push,i=Array.prototype.slice,o=Object.prototype.hasOwnProperty,n=Object.prototype.toString,a=l.errorTitle,s=Object.defineProperty,u=Object.defineProperties;function c(e,n){return t.apply(e,n),e}function p(e,n,r){return i.call(e,n,r)}function f(e){return Array.isArray(e)}function v(e){var n=r(e);return!f(e)&&("function"===n||"object"===n&&!!e)}function d(e){return"[object Number]"===n.call(e)}function g(e){return"[object String]"===n.call(e)}var m,y=(m="length",function(e){return null==e?void 0:e[m]});function h(e){var n=y(e);return"number"==typeof n&&0<=n}function b(e,n,r){if(e)if(null==r&&(r=h(e)),r)for(var t=0,i=e.length;t<i;t++){if(!1===n.call(e,e[t],t,i))break}else for(var o=Object.keys(e),a=o.length,s=0;s<a;s++){var u=o[s];if(!1===n.call(e,e[u],u,s,a))break}}var x=/(\n|\r)?[\s\xA0]+$/;function j(){}function w(e,n,r){if(!e)switch(r){case"ex":throw Error(a+'Extension tag "'+n+'" is undefined, please check it has been registered.');default:throw Error(a+(n||e))}}function P(e,n){switch(n){case"f":e='A filter called "'+e+'" is undefined.'}console.warn(a+e)}function O(){return Object.create(null)}var C=/["]+/g,S=/[']+/g;function _(e){return~e.indexOf("-")&&(e=e.replace(/-\w/g,function(e){return e.substr(1).toUpperCase()})),e}var N=Object.assign||function(e){for(var n=1,r=arguments;n<r.length;n++){var t=r[n];for(var i in t)o.call(t,i)&&(e[i]=t[i])}return e};function T(e){return e[0].toUpperCase()+e.substr(1)}function F(e){return e[0].toLowerCase()+e.substr(1)}function k(e){return T(e)}N(l,{defineProp:s,defineProps:u,arrayPush:c,arraySlice:p,isArray:f,isObject:v,isNumber:d,isString:g,isArrayLike:h,each:b,noop:j,throwIf:w,warn:P,obj:O,camelCase:_,assign:N,upperFirst:T,lowerFirst:F,capitalize:k});var A=Object.freeze({__proto__:null,defineProp:s,defineProps:u,arrayPush:c,arraySlice:p,isArray:f,isObject:v,isNumber:d,isString:g,isArrayLike:h,each:b,trimRight:function(e){return e.replace(x,function(e,n){return n?"\n":""})},noop:j,throwIf:w,warn:P,error:function(e){console.error(a+e)},obj:O,clearQuot:function(e,n){if(null!=e){var r;if(null==n){var t=e[0];"'"===t?r=S:'"'===t&&(r=C)}else r=n?C:S;return r&&(e=e.replace(r,"")),e}},camelCase:_,assign:N,upperFirst:T,lowerFirst:F,capitalize:k}),L=l.components,E=l.componentConfig;function H(e,n,r){var s,t=e;return v(e)||((t={})[e]={component:n,options:r}),b(t,function(e,n,r){var t;if(null!=e){var i=e.component,o=e.options,a=n.toLowerCase();E.set(L[a]=t=i||e,o)}0==r?s=t:(1==r&&(s=[s]),s.push(t))},!1),s}var K={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},R=/[&><"']/g;var $={nbsp:" ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lt:"<",gt:">",amp:"&",quot:'"',"#x27":"'"},z=RegExp("&("+Object.keys($).join("|")+");","g");N(l,{escape:function(e){return null==e?"":e.replace?e.replace(R,function(e){return K[e]}):e},unescape:function(e){return null==e?"":e.replace?e.replace(z,function(e,n){return $[n]}):e}});var M,G,I=/^(-?([0-9]+[.]?[0-9]+)|[0-9])$/;function D(e){if(v(e)||f(e)||d(e))return e;for(var n,r,t=/([^\s:]+)[\s]?:[\s]?([^;]+)[;]?/g;n=t.exec(e);){var i=n[1],o=n[2];r=r||{},/^[A-Z-]+$/.test(i)&&(i=i.toLowerCase()),r[i=_(i)]=I.test(o)?+o:o}return r}function U(e,n,r){for(var t,i,o=0,a=(n=n||this.data).length;o<a;o++)if((i=n[o])&&void 0!==(t=i[e]))return r?{source:i,value:t,prop:e,_njSrc:!0}:t}function J(e,n){return null==e?e:e._njTmpl?e.call(n):e.call(n.$this,n)}function W(e,n,r,t,i){var o;return o=t.icp&&(o=U(r,t.icp))||n.cp[e],null!=i&&o&&(o=o[i]),o||r}function q(e,n,r,t,i){return null!=e?g(e)?W(e.toLowerCase(),r,e,i):e:W(n,r,t,i)}function B(e,n){return null!=e&&""!==e?e:n}function Q(e,n){var r=e.args;if(r)for(var t=r.length;t--;)n.unshift(r[t])}function Z(e,n){return n?N({},e,{data:n.data?c(n.data,e.data):e.data,parent:n.newParent?e:e.parent,index:null!=n.index?n.index:e.index,item:null!=n.item?n.item:e.item}):e}function V(){var e="",n=N.apply(A,arguments);for(var r in n){var t=n[r];e+=" "+r+(r!==t?'="'+t+'"':" ")}return e}function X(n,r,t){return function(e){return t(n,r,e)}}function Y(t,i){return function(e,n){var r=p(arguments);return i(t,this&&this._njCtx?N({},this,{data:c(r,this.data)}):{data:r,getData:U,get $this(){return this.data[this.data.length-1]},d:U,icp:function(e){var n;return e&&e.components&&(f(n=e.components)||(n=[n])),n}(e&&e._njParam?n:e),_njCtx:!0})}}function ee(e){if(null==e.level)return"";for(var n="",r=0;r<e.level;r++)n+="  ";return n}function ne(e){return null==e.index?"":0==e.index?"":"\n"}function re(e){return l.createElement.apply(null,e)}function te(e){return e.source?e.value.bind(e.source):e}(G=M=M||{}).OnlyLowerCase="onlyLowerCase";var ie={if:function(e,n){var r;e&&e._njOpts&&(e=(n=e).props.condition),"false"===e&&(e=!1);var t=n.props;if(e)r=(t&&t.then||n.children)();else if(t){var i=t.else;if(t.elseifs){var o=t.elseifs.length;b(t.elseifs,function(e,n){if(e.value)return r=e.fn(),!1;n===o-1&&i&&(r=i())},!0)}else i&&(r=i())}return n.useString&&null==r?"":r},then:function(e){return e.tagProps.then=e.children},else:function(e){return e.tagProps.else=e.children},elseif:function(e,n){e&&e._njOpts&&(e=(n=e).props.condition||n.props.value);var r=n.tagProps;r.elseifs||(r.elseifs=[]),r.elseifs.push({value:e,fn:n.children})},switch:function(r,e){var t;r&&r._njOpts&&(r=(e=r).props.value);var i=e.props,n=i.elseifs||[{}],o=n.length;return b(n,function(e,n){if(r===e.value)return t=e.fn(),!1;n===o-1&&i.else&&(t=i.else())},!0),t},each:function(e,s){e&&e._njOpts&&(e=(s=e).props.of);var u,l=s.useString,n=s.props;if(e){u=l?"":[];var c=h(e);b(e,function(e,n,r,t){var i={data:[e],index:c?n:r,item:e,newParent:!0},o={"@first":0===i.index,"@last":i.index===(c?r:t)-1};c||(o["@key"]=n),i.data.push(o);var a=s.children(i);l?u+=a:u.push(a)},c),l||u.length||(u=null),u&&u.length||!n||!n.else||(u=n.else())}else n&&n.else&&(u=n.else()),l&&null==u&&(u="");return u},prop:function(e,n){var r,t=n.value();r=void 0!==t?t:!n.useString||e,n.tagProps[n.outputH?function(e){switch(e){case"class":e="className";break;case"for":e="htmlFor"}return e}(e):e]=r},spread:function(e,r){var t=r.tagProps;b(e,function(e,n){void 0===t[n]&&(r.tagProps[n]=e)},!1)},show:function(e){if(!e.value()){var n=e.tagProps,r=e.useString;n.style||(n.style=r?"":{}),r?n.style+=(n.style?";":"")+"display:none":f(n.style)?n.style.push({display:"none"}):n.style.display="none"}},obj:function(e){return e.props},block:function(e){return e.children()},with:function(e,n){if(e&&e._njOpts)return(n=e).children({data:[n.props]});var r=n.props;return n.children({data:[r&&r.as?function(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}({},r.as,e):e]})},arg:function(e){var n=e.tagProps;n.args||(n.args=[]),n.args.push(e.value())},css:function(e){return e.props.style}};function oe(e,n){var r={onlyGlobal:!1,useString:!1,newContext:!0,isSubTag:!1,isDirective:!1,isBindable:!1,useExpressionInProps:!0,hasName:!0,noTagName:!1,hasTagProps:!0,hasTmplCtx:!0,hasOutputH:!1};return e&&(r=N(r,e)),n&&(r=N(r,n)),r}var ae={onlyGlobal:!0,newContext:!(G.OnlyUpperCase="onlyUpperCase"),hasName:!1,hasTagProps:!1,hasTmplCtx:!1},se={if:oe(ae),else:oe(ae,{isSubTag:!0,hasTagProps:!0}),switch:oe(ae,{needPrefix:M.OnlyLowerCase}),each:oe(ae,{newContext:{item:"item",index:"index",data:{first:["@first","first"],last:["@last","last"],$key:["@key","key"]}}}),prop:oe(ae,{isDirective:!0,needPrefix:!0,hasTagProps:!0}),obj:oe(ae,{needPrefix:!0}),with:oe(ae,{newContext:{getDataFromProps:!0}}),style:{useExpressionInProps:!1,needPrefix:!0}};function ue(e,n,r,i){var t=e;v(e)||((t={})[e]={extension:n,options:r}),b(t,function(e,n){if(e){var r=e.extension,t=e.options;r?ie[n]=r:i||(ie[n]=e),i?(se[n]||(se[n]=oe()),v(t)?N(se[n],t):se[n]=oe()):se[n]=oe(t)}},!1)}se.then=oe(se.else),se.elseif=oe(se.else),se.spread=oe(se.prop),se.block=oe(se.obj),se.arg=oe(se.prop),se.show=oe(se.prop,{noTagName:!0,hasOutputH:!0}),se.css=oe(se.obj),ie.for=ie.each,se.for=oe(se.each),ie.case=ie.elseif,se.case=oe(se.elseif),ie.empty=ie.default=ie.else,se.empty=oe(se.else),se.default=oe(se.else),ie.strProp=ie.prop,se.strProp=oe(se.prop,{useString:!0}),ie.strArg=ie.arg,se.strArg=oe(se.strProp),ie.pre=ie.block,se.pre=oe(se.block),N(l,{extensions:ie,extensionConfig:se,registerExtension:ue});var le=/(\d{3})(?=\d)/g,ce={".":function(e,n,r){return null==e?e:e._njSrc?{source:e.value,value:e.value[n],prop:n,parent:e,_njSrc:!0}:r?{source:e,value:e[n],prop:n,_njSrc:!0}:e[n]},_:function(e,n){if(null==e)return e;if(e._njSrc){var r=e.source[e.prop];return null!=r?r.apply(e.source,n):r}return e.apply(null,n)},"#":function(e,n,r){return null==e?e:J(e[n],r.context)},"**":function(e,n){var r=Math.pow(e,n);return isNaN(r)?0:r},"%%":function(e,n){var r=Math.floor(e/n);return isNaN(r)?0:r},"?:":function(e,n,r){return e?n:r},"!":function(e){return!e},int:function(e,n){var r=parseInt(e,1<arguments.length&&void 0!==n?n:10);return isNaN(r)?0:r},float:function(e,n){var r=parseFloat(e);return isNaN(r)?0:null!=n?r.toFixed(n):r},bool:function(e){return"false"!==e&&!!e},reg:function(e,n){return RegExp(e,n)},css:function(e){return D(e)},"..":pe(1),rLt:pe(0),"<=>":function(e,n){return n<e?1:e==n?0:-1},upperFirst:function(e){return T(e)},lowerFirst:function(e){return F(e)},camelCase:function(e){return _(e)},isObject:function(e){return v(e)},isNumber:function(e){return d(e)},isString:function(e){return g(e)},isArrayLike:function(e){return h(e)},currency:function(e,n,r,t){if(0>e-parseFloat(e))return null!=t?t:de.currency.placeholder;e=parseFloat(e),r=null!=(r=null!=n&&l.isString(n)?n:r)&&l.isString(r)?r:de.currency.symbol,n=null!=n&&l.isNumber(n)?n:2;var i=Math.abs(e).toFixed(n),o=n?i.slice(0,-1-n):i,a=o.length%3,s=0<a?o.slice(0,a)+(3<o.length?",":""):"",u=n?i.slice(-1-n):"";return(e<0?"-":"")+r+s+o.slice(a).replace(le,"$1,")+u}};function pe(r){return function(n,e){return Object.keys(Array.apply(null,{length:e-n+r})).map(function(e){return+e+n})}}function fe(e,n){var r={onlyGlobal:!1,hasOptions:!1,isOperator:!1,hasLevel:!1,hasTmplCtx:!0,alias:null};return e&&(r=N(r,e)),n&&(r=N(r,n)),r}var ve={onlyGlobal:!0,hasOptions:!1},de={".":fe(ve),_:fe({onlyGlobal:!0}),"#":fe({onlyGlobal:!0,hasOptions:!0,hasLevel:!0}),"**":fe(ve),"%%":fe(ve),"?:":fe(ve),"!":fe(ve),int:fe(ve),float:fe(ve),bool:fe(ve),reg:fe(ve),css:fe(ve),"..":fe(ve),rLt:fe(ve),"<=>":fe(ve),upperFirst:fe(ve),lowerFirst:fe(ve),camelCase:fe(ve),isObject:fe(ve),isNumber:fe(ve),isString:fe(ve),isArrayLike:fe(ve),currency:fe(ve,{symbol:"$",placeholder:""})};function ge(e,n,r,s){var t=e;v(e)||((t={})[e]={filter:n,options:r}),b(t,function(e,n){if(e){var r=e.filter,t=e.options;if(t){if(t.isOperator){var i=l.createRegexOperators;i&&i(n)}var o=t.alias;if(o){var a=l.createFilterAlias;a&&a(n,o),n=o}}r?ce[n]=r:s||(ce[n]=e),s?(de[n]||(de[n]=fe()),v(t)?N(de[n],t):de[n]=fe()):de[n]=fe(t)}},!1)}function me(){return function(e,n,r,t,i){if(e){if(v(n)){var o=n;n=o.tmplKey,o.fileName,o.delimiters,o.tmplRule}var a,s;if(n&&(a=l.templates[n]),!a)v(e)&&e.main&&(s=e),a=function(e,n){var r={tmplKey:n,us:e.useString,x:l.extensions,f:l.filters,np:j,tf:w,wn:P,n:Z,c:J,sp:D,r:X,e:W,er:q,en:B,aa:Q,an:N,g:l.global,cf:te};return r.us?(r.ans=V,r.es=l.escape,r.ls=ee,r.fl=ne):(r.h=l.createElement,r.H=re,r.cp=l.components),b(e,function(e,n){"main"===n?(r[n]=Y(r,e),u(r[n],{_njTmpl:{value:!0}}),r["_"+n]=e):n.indexOf("fn")||(r[n]=e)},!1),r}(s),n&&(l.templates[n]=a);return a.main}}}ce.capitalize=ce.upperFirst,de.capitalize=fe(de.upperFirst),N(l,{filters:ce,filterConfig:de,registerFilter:ge});var ye=me(),he=me();function be(r){return function(e,n){return(r?he:ye)(e,n?{tmplKey:n.tmplKey?n.tmplKey:e._njTmplKey,fileName:n.fileName,delimiters:n.delimiters}:e._njTmplKey).apply(null,p(arguments,1))}}var xe=be(),je=be(!0);function we(i){return function(e,n){var r=(i?he:ye)(e,e._njTmplKey);if(n){var t=function(){return r.apply(this,c([n],arguments))};return s(n,"_njParam",{value:!0}),u(t,{_njTmpl:{value:!0}}),t}return r}}var Pe=we(),Oe=we(!0);N(l,{compile:ye,compileH:he,render:xe,renderH:je,buildRender:Pe,buildRenderH:Oe}),N(l,{registerComponent:H,getComponentConfig:function(e){return E.get(g(e)&&L[e]||e)},config:function(e){var n=e.createElement,r=e.outputH;n&&(l.createElement=n),null!=r&&(l.outputH=r)}});var Ce=l.global;Ce.NornJ=Ce.nj=l,e.compile=ye,e.compileH=he,e.default=l,e.registerComponent=H,e.registerExtension=ue,e.registerFilter=ge,e.render=xe,e.renderH=je,Object.defineProperty(e,"__esModule",{value:!0})});
