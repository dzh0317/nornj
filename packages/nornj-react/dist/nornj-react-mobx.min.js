/*!
* NornJ-React-Mobx v5.0.0-rc.39
* (c) 2016-2019 Joe_Sky
* Released under the MIT License.
*/
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(require("nornj"),require("mobx"),require("mobx-react")):"function"==typeof define&&define.amd?define(["nornj","mobx","mobx-react"],r):r((e=e||self).NornJ,e.mobx,e.mobxReact)}(this,function(e,r,t){"use strict";var n,O=i(require("nornj")),j=i(require("react")),P=require("mobx"),a=(n=require("../../extensionConfig"))&&n.__esModule?n:{default:n},B=require("../../../lib/utils");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;var r=o();if(r&&r.has(e))return r.get(e);var t={};if(null!=e){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(t,a,i):t[a]=e[a]}}return t.default=e,r&&r.set(e,t),t}function k(){return(k=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function q(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)~r.indexOf(t=i[n])||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)~r.indexOf(t=i[n])||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var u=j.default.forwardRef(function(e,r){var t=e.MobxBindTag,n=e.mobxBindDirectiveOptions,a=n.tagName,i=n.context.$this,o=n.props,u=e._mobxBindValue,l=q(e,["MobxBindTag","mobxBindDirectiveOptions","_mobxBindValue"]),c="value",f="onChange",s=O.default.getComponentConfig(a)||{},p=function(e,r){var t;return e&&e.every(function(e){return e.name!=r||(t=e,!1)}),t}(o&&o.arguments,"debounce");null!=s.valuePropName&&(c=s.valuePropName),null!=s.changeEventName&&(f=s.changeEventName);var d=u.value,v="select"===a&&l.multiple;(s.needToJS||v)&&(d=(0,P.toJS)(d));var b,g=l[f];if(p){var m=p.modifiers;b=(0,j.useRef)((0,B.debounce)(function(e){g&&g.apply(i,e)},m&&+m[0]||100))}var x={};if(s.hasEventObject){var h=s.targetPropName||"value",y="input"===a&&"checkbox"===l.type;"input"===a&&"radio"===l.type?x.checked=l.value===d:y?x.checked=null!=d&&(O.default.isArrayLike(d)?!!~d.indexOf(l.value):d):x[c]=d,x[f]=function(e){e&&e.persist&&e.persist(),C(e.target[h],{target:e.target,value:u,args:arguments,changeEvent:g,valuePropName:c,emitChangeDebounced:b,isMultipleSelect:v,isCheckbox:y},i)}}else x[c]=d,x[f]=function(e){C(e,{value:u,args:arguments,changeEvent:g,valuePropName:c,emitChangeDebounced:b},i)};return j.default.createElement(t,k({},l,x,{ref:r}))});function C(e,r,t){var n=e;if(r.isMultipleSelect)n=O.default.arraySlice(r.target.options).filter(function(e){return e.selected}).map(function(e){return e.value});else if(r.isCheckbox){var a=r.value.value;n=O.default.isArrayLike(a)?(r.target.checked?a.push(e):a.splice(a.indexOf(e),1),a):r.target.checked}var i=r.value.source["set".concat(O.default.upperFirst(r.value.prop))];i?i(n,r.args):r.value.source[r.value.prop]=n,r.emitChangeDebounced?r.emitChangeDebounced.current(r.args):r.changeEvent&&r.changeEvent.apply(t,r.args)}(0,O.registerExtension)("mobxBind",function(e){var r=e.value();if(null==r)return r;var t=e.tagName,n=e.tagProps;(0,e.setTagName)(u),n.MobxBindTag=t,n.mobxBindDirectiveOptions=e,n._mobxBindValue=r},a.default.mobxBind),O.default.extensions.mstBind=O.default.extensions.mobxBind;var l=require("nornj"),c=p(require("react")),f=require("mobx-react-lite"),s=p(require("../../extensionConfig"));function p(e){return e&&e.__esModule?e:{default:e}}(0,l.registerExtension)("mobxObserver",function(e){return c.default.createElement(f.Observer,null,function(){return e.children()})},s.default.mobxObserver),e.registerComponent("mobx-Provider",t.Provider),e.registerFilter("toJS",function(e){return r.toJS(e)})});
